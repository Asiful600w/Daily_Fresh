[{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\actions\\address.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\actions\\orders.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\actions\\register.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'data' is assigned a value but never used.","line":26,"column":17,"nodeType":"Identifier","messageId":"unusedVar","endLine":26,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use server'\r\n\r\nimport * as z from \"zod\"\r\nimport { RegisterSchema } from \"@/schemas\"\r\nimport { supabaseAdmin } from \"@/lib/supabaseAdmin\"\r\n\r\nexport const register = async (values: z.infer<typeof RegisterSchema>) => {\r\n    const validatedFields = RegisterSchema.safeParse(values)\r\n\r\n    if (!validatedFields.success) {\r\n        return { error: validatedFields.error.issues[0].message }\r\n    }\r\n\r\n    const { email, password, name, phone } = validatedFields.data\r\n\r\n    try {\r\n        // Check for existing user in auth.users\r\n        const { data: existingAuthUser } = await supabaseAdmin.auth.admin.listUsers()\r\n        const userExists = existingAuthUser.users.some(u => u.email === email)\r\n\r\n        if (userExists) {\r\n            return { error: \"Email already in use!\" }\r\n        }\r\n\r\n        // Create user with Supabase Auth (this will trigger handle_new_user)\r\n        const { data, error: createError } = await supabaseAdmin.auth.admin.createUser({\r\n            email,\r\n            password,\r\n            email_confirm: true, // Auto-confirm for server-side registration\r\n            user_metadata: {\r\n                full_name: name,\r\n                phone: phone,\r\n                role: 'CUSTOMER'\r\n            }\r\n        })\r\n\r\n        if (createError) {\r\n            throw new Error(createError.message)\r\n        }\r\n\r\n        return { success: \"Account created successfully! You can now log in.\" }\r\n    } catch (error: any) {\r\n        console.error(\"REGISTRATION ERROR:\", error);\r\n        return { error: `Registration Failed: ${error.message}` }\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\actions\\reviews.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\(main)\\cart\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\(main)\\category\\[slug]\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\(main)\\category\\[slug]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\(main)\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\(main)\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\(main)\\offers\\[slug]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\(main)\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\(main)\\product\\[id]\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\(main)\\product\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\(main)\\shop\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\auth\\callback\\page.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'supabase.auth'. Either include it or remove the dependency array.","line":39,"column":8,"nodeType":"ArrayExpression","endLine":39,"endColumn":16,"suggestions":[{"desc":"Update the dependencies array to be: [router, supabase.auth]","fix":{"range":[1573,1581],"text":"[router, supabase.auth]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { createClient } from '@/lib/supabase/client';\r\n\r\nexport default function AuthCallbackPage() {\r\n    const supabase = createClient();\r\n    const router = useRouter();\r\n\r\n    useEffect(() => {\r\n        // The supabase client is configured with detectSessionInUrl: true\r\n        // so it should automatically handle the hash/fragment and set the session.\r\n        // We just need to wait a moment or check session state, then redirect.\r\n\r\n        const handleAuth = async () => {\r\n            // Extract the 'code' parameter from the URL\r\n            const urlParams = new URLSearchParams(window.location.search);\r\n            const code = urlParams.get('code');\r\n\r\n            if (code) {\r\n                const { error } = await supabase.auth.exchangeCodeForSession(code);\r\n                if (error) {\r\n                    console.error('Auth error:', error);\r\n                    // Optionally show error\r\n                }\r\n            } else {\r\n                // If no code, perhaps it's a different auth flow or an error\r\n                console.warn('No code found in URL for exchangeCodeForSession.');\r\n                // Optionally handle this case, e.g., redirect to an error page or login\r\n            }\r\n\r\n            // Whether session exists or not (maybe just verified email), redirect to login\r\n            // Using window.location to properly clear url params\r\n            window.location.href = '/login';\r\n        };\r\n\r\n        handleAuth();\r\n    }, [router]);\r\n\r\n    return (\r\n        <div className=\"flex min-h-screen items-center justify-center bg-[#fafafa] dark:bg-[#111827]\">\r\n            <div className=\"text-center space-y-4\">\r\n                <div className=\"size-12 border-4 border-primary border-t-transparent rounded-full animate-spin mx-auto\"></div>\r\n                <h2 className=\"text-xl font-bold text-slate-900 dark:text-white\">Verifying...</h2>\r\n                <p className=\"text-slate-500 text-sm\">Please wait while we verify your request.</p>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\checkout\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\data-deletion\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\debug-update\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\forgot-password\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\loading.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\login\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useTransition' is defined but never used.","line":3,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":40,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useTransition"},"fix":{"range":[41,56],"text":""},"desc":"Remove unused variable \"useTransition\"."}]}],"suppressedMessages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handleSocialLogin' is assigned a value but never used.","line":61,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":61,"endColumn":28,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { useState, useTransition } from 'react';\r\nimport Link from 'next/link';\r\n// Remove supabase import\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport Image from 'next/image';\r\nimport { createClient } from '@/lib/supabase/client';\r\n\r\nexport default function LoginPage() {\r\n\r\n    const [isPending, startTransition] = React.useTransition();\r\n    const router = useRouter();\r\n    const searchParams = useSearchParams();\r\n    const [email, setEmail] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    const handleLogin = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setError(null);\r\n        startTransition(async () => {\r\n            const supabase = createClient();\r\n            const { data, error } = await supabase.auth.signInWithPassword({\r\n                email,\r\n                password,\r\n            });\r\n\r\n            if (error) {\r\n                setError(error.message);\r\n                return;\r\n            }\r\n\r\n            // Check user role from public.User table\r\n            if (data.user) {\r\n                const { data: profile } = await supabase\r\n                    .from('User')\r\n                    .select('role')\r\n                    .eq('id', data.user.id)\r\n                    .single();\r\n\r\n                // Only allow CUSTOMER role to login to web app\r\n                if (profile && profile.role !== 'CUSTOMER') {\r\n                    await supabase.auth.signOut();\r\n                    setError('This account is not authorized to access the customer portal. Please use the admin panel.');\r\n                    return;\r\n                }\r\n            }\r\n\r\n            // Successfully logged in\r\n            // Refresh router to update server components with new cookies\r\n            router.refresh();\r\n\r\n            // Redirect\r\n            const redirectUrl = searchParams.get('redirect') || '/';\r\n            router.push(redirectUrl);\r\n        });\r\n    }\r\n\r\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n    const handleSocialLogin = async (provider: 'google' | 'facebook') => {\r\n        // setLoading(true); // Removed\r\n        // Redirect to NextAuth social login endpoint if implemented later\r\n        alert(`${provider} login coming soon`);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex min-h-screen w-full flex-col lg:flex-row bg-[#fafafa] dark:bg-[#111827]\">\r\n            {/* Left Panel: Hero Visuals (Hidden on Mobile) */}\r\n            <div className=\"hidden lg:flex w-full lg:w-1/2 bg-[#26d980]/5 items-center justify-center p-12 relative overflow-hidden\">\r\n                <div className=\"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1542838132-92c53300491e?q=80&w=2574&auto=format&fit=crop')] bg-cover bg-center opacity-90 transition-transform duration-[20s] hover:scale-105\"></div>\r\n                <div className=\"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-black/10\"></div>\r\n\r\n                <div className=\"relative z-10 max-w-lg text-white space-y-8 p-8\">\r\n                    <div className=\"flex items-center gap-3 mb-4\">\r\n                        <div className=\"size-12 bg-[#26d980] rounded-2xl flex items-center justify-center text-white shadow-lg shadow-[#26d980]/30 backdrop-blur-md\">\r\n                            <span className=\"material-icons-round text-3xl\">eco</span>\r\n                        </div>\r\n                        <span className=\"text-3xl font-bold tracking-tight\">Daily Fresh</span>\r\n                    </div>\r\n                    <h1 className=\"text-6xl font-extrabold leading-tight tracking-tight drop-shadow-lg\">\r\n                        Fresh groceries,<br />\r\n                        <span className=\"text-[#26d980]\">delivered daily.</span>\r\n                    </h1>\r\n                    <p className=\"text-xl font-medium text-white/90 leading-relaxed max-w-md drop-shadow-md\">\r\n                        Experience the convenience of farm-fresh produce delivered securely to your doorstep within minutes.\r\n                    </p>\r\n\r\n                    {/* Trust Badge */}\r\n                    <div className=\"flex items-center gap-4 pt-4\">\r\n                        <div className=\"flex -space-x-3\">\r\n                            {[1, 2, 3].map((i) => (\r\n                                <div key={i} className={`size-10 rounded-full border-2 border-[#1f2e24] bg-gray-200 bg-[url('https://i.pravatar.cc/100?img=${i + 10}')] bg-cover`}></div>\r\n                            ))}\r\n                        </div>\r\n                        <div className=\"text-sm font-semibold\">\r\n                            <span className=\"text-[#26d980]\">50k+</span> happy customers\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Right Panel: Login Form */}\r\n            <div className=\"flex flex-1 flex-col items-center justify-center px-6 py-12 lg:px-24\">\r\n                <div className=\"w-full max-w-[460px] space-y-8 animate-fade-in-up\">\r\n                    <div className=\"text-center lg:text-left space-y-2\">\r\n                        <h2 className=\"text-3xl md:text-4xl font-bold text-slate-900 dark:text-white tracking-tight\">Welcome back</h2>\r\n                        <p className=\"text-slate-500 dark:text-slate-400 text-base\">Please enter your details to sign in.</p>\r\n                    </div>\r\n\r\n                    {error && (\r\n                        <div className=\"bg-red-50 dark:bg-red-900/10 text-red-600 dark:text-red-400 text-sm font-medium p-4 rounded-xl border border-red-100 dark:border-red-900/20 flex items-center gap-2\">\r\n                            <span className=\"material-icons-round text-lg\">error_outline</span>\r\n                            {error}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Social Login Buttons */}\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <button\r\n                            onClick={() => alert('Google login coming soon')}\r\n                            className=\"flex items-center justify-center gap-2 h-14 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl opacity-60 cursor-not-allowed transition-all\"\r\n                        >\r\n                            <Image src=\"https://www.svgrepo.com/show/475656/google-color.svg\" width={20} height={20} className=\"grayscale\" alt=\"Google\" />\r\n                            <span className=\"font-bold text-slate-500 text-sm\">Coming Soon</span>\r\n                            <span className=\"material-icons-round text-xs text-slate-400\">lock</span>\r\n                        </button>\r\n                        <button\r\n                            onClick={() => alert('Facebook login coming soon')}\r\n                            className=\"flex items-center justify-center gap-2 h-14 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl opacity-60 cursor-not-allowed transition-all\"\r\n                        >\r\n                            <Image src=\"https://www.svgrepo.com/show/475647/facebook-color.svg\" width={20} height={20} className=\"grayscale\" alt=\"Facebook\" />\r\n                            <span className=\"font-bold text-slate-500 text-sm\">Coming Soon</span>\r\n                            <span className=\"material-icons-round text-xs text-slate-400\">lock</span>\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"relative flex items-center py-2\">\r\n                        <div className=\"flex-grow border-t border-slate-200 dark:border-slate-800\"></div>\r\n                        <span className=\"flex-shrink mx-4 text-xs font-bold text-slate-400 uppercase tracking-widest\">or continue with email</span>\r\n                        <div className=\"flex-grow border-t border-slate-200 dark:border-slate-800\"></div>\r\n                    </div>\r\n\r\n                    <form className=\"space-y-6\" onSubmit={handleLogin}>\r\n                        <div className=\"space-y-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-sm font-bold text-slate-900 dark:text-white ml-1\">Email Address</label>\r\n                                <input\r\n                                    value={email}\r\n                                    onChange={(e) => setEmail(e.target.value)}\r\n                                    className=\"w-full h-14 px-5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800/50 text-slate-900 dark:text-white placeholder:text-slate-400 font-medium focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all outline-none\"\r\n                                    placeholder=\"name@example.com\"\r\n                                    type=\"email\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <div className=\"flex justify-between items-center px-1\">\r\n                                    <label className=\"text-sm font-bold text-slate-900 dark:text-white\">Password</label>\r\n                                    <Link className=\"text-primary hover:text-primary-dark text-sm font-bold hover:underline\" href=\"/forgot-password\">Forgot Password?</Link>\r\n                                </div>\r\n                                <input\r\n                                    value={password}\r\n                                    onChange={(e) => setPassword(e.target.value)}\r\n                                    className=\"w-full h-14 px-5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800/50 text-slate-900 dark:text-white placeholder:text-slate-400 font-medium focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all outline-none\"\r\n                                    placeholder=\"••••••••\"\r\n                                    type=\"password\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"flex items-center gap-3 px-1\">\r\n                            <div className=\"relative flex items-center\">\r\n                                <input\r\n                                    className=\"peer size-5 cursor-pointer appearance-none rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 checked:bg-primary checked:border-primary focus:ring-4 focus:ring-primary/20 transition-all\"\r\n                                    id=\"remember\"\r\n                                    type=\"checkbox\"\r\n                                />\r\n                                <span className=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none opacity-0 peer-checked:opacity-100 text-white transform scale-50 peer-checked:scale-100 transition-all material-icons-round text-sm font-bold\">check</span>\r\n                            </div>\r\n                            <label className=\"text-sm font-semibold text-slate-600 dark:text-slate-400 cursor-pointer select-none\" htmlFor=\"remember\">Remember me for 30 days</label>\r\n                        </div>\r\n\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={isPending}\r\n                            className=\"w-full h-14 bg-primary hover:bg-primary-dark text-white font-bold text-lg rounded-xl shadow-xl shadow-primary/20 hover:shadow-primary/40 hover:-translate-y-0.5 active:translate-y-0 active:scale-[0.98] transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed disabled:transform-none\"\r\n                        >\r\n                            {isPending ? (\r\n                                <>\r\n                                    <span className=\"size-5 border-2 border-white/20 border-t-white rounded-full animate-spin\"></span>\r\n                                    <span>Signing In...</span>\r\n                                </>\r\n                            ) : (\r\n                                <span>Sign In to Account</span>\r\n                            )}\r\n                        </button>\r\n                    </form>\r\n\r\n                    <div className=\"text-center pt-2\">\r\n                        <p className=\"text-slate-500 dark:text-slate-400 font-medium\">\r\n                            Don&apos;t have an account?\r\n                            <Link className=\"text-primary font-bold hover:text-primary-dark hover:underline ml-1 transition-colors\" href=\"/signup\">Sign up for free</Link>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\orders\\[id]\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\privacy\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\profile\\addresses\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\profile\\orders\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\profile\\page.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":123,"column":33,"nodeType":"JSXOpeningElement","endLine":123,"endColumn":129}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport Link from 'next/link';\r\nimport { useEffect, useState } from 'react';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useWishlist } from '@/context/WishlistContext';\r\nimport { getUserOrders } from '@/lib/api';\r\nimport { ProfileSidebar } from '@/components/profile/ProfileSidebar';\r\nimport { ProfileStats } from '@/components/profile/ProfileStats';\r\nimport { RecentOrders } from '@/components/profile/RecentOrders';\r\nimport { QuickActions } from '@/components/profile/QuickActions';\r\nimport { AddressCard } from '@/components/profile/AddressCard';\r\nimport { MembershipCard } from '@/components/profile/MembershipCard';\r\nimport { ProfileEditModal } from '@/components/profile/ProfileEditModal';\r\n\r\nexport default function ProfilePage() {\r\n    const { user, loading: authLoading } = useAuth();\r\n    const { wishlistIds } = useWishlist();\r\n    const [loading, setLoading] = useState(true);\r\n    const [orders, setOrders] = useState<any[]>([]);\r\n    const [isEditModalOpen, setIsEditModalOpen] = useState(false);\r\n\r\n    // Stats State\r\n    const [stats, setStats] = useState({\r\n        pendingOrders: 0,\r\n        savedItems: 0,\r\n        completedOrders: 0,\r\n        totalSpent: 0\r\n    });\r\n\r\n    // Update stats when wishlistIds changes\r\n    useEffect(() => {\r\n        setStats(prev => ({\r\n            ...prev,\r\n            savedItems: wishlistIds.length\r\n        }));\r\n    }, [wishlistIds]);\r\n\r\n    useEffect(() => {\r\n        const fetchDashboardData = async () => {\r\n            try {\r\n                setLoading(true);\r\n\r\n                // Fetch Orders\r\n                const allOrders = await getUserOrders(user!.id);\r\n                const recentOrders = allOrders.slice(0, 5);\r\n\r\n                setStats(prev => ({\r\n                    ...prev,\r\n                    // savedItems is handled by effect above\r\n                    activeOrders: allOrders.filter((o: any) => ['processing', 'on_delivery'].includes(o.status?.toLowerCase())).length,\r\n                    pendingOrders: allOrders.filter((o: any) => o.status?.toLowerCase() === 'pending').length,\r\n                    completedOrders: allOrders.filter((o: any) => o.status?.toLowerCase() === 'delivered').length,\r\n                    totalSpent: allOrders\r\n                        .filter((o: any) => o.status?.toLowerCase() === 'delivered')\r\n                        .reduce((sum: number, o: any) => sum + Number(o.total_amount || 0), 0)\r\n                }));\r\n\r\n                setOrders(recentOrders);\r\n\r\n            } catch (error) {\r\n                console.error('Error loading dashboard data!', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        if (user) {\r\n            fetchDashboardData();\r\n        }\r\n    }, [user]);\r\n\r\n    if (authLoading) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center bg-background-light dark:bg-background-dark\">\r\n                <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!user) {\r\n        return (\r\n            <div className=\"min-h-screen flex flex-col items-center justify-center bg-slate-50 dark:bg-[#0d1b17] p-4 text-center\">\r\n                <div className=\"bg-white dark:bg-[#10221c] p-8 rounded-3xl shadow-xl max-w-md w-full border border-slate-100 dark:border-[#1e3a31]\">\r\n                    <div className=\"w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6\">\r\n                        <span className=\"material-icons-round text-4xl text-primary\">person</span>\r\n                    </div>\r\n                    <h1 className=\"text-2xl font-bold text-slate-900 dark:text-white mb-2\">Login Required</h1>\r\n                    <p className=\"text-slate-500 dark:text-slate-400 mb-8\">\r\n                        Please login to view your profile and manage your orders.\r\n                    </p>\r\n                    <Link href=\"/login\" replace className=\"block w-full py-4 rounded-xl bg-primary text-white font-bold text-lg hover:bg-primary/90 transition-all shadow-lg shadow-primary/20\">\r\n                        Login / Signup\r\n                    </Link>\r\n                    <div className=\"mt-4\">\r\n                        <Link href=\"/\" className=\"text-sm font-medium text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300\">\r\n                            Back to Shopping\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center bg-background-light dark:bg-background-dark\">\r\n                <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex justify-center bg-background-light dark:bg-background-dark min-h-screen\">\r\n            <div className=\"flex w-full max-w-7xl\">\r\n                <ProfileSidebar activeTab=\"overview\" onEditProfile={() => setIsEditModalOpen(true)} />\r\n\r\n                <main className=\"flex flex-col flex-1 p-4 md:p-8 w-full\">\r\n                    {/* Mobile Header (Hidden on Desktop) */}\r\n                    <div className=\"lg:hidden flex items-center gap-4 mb-8 bg-white dark:bg-[#10221c] p-4 rounded-2xl border border-slate-100 dark:border-[#1e3a31] shadow-sm\">\r\n                        <div className=\"w-16 h-16 rounded-full bg-slate-100 dark:bg-slate-800 flex-shrink-0 overflow-hidden border-2 border-primary\">\r\n                            {user?.user_metadata?.avatar_url ? (\r\n                                <img src={user.user_metadata.avatar_url} alt=\"Profile\" className=\"w-full h-full object-cover\" />\r\n                            ) : (\r\n                                <div className=\"w-full h-full flex items-center justify-center\">\r\n                                    <span className=\"material-icons-round text-slate-400 text-2xl\">person</span>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                            <h2 className=\"text-lg font-bold text-slate-900 dark:text-white truncate\">\r\n                                {user?.user_metadata?.full_name || 'User'}\r\n                            </h2>\r\n                            <p className=\"text-primary text-xs font-semibold uppercase tracking-wider\">Prime Member</p>\r\n                        </div>\r\n                        <button\r\n                            onClick={() => setIsEditModalOpen(true)}\r\n                            className=\"p-2 rounded-xl bg-slate-50 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-primary hover:text-white transition-colors\"\r\n                        >\r\n                            <span className=\"material-icons-round\">edit</span>\r\n                        </button>\r\n                    </div>\r\n\r\n                    {/* PageHeading */}\r\n                    <div className=\"flex flex-wrap justify-between items-end gap-4 mb-8\">\r\n                        <div className=\"flex flex-col gap-2\">\r\n\r\n                            <p className=\"text-[#0d1b17] dark:text-white text-3xl md:text-4xl font-black tracking-tight\">Profile Overview</p>\r\n                            <p className=\"text-[#4c9a80] text-base font-normal\">\r\n                                Welcome back, {user?.user_metadata?.full_name?.split(' ')[0] || 'User'}! Here's what's happening with your groceries today.\r\n                            </p>\r\n                        </div>\r\n                        <div className=\"text-[#4c9a80] text-sm font-medium bg-white dark:bg-[#10221c] px-4 py-2 rounded-lg border border-[#cfe7df] dark:border-[#1e3a31]\">\r\n                            Today is {new Date().toLocaleDateString('en-US', { month: 'long', day: 'numeric', year: 'numeric' })}\r\n                        </div>\r\n                    </div>\r\n\r\n                    <ProfileStats stats={stats} />\r\n\r\n                    <div className=\"grid grid-cols-1 xl:grid-cols-3 gap-8\">\r\n                        {/* Left Column */}\r\n                        <div className=\"xl:col-span-2 space-y-8\">\r\n                            <RecentOrders orders={orders} />\r\n                            <QuickActions />\r\n                        </div>\r\n\r\n                        {/* Right Column */}\r\n                        <div className=\"flex flex-col gap-6\">\r\n                            <AddressCard />\r\n                            <MembershipCard />\r\n                        </div>\r\n                    </div>\r\n                </main>\r\n            </div>\r\n\r\n            <ProfileEditModal isOpen={isEditModalOpen} onClose={() => setIsEditModalOpen(false)} />\r\n        </div>\r\n    );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\profile\\wishlist\\page.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'supabase'. Either include it or remove the dependency array.","line":67,"column":8,"nodeType":"ArrayExpression","endLine":67,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [supabase, user]","fix":{"range":[2490,2496],"text":"[supabase, user]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useEffect, useState } from 'react';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useWishlist } from '@/context/WishlistContext';\r\nimport { createClient } from '@/lib/supabase/client';\r\nimport Link from 'next/link';\r\nimport { ProfileSidebar } from '@/components/profile/ProfileSidebar';\r\nimport { ProductCard } from '@/components/product/ProductCard';\r\n\r\nexport default function WishlistPage() {\r\n    const { user, loading: authLoading } = useAuth();\r\n    const supabase = createClient();\r\n    const { wishlistIds } = useWishlist();\r\n    const [wishlistItems, setWishlistItems] = useState<any[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const fetchWishlist = async () => {\r\n            try {\r\n                setLoading(true);\r\n\r\n                // Step 1: Fetch Wishlist IDs\r\n                const { data: fullWishlistData, error: fullError } = await supabase\r\n                    .from('wishlists')\r\n                    .select('id, product_id, created_at')\r\n                    .eq('user_id', user?.id)\r\n                    .order('created_at', { ascending: false });\r\n\r\n                if (fullError) throw fullError;\r\n\r\n                if (fullWishlistData.length === 0) {\r\n                    setWishlistItems([]);\r\n                    setLoading(false);\r\n                    return;\r\n                }\r\n\r\n                const ids = fullWishlistData.map((w: any) => w.product_id);\r\n\r\n                // Step 2: Fetch Products details\r\n                const { data: productsDetails, error: pError } = await supabase\r\n                    .from('products')\r\n                    .select('*')\r\n                    .in('id', ids);\r\n\r\n                if (pError) throw pError;\r\n\r\n                const items = fullWishlistData.map((w: any) => {\r\n                    const product = productsDetails?.find((p: any) => p.id === w.product_id);\r\n                    return {\r\n                        id: w.id, // Wishlist Record ID\r\n                        product: product ? { ...product, image: product.image_url } : null\r\n                    };\r\n                }).filter((item: any) => item.product);\r\n\r\n                setWishlistItems(items);\r\n            } catch (error) {\r\n                console.error('Error loading wishlist!', error);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        if (user) {\r\n            fetchWishlist();\r\n        }\r\n    }, [user]);\r\n\r\n    if (authLoading) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center bg-background-light dark:bg-background-dark\">\r\n                <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (!user) {\r\n        return (\r\n            <div className=\"min-h-screen flex flex-col items-center justify-center bg-slate-50 dark:bg-[#0d1b17] p-4 text-center\">\r\n                <div className=\"bg-white dark:bg-[#10221c] p-8 rounded-3xl shadow-xl max-w-md w-full border border-slate-100 dark:border-[#1e3a31]\">\r\n                    <div className=\"w-20 h-20 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-6\">\r\n                        <span className=\"material-icons-round text-4xl text-primary\">lock_person</span>\r\n                    </div>\r\n                    <h1 className=\"text-2xl font-bold text-slate-900 dark:text-white mb-2\">Login Required</h1>\r\n                    <p className=\"text-slate-500 dark:text-slate-400 mb-8\">\r\n                        Please login to access your wishlist and save your favorite items for later.\r\n                    </p>\r\n                    <Link href=\"/login\" replace className=\"block w-full py-4 rounded-xl bg-primary text-white font-bold text-lg hover:bg-primary/90 transition-all shadow-lg shadow-primary/20\">\r\n                        Login / Signup\r\n                    </Link>\r\n                    <div className=\"mt-4\">\r\n                        <Link href=\"/\" className=\"text-sm font-medium text-slate-500 hover:text-slate-700 dark:text-slate-400 dark:hover:text-slate-300\">\r\n                            Back to Shopping\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center bg-background-light dark:bg-background-dark\">\r\n                <div className=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    // Filter items based on the context's wishlistIds (which are updated optimistically)\r\n    // This allows immediate removal from UI without waiting for re-fetch\r\n    const displayedItems = wishlistItems.filter(item => wishlistIds.includes(item.product.id));\r\n\r\n    return (\r\n        <div className=\"flex justify-center bg-background-light dark:bg-background-dark min-h-screen\">\r\n            <div className=\"flex w-full max-w-[1280px]\">\r\n                <ProfileSidebar activeTab=\"wishlist\" />\r\n\r\n                <main className=\"flex flex-col flex-1 p-4 md:p-8\">\r\n                    {/* Header */}\r\n                    <div className=\"mb-8\">\r\n\r\n                        <h1 className=\"text-[#0d1b17] dark:text-white text-3xl font-black tracking-tight\">My Wishlist</h1>\r\n                        <p className=\"text-[#4c9a80] text-base font-normal mt-1\">\r\n                            Save items you love to buy them later.\r\n                        </p>\r\n                    </div>\r\n\r\n                    {displayedItems.length === 0 ? (\r\n                        <div className=\"p-12 text-center text-slate-500 bg-white dark:bg-[#10221c] rounded-3xl border border-[#cfe7df] dark:border-[#1e3a31]\">\r\n                            <span className=\"material-icons-round text-6xl text-slate-300 dark:text-slate-600 mb-4\">favorite_border</span>\r\n                            <h3 className=\"text-xl font-bold text-slate-900 dark:text-white mb-2\">Your wishlist is empty</h3>\r\n                            <p className=\"text-slate-500 dark:text-slate-400 mb-6\">Explore our products and find something you like!</p>\r\n                            <Link href=\"/\" className=\"inline-flex items-center justify-center px-6 py-3 rounded-xl bg-primary text-white font-bold hover:bg-primary/90 transition-all\">\r\n                                Start Shopping\r\n                            </Link>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                            {displayedItems.map((item) => (\r\n                                <ProductCard key={item.id} product={item.product} variant=\"wishlist\" />\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </main>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\signup\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useTransition' is defined but never used.","line":3,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":40,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useTransition"},"fix":{"range":[41,56],"text":""},"desc":"Remove unused variable \"useTransition\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { useState, useTransition } from 'react';\r\nimport Link from 'next/link';\r\nimport { createClient } from '@/lib/supabase/client';\r\nimport { useRouter } from 'next/navigation';\r\nimport Image from 'next/image';\r\n\r\nexport default function SignupPage() {\r\n    const router = useRouter();\r\n    // ...\r\n    const [fullName, setFullName] = useState('');\r\n    const [email, setEmail] = useState('');\r\n    const [phone, setPhone] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [confirmPassword, setConfirmPassword] = useState('');\r\n    // const [loading, setLoading] = useState(false); // Removed\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n\r\n\r\n    // ... inside component\r\n\r\n    const [isPending, startTransition] = React.useTransition();\r\n\r\n\r\n    const handleSignup = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setError(null);\r\n\r\n        const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n        if (!emailRegex.test(email)) {\r\n            setError(\"Please enter a valid email address.\");\r\n            return;\r\n        }\r\n\r\n        if (password !== confirmPassword) {\r\n            setError(\"Passwords do not match\");\r\n            return;\r\n        }\r\n\r\n        const cleanPhone = phone.replace(/\\D/g, '');\r\n        if (cleanPhone.length !== 11 || !cleanPhone.startsWith('01')) {\r\n            setError(\"Please enter a valid 11-digit mobile number (e.g. 01712345678)\");\r\n            return;\r\n        }\r\n        const formattedPhone = `+88${cleanPhone}`;\r\n\r\n        startTransition(async () => {\r\n            const supabase = createClient();\r\n\r\n            // Check if email already exists in public.User table\r\n            const { data: existingUser } = await supabase\r\n                .from('User')\r\n                .select('email, role')\r\n                .eq('email', email)\r\n                .single();\r\n\r\n            if (existingUser) {\r\n                if (existingUser.role === 'MERCHANT' || existingUser.role === 'SUPERADMIN') {\r\n                    setError('This email is already registered as a merchant or admin account. Please use a different email.');\r\n                } else {\r\n                    setError('This email is already registered. Please login instead.');\r\n                }\r\n                return;\r\n            }\r\n\r\n            const { data, error: signUpError } = await supabase.auth.signUp({\r\n                email,\r\n                password,\r\n                options: {\r\n                    data: {\r\n                        full_name: fullName,\r\n                        phone: formattedPhone,\r\n                        role: 'CUSTOMER',\r\n                    }\r\n                }\r\n            });\r\n\r\n            if (signUpError) {\r\n                setError(signUpError.message);\r\n                return;\r\n            }\r\n\r\n            if (data?.user) {\r\n                alert('Registration successful! Check your email for confirmation or log in.');\r\n                router.push('/login');\r\n            }\r\n        });\r\n    };\r\n\r\n\r\n\r\n    return (\r\n        <div className=\"flex min-h-screen w-full flex-col lg:flex-row bg-[#fafafa] dark:bg-[#111827]\">\r\n            {/* Left Panel: Hero Visuals (Hidden on Mobile) */}\r\n            <div className=\"hidden lg:flex w-full lg:w-5/12 bg-primary/5 items-center justify-center p-12 relative overflow-hidden\">\r\n                <div className=\"absolute inset-0 bg-[url('https://images.unsplash.com/photo-1595855709915-3931ec628fb6?q=80&w=2574&auto=format&fit=crop')] bg-cover bg-center opacity-90 transition-transform duration-[20s] hover:scale-105\"></div>\r\n                <div className=\"absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-black/20\"></div>\r\n\r\n                <div className=\"relative z-10 w-full max-w-lg text-white space-y-8\">\r\n                    <div className=\"flex items-center gap-3 mb-8\">\r\n                        <div className=\"size-12 bg-primary rounded-2xl flex items-center justify-center text-white shadow-lg shadow-primary/30 backdrop-blur-md\">\r\n                            <span className=\"material-icons-round text-3xl\">eco</span>\r\n                        </div>\r\n                        <span className=\"text-3xl font-bold tracking-tight\">Daily Fresh</span>\r\n                    </div>\r\n\r\n                    <h1 className=\"text-5xl font-extrabold leading-tight tracking-tight drop-shadow-lg\">\r\n                        Eat fresh,<br />\r\n                        <span className=\"text-primary\">live healthy.</span>\r\n                    </h1>\r\n                    <p className=\"text-lg text-white/80 leading-relaxed max-w-md drop-shadow-md\">\r\n                        Join over 50,000 households enjoying farm-fresh produce delivered daily. Start your journey to better eating today.\r\n                    </p>\r\n\r\n                    <div className=\"grid grid-cols-2 gap-6 pt-8\">\r\n                        <div className=\"bg-white/10 backdrop-blur-md p-4 rounded-xl border border-white/10\">\r\n                            <span className=\"material-icons-round text-primary text-2xl mb-2\">verified_user</span>\r\n                            <p className=\"font-bold text-sm\">Quality<br />Guaranteed</p>\r\n                        </div>\r\n                        <div className=\"bg-white/10 backdrop-blur-md p-4 rounded-xl border border-white/10\">\r\n                            <span className=\"material-icons-round text-primary text-2xl mb-2\">schedule</span>\r\n                            <p className=\"font-bold text-sm\">60-Min<br />Delivery</p>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Right Panel: Signup Form */}\r\n            <div className=\"flex flex-1 flex-col items-center justify-center px-6 py-12 lg:px-24 overflow-y-auto\">\r\n                <div className=\"w-full max-w-[480px] space-y-8 animate-fade-in-up\">\r\n                    <div className=\"text-center lg:text-left space-y-2\">\r\n                        <h2 className=\"text-3xl md:text-4xl font-bold text-slate-900 dark:text-white tracking-tight\">Create Account</h2>\r\n                        <p className=\"text-slate-500 dark:text-slate-400 text-base\">Sign up to get started with Daily Fresh.</p>\r\n                    </div>\r\n\r\n                    {error && (\r\n                        <div className=\"bg-red-50 dark:bg-red-900/10 text-red-600 dark:text-red-400 text-sm font-medium p-4 rounded-xl border border-red-100 dark:border-red-900/20 flex items-center gap-2\">\r\n                            <span className=\"material-icons-round text-lg\">error_outline</span>\r\n                            {error}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Social Login Buttons */}\r\n                    <div className=\"grid grid-cols-2 gap-4\">\r\n                        <button\r\n                            onClick={() => alert('Google login coming soon')}\r\n                            className=\"flex items-center justify-center gap-2 h-14 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl opacity-60 cursor-not-allowed transition-all\"\r\n                        >\r\n                            <Image src=\"https://www.svgrepo.com/show/475656/google-color.svg\" width={20} height={20} className=\"grayscale\" alt=\"Google\" />\r\n                            <span className=\"font-bold text-slate-500 text-sm\">Coming Soon</span>\r\n                            <span className=\"material-icons-round text-xs text-slate-400\">lock</span>\r\n                        </button>\r\n                        <button\r\n                            onClick={() => alert('Facebook login coming soon')}\r\n                            className=\"flex items-center justify-center gap-2 h-14 bg-slate-50 dark:bg-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl opacity-60 cursor-not-allowed transition-all\"\r\n                        >\r\n                            <Image src=\"https://www.svgrepo.com/show/475647/facebook-color.svg\" width={20} height={20} className=\"grayscale\" alt=\"Facebook\" />\r\n                            <span className=\"font-bold text-slate-500 text-sm\">Coming Soon</span>\r\n                            <span className=\"material-icons-round text-xs text-slate-400\">lock</span>\r\n                        </button>\r\n                    </div>\r\n\r\n                    <div className=\"relative flex items-center py-2\">\r\n                        <div className=\"flex-grow border-t border-slate-200 dark:border-slate-800\"></div>\r\n                        <span className=\"flex-shrink mx-4 text-xs font-bold text-slate-400 uppercase tracking-widest\">or sign up with email</span>\r\n                        <div className=\"flex-grow border-t border-slate-200 dark:border-slate-800\"></div>\r\n                    </div>\r\n\r\n                    <form className=\"space-y-5\" onSubmit={handleSignup}>\r\n                        {/* Full Name */}\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-bold text-slate-900 dark:text-white ml-1\">Full Name</label>\r\n                            <input\r\n                                value={fullName}\r\n                                onChange={(e) => setFullName(e.target.value)}\r\n                                className=\"w-full h-14 px-5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800/50 text-slate-900 dark:text-white placeholder:text-slate-400 font-medium focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all outline-none\"\r\n                                placeholder=\"Jane Doe\"\r\n                                type=\"text\"\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Email */}\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-bold text-slate-900 dark:text-white ml-1\">Email Address</label>\r\n                            <input\r\n                                value={email}\r\n                                onChange={(e) => setEmail(e.target.value)}\r\n                                className=\"w-full h-14 px-5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800/50 text-slate-900 dark:text-white placeholder:text-slate-400 font-medium focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all outline-none\"\r\n                                placeholder=\"name@example.com\"\r\n                                type=\"email\"\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Phone */}\r\n                        <div className=\"space-y-2\">\r\n                            <label className=\"text-sm font-bold text-slate-900 dark:text-white ml-1\">Phone Number</label>\r\n                            <div className=\"flex w-full h-14 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800/50 focus-within:border-primary focus-within:ring-4 focus-within:ring-primary/10 transition-all overflow-hidden\">\r\n                                <div className=\"flex items-center justify-center px-4 bg-slate-50 dark:bg-slate-700/50 border-r border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-300 font-bold select-none\">\r\n                                    <span className=\"mr-2 text-xl\">🇧🇩</span>\r\n                                    <span>+88</span>\r\n                                </div>\r\n                                <input\r\n                                    value={phone}\r\n                                    onChange={(e) => {\r\n                                        const val = e.target.value.replace(/\\D/g, '');\r\n                                        if (val.length <= 11) setPhone(val);\r\n                                    }}\r\n                                    className=\"flex-1 px-5 bg-transparent text-slate-900 dark:text-white placeholder:text-slate-400 font-medium outline-none\"\r\n                                    placeholder=\"01712345678\"\r\n                                    type=\"tel\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Password Grid */}\r\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-sm font-bold text-slate-900 dark:text-white ml-1\">Password</label>\r\n                                <input\r\n                                    value={password}\r\n                                    onChange={(e) => setPassword(e.target.value)}\r\n                                    className=\"w-full h-14 px-5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800/50 text-slate-900 dark:text-white placeholder:text-slate-400 font-medium focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all outline-none\"\r\n                                    placeholder=\"••••••••\"\r\n                                    type=\"password\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div className=\"space-y-2\">\r\n                                <label className=\"text-sm font-bold text-slate-900 dark:text-white ml-1\">Confirm</label>\r\n                                <input\r\n                                    value={confirmPassword}\r\n                                    onChange={(e) => setConfirmPassword(e.target.value)}\r\n                                    className=\"w-full h-14 px-5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800/50 text-slate-900 dark:text-white placeholder:text-slate-400 font-medium focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all outline-none\"\r\n                                    placeholder=\"••••••••\"\r\n                                    type=\"password\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Terms */}\r\n                        <div className=\"flex items-start gap-3 py-2\">\r\n                            <div className=\"relative flex items-center mt-1\">\r\n                                <input\r\n                                    className=\"peer size-5 cursor-pointer appearance-none rounded border border-slate-300 dark:border-slate-600 bg-white dark:bg-slate-800 checked:bg-primary checked:border-primary focus:ring-4 focus:ring-primary/20 transition-all\"\r\n                                    id=\"terms\"\r\n                                    type=\"checkbox\"\r\n                                    required\r\n                                />\r\n                                <span className=\"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 pointer-events-none opacity-0 peer-checked:opacity-100 text-white transform scale-50 peer-checked:scale-100 transition-all material-icons-round text-sm font-bold\">check</span>\r\n                            </div>\r\n                            <label className=\"text-sm leading-relaxed text-slate-500 dark:text-slate-400\" htmlFor=\"terms\">\r\n                                I agree to the <Link className=\"text-primary font-bold hover:underline\" href=\"/terms\">Terms and Conditions</Link> and <Link className=\"text-primary font-bold hover:underline\" href=\"/privacy\">Privacy Policy</Link>.\r\n                            </label>\r\n                        </div>\r\n\r\n                        <button\r\n                            type=\"submit\"\r\n                            disabled={isPending}\r\n                            className=\"w-full h-14 bg-primary hover:bg-primary-dark text-white font-bold text-lg rounded-xl shadow-xl shadow-primary/20 hover:shadow-primary/40 hover:-translate-y-0.5 active:translate-y-0 active:scale-[0.98] transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed disabled:transform-none\"\r\n                        >\r\n                            {isPending ? (\r\n                                <>\r\n                                    <span className=\"size-5 border-2 border-white/20 border-t-white rounded-full animate-spin\"></span>\r\n                                    <span>Creating Account...</span>\r\n                                </>\r\n                            ) : (\r\n                                <span>Create Account</span>\r\n                            )}\r\n                        </button>\r\n                    </form>\r\n\r\n                    <div className=\"text-center pt-4 border-t border-slate-200 dark:border-slate-700/50 mt-8\">\r\n                        <p className=\"text-slate-500 dark:text-slate-400 font-medium\">\r\n                            Already have an account?\r\n                            <Link className=\"text-primary font-bold hover:text-primary-dark hover:underline ml-1 transition-colors\" href=\"/login\">Log In</Link>\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\terms\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\app\\update-password\\page.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'supabase.auth'. Either include it or remove the dependency array.","line":23,"column":8,"nodeType":"ArrayExpression","endLine":23,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [supabase.auth]","fix":{"range":[940,942],"text":"[supabase.auth]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { useState, useEffect } from 'react';\r\nimport { createClient } from '@/lib/supabase/client';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nexport default function UpdatePasswordPage() {\r\n    const supabase = createClient();\r\n    const router = useRouter();\r\n    const [password, setPassword] = useState('');\r\n    const [confirmPassword, setConfirmPassword] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    // Ensure we have a session (user clicked the email link)\r\n    useEffect(() => {\r\n        supabase.auth.getSession().then(({ data: { session } }) => {\r\n            if (!session) {\r\n                // If no session, they might have accessed this page directly without the link\r\n                setError(\"Invalid or expired session. Please request a new password reset link.\");\r\n            }\r\n        });\r\n    }, []);\r\n\r\n    const handleUpdate = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setError(null);\r\n\r\n        if (password !== confirmPassword) {\r\n            setError(\"Passwords do not match\");\r\n            setLoading(false);\r\n            return;\r\n        }\r\n\r\n        const { error } = await supabase.auth.updateUser({\r\n            password: password\r\n        });\r\n\r\n        if (error) {\r\n            setError(error.message);\r\n            setLoading(false);\r\n        } else {\r\n            alert(\"Password updated successfully!\");\r\n            router.push('/'); // Redirect to home/login\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex min-h-screen bg-[#fafafa] dark:bg-[#111827] items-center justify-center p-6\">\r\n            <div className=\"w-full max-w-md bg-white dark:bg-[#10221c] p-8 rounded-2xl shadow-xl border border-slate-100 dark:border-[#1e3a31] animate-fade-in-up\">\r\n\r\n                <div className=\"text-center mb-8\">\r\n                    <div className=\"size-16 bg-primary/10 rounded-2xl flex items-center justify-center mx-auto mb-4 text-primary\">\r\n                        <span className=\"material-icons-round text-4xl\">key</span>\r\n                    </div>\r\n                    <h1 className=\"text-2xl font-bold text-slate-900 dark:text-white mb-2\">Set New Password</h1>\r\n                    <p className=\"text-slate-500 dark:text-slate-400 text-sm\">\r\n                        Create a strong password that you haven't used before.\r\n                    </p>\r\n                </div>\r\n\r\n                {error && (\r\n                    <div className=\"mb-6 bg-red-50 dark:bg-red-900/10 text-red-600 dark:text-red-400 text-sm font-medium p-4 rounded-xl border border-red-100 dark:border-red-900/20 flex items-center gap-2\">\r\n                        <span className=\"material-icons-round text-lg\">error_outline</span>\r\n                        {error}\r\n                    </div>\r\n                )}\r\n\r\n                <form onSubmit={handleUpdate} className=\"space-y-6\">\r\n                    <div className=\"space-y-2\">\r\n                        <label className=\"text-sm font-bold text-slate-900 dark:text-white ml-1\">New Password</label>\r\n                        <input\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                            className=\"w-full h-14 px-5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800/50 text-slate-900 dark:text-white placeholder:text-slate-400 font-medium focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all outline-none\"\r\n                            placeholder=\"••••••••\"\r\n                            type=\"password\"\r\n                            required\r\n                        />\r\n                    </div>\r\n                    <div className=\"space-y-2\">\r\n                        <label className=\"text-sm font-bold text-slate-900 dark:text-white ml-1\">Confirm New Password</label>\r\n                        <input\r\n                            value={confirmPassword}\r\n                            onChange={(e) => setConfirmPassword(e.target.value)}\r\n                            className=\"w-full h-14 px-5 rounded-xl border border-slate-200 dark:border-slate-700 bg-white dark:bg-slate-800/50 text-slate-900 dark:text-white placeholder:text-slate-400 font-medium focus:border-primary focus:ring-4 focus:ring-primary/10 transition-all outline-none\"\r\n                            placeholder=\"••••••••\"\r\n                            type=\"password\"\r\n                            required\r\n                        />\r\n                    </div>\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        className=\"w-full h-14 bg-primary hover:bg-primary-dark text-white font-bold text-lg rounded-xl shadow-xl shadow-primary/20 hover:shadow-primary/40 hover:-translate-y-0.5 active:translate-y-0 active:scale-[0.98] transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed disabled:transform-none\"\r\n                    >\r\n                        {loading ? 'Updating...' : 'Update Password'}\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\ScrollReset.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\ThemeTransition.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\cart\\CartItem.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":36,"column":29,"nodeType":"JSXOpeningElement","endLine":40,"endColumn":31}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useCart, CartItem as CartItemType } from '@/context/CartContext';\r\nimport { formatPrice } from '@/lib/format';\r\nimport Link from 'next/link';\r\n\r\ninterface CartItemProps {\r\n    item: CartItemType;\r\n}\r\n\r\nexport function CartItem({ item }: CartItemProps) {\r\n    const { updateQuantity, removeItem } = useCart();\r\n\r\n    // Map category to color roughly matching the HTML example logic\r\n    const categoryColor =\r\n        item.category === 'Organic' ? 'text-primary' :\r\n            item.category === 'Dairy' ? 'text-blue-500' :\r\n                item.category === 'Bakery' ? 'text-orange-500' : 'text-gray-500';\r\n\r\n    return (\r\n        <div className=\"bg-white dark:bg-slate-800 rounded-xl p-4 md:p-5 shadow-[0_4px_20px_-2px_rgba(0,0,0,0.05)] border border-slate-100 dark:border-slate-700 flex flex-col md:flex-row items-start md:items-center gap-4 md:gap-6 group transition-all hover:border-primary/20 relative\">\r\n\r\n            {/* Remove Button Mobile (Absolute Top Right) */}\r\n            <button\r\n                onClick={() => removeItem(item.id)}\r\n                className=\"absolute top-4 right-4 p-1 text-slate-300 hover:text-red-500 md:hidden\"\r\n            >\r\n                <span className=\"material-icons-round text-lg\">close</span>\r\n            </button>\r\n\r\n            <div className=\"flex items-center gap-4 w-full md:w-auto\">\r\n                {/* Image */}\r\n                <div className=\"w-20 h-20 md:w-24 md:h-24 rounded-lg bg-slate-50 dark:bg-slate-700 overflow-hidden flex-shrink-0 border border-slate-100 dark:border-slate-600 flex items-center justify-center\">\r\n                    <Link href={`/product/${item.id}`} className=\"w-full h-full block relative\">\r\n                        {item.images && item.images.length > 0 ? (\r\n                            <img\r\n                                className=\"w-full h-full object-contain group-hover:scale-105 transition-transform duration-500\"\r\n                                alt={item.name}\r\n                                src={item.images[0]}\r\n                            />\r\n                        ) : (\r\n                            <div className=\"w-full h-full flex items-center justify-center bg-slate-100 dark:bg-slate-800 text-slate-300\">\r\n                                <span className=\"material-icons-round text-3xl\">image_not_supported</span>\r\n                            </div>\r\n                        )}\r\n                    </Link>\r\n                </div>\r\n\r\n                {/* Info (Mobile & Desktop) */}\r\n                <div className=\"flex flex-1 flex-col gap-1 pr-8 md:pr-0\">\r\n                    {item.category && (\r\n                        <span className={`text-[10px] md:text-xs font-bold ${categoryColor} uppercase tracking-wider`}>{item.category}</span>\r\n                    )}\r\n                    <Link href={`/product/${item.id}`}>\r\n                        <h3 className=\"text-base md:text-lg font-bold text-slate-900 dark:text-white line-clamp-2 md:line-clamp-1 hover:text-primary transition-colors leading-tight\">{item.name}</h3>\r\n                    </Link>\r\n                    {item.pack && <p className=\"text-xs md:text-sm text-slate-500 dark:text-slate-400\">{item.pack}</p>}\r\n                </div>\r\n            </div>\r\n\r\n            {/* Controls & Price Wrapper */}\r\n            <div className=\"flex items-center justify-between w-full md:w-auto md:flex-1 md:justify-end gap-6\">\r\n                {/* Quantity Controls */}\r\n                <div className=\"flex items-center bg-slate-100 dark:bg-slate-900 rounded-lg p-1 border border-slate-200 dark:border-slate-700\">\r\n                    <button\r\n                        onClick={() => updateQuantity(item.id, -1)}\r\n                        className=\"w-8 h-8 flex items-center justify-center rounded-md hover:bg-white dark:hover:bg-slate-700 transition-all text-slate-500 dark:text-slate-400\"\r\n                    >\r\n                        <span className=\"material-icons-round text-sm\">remove</span>\r\n                    </button>\r\n                    <span className=\"w-8 text-center font-bold text-slate-900 dark:text-white font-mono text-sm\">{item.quantity}</span>\r\n                    <button\r\n                        onClick={() => updateQuantity(item.id, 1)}\r\n                        className=\"w-8 h-8 flex items-center justify-center rounded-md hover:bg-white dark:hover:bg-slate-700 transition-all text-primary\"\r\n                    >\r\n                        <span className=\"material-icons-round text-sm\">add</span>\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Price & Remove (Desktop) */}\r\n                <div className=\"flex flex-col items-end gap-1 min-w-[80px]\">\r\n                    <span className=\"text-lg md:text-xl font-bold text-slate-900 dark:text-white tracking-tight\">{formatPrice(item.price * item.quantity)}</span>\r\n                    <button\r\n                        onClick={() => removeItem(item.id)}\r\n                        className=\"hidden md:flex text-xs font-semibold text-slate-400 hover:text-red-500 transition-colors items-center gap-1 group/delete\"\r\n                    >\r\n                        <span className=\"material-icons-round text-sm group-hover/delete:animate-bounce\">delete</span>\r\n                        Remove\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\cart\\OrderSummary.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'createOrder' is defined but never used.","line":5,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":21,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"createOrder"},"fix":{"range":[117,157],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'clearCart' is assigned a value but never used.","line":11,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":41},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'setIsCheckingOut' is assigned a value but never used.","line":14,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":14,"endColumn":43},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":89,"column":25,"nodeType":"JSXOpeningElement","endLine":89,"endColumn":387},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":90,"column":25,"nodeType":"JSXOpeningElement","endLine":90,"endColumn":393},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":91,"column":25,"nodeType":"JSXOpeningElement","endLine":91,"endColumn":389},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":92,"column":25,"nodeType":"JSXOpeningElement","endLine":92,"endColumn":392}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useCart } from '@/context/CartContext';\r\nimport { createOrder } from '@/lib/api';\r\nimport { formatPrice } from '@/lib/format';\r\nimport { useRouter } from 'next/navigation';\r\nimport { useState } from 'react';\r\n\r\nexport function OrderSummary() {\r\n    const { totalPrice, items, clearCart } = useCart();\r\n    const { user } = useAuth();\r\n    const router = useRouter();\r\n    const [isCheckingOut, setIsCheckingOut] = useState(false);\r\n\r\n    // Logic from HTML: Delivery Fee + Estimated Tax mocking\r\n    const deliveryFee = 4.99;\r\n    const estimatedTax = 1.25;\r\n    const finalTotal = totalPrice + deliveryFee + estimatedTax;\r\n\r\n    const handleCheckout = () => {\r\n        if (!user) {\r\n            router.push('/login?redirect=/checkout');\r\n            return;\r\n        }\r\n        if (items.length === 0) return;\r\n\r\n        router.push('/checkout');\r\n    };\r\n\r\n    return (\r\n        <div className=\"lg:w-[380px]\">\r\n            <div className=\"sticky top-28 bg-white dark:bg-slate-800 rounded-xl p-6 shadow-[0_4px_20px_-2px_rgba(0,0,0,0.05)] border border-slate-100 dark:border-slate-700\">\r\n                <h2 className=\"text-xl font-extrabold mb-6 tracking-tight text-slate-900 dark:text-white\">Order Summary</h2>\r\n\r\n                <div className=\"flex flex-col gap-4 mb-6\">\r\n                    <div className=\"flex justify-between items-center text-slate-500 dark:text-slate-400\">\r\n                        <span className=\"text-sm\">Subtotal</span>\r\n                        <span className=\"text-base font-bold text-slate-900 dark:text-white\">{formatPrice(totalPrice)}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between items-center text-slate-500 dark:text-slate-400\">\r\n                        <span className=\"text-sm\">Delivery Fee</span>\r\n                        <span className=\"text-base font-bold text-slate-900 dark:text-white\">{formatPrice(deliveryFee)}</span>\r\n                    </div>\r\n                    <div className=\"flex justify-between items-center text-slate-500 dark:text-slate-400\">\r\n                        <span className=\"text-sm\">Estimated Tax</span>\r\n                        <span className=\"text-base font-bold text-slate-900 dark:text-white\">{formatPrice(estimatedTax)}</span>\r\n                    </div>\r\n\r\n                    <div className=\"h-px bg-slate-100 dark:bg-slate-700 my-2\"></div>\r\n\r\n                    <div className=\"flex justify-between items-center text-slate-900 dark:text-white\">\r\n                        <span className=\"text-lg font-extrabold\">Total</span>\r\n                        <span className=\"text-2xl font-extrabold text-primary\">{formatPrice(finalTotal)}</span>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"space-y-4\">\r\n                    <button\r\n                        onClick={handleCheckout}\r\n                        disabled={isCheckingOut || items.length === 0}\r\n                        className=\"w-full py-4 bg-primary text-white rounded-xl font-bold text-lg hover:shadow-lg hover:shadow-primary/20 transition-all flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                    >\r\n                        {isCheckingOut ? (\r\n                            <div className=\"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin\" />\r\n                        ) : (\r\n                            <>\r\n                                Proceed to Checkout\r\n                                <span className=\"material-icons-round\">arrow_forward</span>\r\n                            </>\r\n                        )}\r\n                    </button>\r\n\r\n                    <div className=\"flex flex-col gap-4\">\r\n                        <div className=\"relative\">\r\n                            <input\r\n                                className=\"w-full h-11 pl-4 pr-16 rounded-lg border-slate-200 dark:border-slate-700 bg-transparent text-sm focus:ring-primary focus:border-primary outline-none border text-slate-900 dark:text-white\"\r\n                                placeholder=\"Promo code\"\r\n                                type=\"text\"\r\n                            />\r\n                            <button className=\"absolute right-2 top-1/2 -translate-y-1/2 text-primary font-bold text-sm px-2\">Apply</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"mt-8 pt-6 border-t border-slate-100 dark:border-slate-700\">\r\n                    <p className=\"text-[10px] uppercase font-bold text-slate-400 tracking-widest text-center mb-4\">Secure Checkout</p>\r\n                    <div className=\"flex justify-center gap-4 opacity-50 grayscale hover:grayscale-0 transition-all\">\r\n                        <img className=\"h-4\" alt=\"Visa\" src=\"https://lh3.googleusercontent.com/aida-public/AB6AXuBtqruSyorBS-qgfx7ZoReMc3mmdTe-w9BBSbiVuhIwpUB7-q20ajX_tksDVLj-KKypcWJgQyglxZwoORA4te4uCIZnMnyVgImwozx4QoR0VzFNvjQeNVfWCFv2__ZAtt-y10I1MS6OZt1b5NFtaGGPYM7k6LVLrR6E0bAs2fWpAhzfP__ZqrxAOBOgQHnCc5D3ZNc2xAN7fNZMZfTV0dACWdLnW1n3dkIWPAvZ4hZvW9ToauEkgYO5AddPLzWkCHjrK08z-lqpCTU\" />\r\n                        <img className=\"h-6\" alt=\"Mastercard\" src=\"https://lh3.googleusercontent.com/aida-public/AB6AXuBLclIV06NUwPBe-33dwYFtkIXvujXO979UjeN5gkMvod7dLm1_-TD-jPdrtjrr1PUbLtd4M1r7SvAw71lPQfWEtqgo355P_0UenPPhLpZ8_7p6s6jBxyknPBLFFVz2TLTerdTjee4Y2uY4wHxNi1fsaNs7JjgpXPLdnzWSvuvfQ5UI62yePM6ZX5gJtzKQdJex2GA8Ofgjl-7EPpMOy6VumJbUUYfl17McVTokvgPBP20Bh__oqU4iLNn0h18Xkh_Qih_cR3wanUA\" />\r\n                        <img className=\"h-4\" alt=\"Paypal\" src=\"https://lh3.googleusercontent.com/aida-public/AB6AXuCYj4A4ze3Art3EWZBFpEtaRkbA4Ld_UV8wHrXTy7nbvaLII24da1tm1esO9pa80ODkjriF3L0kHgBOH1LVWPzd42qIOzWHm0jB0vkXHv8l44CBzSI6sg16YE6W8teC3jdMQqayLf-e1nsh0n-M3IRc9hCXfBVG0G8opKo3Jy7q0RKHwEtVVtA8EPkajrcqzjjAKJ8dxS59cKpEgp9GTixletgQ5V4DE4h2o0uZ4q0md5NyOx-w99CcwyyBrR8mUHhe2f7K1DhdaBQ\" />\r\n                        <img className=\"h-4\" alt=\"Apple Pay\" src=\"https://lh3.googleusercontent.com/aida-public/AB6AXuCWmswRRX9jYZCiUX5GmHzpqOsPo0S4sYAXpvEdhM3Npy_q4JPGPYGPup162KR-VM4cqRdIYO_1c6LeK5Fbvm0WOxdDLg2dE_AIFt5ySrrXkakBhqgymzla85Zw0YobgEJ2KZBucCcMCyUA1G9M8jnWL_u0AZdueXPKmtRitVQ8ydG6Gm9qwWymNgQuSrIZAtsEQGMerfw6Ie9ZDLFe6CfkOdm1ulJU3rq5sqSXhrz-nKYc_mEV_-muznZ81TvEKtSQ9I_GX4djFtM\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\cart\\RecentlyViewed.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\category\\CategoryHero.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\category\\CategoryView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":19,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":17}],"suppressedMessages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nF:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\category\\CategoryView.tsx:42:13\n  40 |         if (priceRange.min !== globalMinPrice || priceRange.max !== globalMaxPrice) {\n  41 |             // eslint-disable-next-line react-hooks/set-state-in-effect\n> 42 |             setPriceRange({ min: globalMinPrice, max: globalMaxPrice });\n     |             ^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  43 |         }\n  44 |     }, [globalMinPrice, globalMaxPrice, priceRange.min, priceRange.max]);\n  45 |","line":42,"column":13,"nodeType":null,"endLine":42,"endColumn":26,"suppressions":[{"kind":"directive","justification":""}]},{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nF:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\category\\CategoryView.tsx:119:13\n  117 |         if (currentPage !== 1) {\n  118 |             // eslint-disable-next-line react-hooks/set-state-in-effect\n> 119 |             setCurrentPage(1);\n      |             ^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  120 |         }\n  121 |     }, [priceRange, currentSort, slug, currentPage]);\n  122 |","line":119,"column":13,"nodeType":null,"endLine":119,"endColumn":27,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { useState, useMemo, useEffect } from 'react';\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport { Product, Category } from '@/lib/api';\r\nimport { SidebarFilters } from './SidebarFilters';\r\nimport { ProductListing } from './ProductListing';\r\nimport { MobileSubcategoryBar } from './MobileSubcategoryBar';\r\nimport { MobileFilterBar } from './MobileFilterBar';\r\nimport { MobileFilterDrawer } from './MobileFilterDrawer';\r\n\r\ninterface CategoryViewProps {\r\n    products: Product[];\r\n    categoryData: Category;\r\n    slug: string;\r\n}\r\n\r\nexport function CategoryView({ products, categoryData, slug }: CategoryViewProps) {\r\n    const router = useRouter();\r\n    const searchParams = useSearchParams();\r\n\r\n    // -- Derived Initial State --\r\n    // Calculate global min/max price from the entire product list\r\n    const globalMinPrice = useMemo(() => {\r\n        if (products.length === 0) return 0;\r\n        return Math.floor(Math.min(...products.map(p => p.price)));\r\n    }, [products]);\r\n\r\n    const globalMaxPrice = useMemo(() => {\r\n        if (products.length === 0) return 1000;\r\n        return Math.ceil(Math.max(...products.map(p => p.price)));\r\n    }, [products]);\r\n\r\n    // -- State --\r\n    const [currentSort, setCurrentSort] = useState(searchParams.get('sort') || 'newest');\r\n    // Filter State\r\n    const [priceRange, setPriceRange] = useState({ min: globalMinPrice, max: globalMaxPrice });\r\n    // Reset price range if category changes\r\n    useEffect(() => {\r\n        if (priceRange.min !== globalMinPrice || priceRange.max !== globalMaxPrice) {\r\n            // eslint-disable-next-line react-hooks/set-state-in-effect\r\n            setPriceRange({ min: globalMinPrice, max: globalMaxPrice });\r\n        }\r\n    }, [globalMinPrice, globalMaxPrice, priceRange.min, priceRange.max]);\r\n\r\n    // Loading State\r\n    const [isUpdating, setIsUpdating] = useState(false);\r\n\r\n    // -- Handlers --\r\n    const handleSortChange = (sort: string) => {\r\n        setIsUpdating(true);\r\n        setTimeout(() => {\r\n            setCurrentSort(sort);\r\n            updateUrl({ sort });\r\n            setIsUpdating(false);\r\n        }, 500);\r\n    };\r\n\r\n    const handlePriceChange = (min: number, max: number) => {\r\n        // Immediate UI update for the numbers/slider\r\n        setPriceRange({ min, max });\r\n    };\r\n\r\n    // Debounced URL/Filter update for Price to avoid crazy re-renders?\r\n    // Actually, user wants \"Instant Update\".\r\n    // \"Dragging the slider will filter products instantly\".\r\n    // So we don't delay the filtering list, but maybe we delay the URL update or heavy animations?\r\n    // Let's filter instantly. Effect is fast enough for <100 products.\r\n\r\n    // -- Filtering & Sorting Logic --\r\n    const filteredAndSortedProducts = useMemo(() => {\r\n        let result = [...products];\r\n\r\n        // 1. Filter by Subcategory (Client Side if needed, but usually Server handles it via URL?\r\n        // Wait, current implementation passes `subcategory` via props to `CategoryPage` which filters via API.\r\n        // But if we want instant switching, we should load ALL products for the category and filter locally?\r\n        // The API `getProductsByCategory` fetches products matching the subcategory if provided.\r\n        // If we want dynamic subcategory switching without reload, we need all products.\r\n        // BUT `CategoryPage` fetches based on `searchParams.subcategory`.\r\n        // If we change subcategory, we normally navigate.\r\n        // For Filter System, \"Attribute Filters\" (Organic etc) are client side.\r\n        // Subcategory is usually a navigation event.\r\n        // Let's respect the `products` prop as the \"Source of Truth\" (which might already be filtered by subcategory).\r\n\r\n        // 2. Filter by Price\r\n        result = result.filter(p => p.price >= priceRange.min && p.price <= priceRange.max);\r\n\r\n        // 3. Sort\r\n        switch (currentSort) {\r\n            case 'price-asc':\r\n                result.sort((a, b) => a.price - b.price);\r\n                break;\r\n            case 'price-desc':\r\n                result.sort((a, b) => b.price - a.price);\r\n                break;\r\n            case 'best-selling':\r\n                result.sort((a, b) => (b.sold_count || 0) - (a.sold_count || 0));\r\n                break;\r\n            case 'newest':\r\n                result.sort((a, b) => {\r\n                    if (!a.createdAt) return 1;\r\n                    if (!b.createdAt) return -1;\r\n                    return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();\r\n                });\r\n                break;\r\n        }\r\n\r\n        return result;\r\n    }, [products, currentSort, priceRange]);\r\n\r\n    // -- Pagination Logic --\r\n    const ITEMS_PER_PAGE = 12;\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n\r\n    // Reset page when filters change\r\n    useEffect(() => {\r\n        if (currentPage !== 1) {\r\n            // eslint-disable-next-line react-hooks/set-state-in-effect\r\n            setCurrentPage(1);\r\n        }\r\n    }, [priceRange, currentSort, slug, currentPage]);\r\n\r\n    const totalPages = Math.ceil(filteredAndSortedProducts.length / ITEMS_PER_PAGE);\r\n\r\n    const paginatedProducts = useMemo(() => {\r\n        const start = (currentPage - 1) * ITEMS_PER_PAGE;\r\n        const end = start + ITEMS_PER_PAGE;\r\n        return filteredAndSortedProducts.slice(start, end);\r\n    }, [filteredAndSortedProducts, currentPage]);\r\n\r\n    const handlePageChange = (page: number) => {\r\n        setIsUpdating(true);\r\n        // Simulate network delay for smooth feel or just instant\r\n        setTimeout(() => {\r\n            setCurrentPage(page);\r\n            window.scrollTo({ top: 0, behavior: 'smooth' });\r\n            setIsUpdating(false);\r\n        }, 300);\r\n    };\r\n\r\n    // Helper to update URL silently\r\n    const updateUrl = (updates: Record<string, string>) => {\r\n        const params = new URLSearchParams(searchParams.toString());\r\n        Object.entries(updates).forEach(([key, value]) => params.set(key, value));\r\n        window.history.pushState(null, '', `?${params.toString()}`);\r\n    };\r\n\r\n    // Mobile Filter Drawer State\r\n    const [isMobileFiltersOpen, setIsMobileFiltersOpen] = useState(false);\r\n    const currentSub = searchParams.get('subcategory');\r\n\r\n    return (\r\n        <div className=\"flex flex-col lg:flex-row gap-12 relative pb-32 lg:pb-0\">\r\n            {/* Mobile Category UX - Unified Sticky Header */}\r\n            <div className=\"lg:hidden sticky top-[56px] md:top-[80px] z-30 bg-white/80 dark:bg-slate-900/80 backdrop-blur-lg border-b border-slate-100 dark:border-slate-800 transition-all duration-300 supports-[backdrop-filter]:bg-white/60\">\r\n                <MobileFilterBar\r\n                    totalResults={filteredAndSortedProducts.length}\r\n                    onFilterClick={() => setIsMobileFiltersOpen(true)}\r\n                    currentSort={currentSort}\r\n                    onSortChange={handleSortChange}\r\n                />\r\n                <MobileSubcategoryBar\r\n                    subcategories={categoryData.subcategories}\r\n                    currentCategorySlug={slug}\r\n                    currentSubcategory={currentSub}\r\n                />\r\n            </div>\r\n\r\n            <MobileFilterDrawer\r\n                isOpen={isMobileFiltersOpen}\r\n                onClose={() => setIsMobileFiltersOpen(false)}\r\n                minPrice={globalMinPrice}\r\n                maxPrice={globalMaxPrice}\r\n                currentMin={priceRange.min}\r\n                currentMax={priceRange.max}\r\n                onPriceChange={handlePriceChange}\r\n            />\r\n\r\n            {/* Sidebar Filters - Desktop Only */}\r\n            <div className=\"hidden lg:block w-72 flex-shrink-0\">\r\n                <SidebarFilters\r\n                    subcategories={categoryData.subcategories}\r\n                    currentCategory={slug}\r\n                    minPrice={globalMinPrice}\r\n                    maxPrice={globalMaxPrice}\r\n                    currentMin={priceRange.min}\r\n                    currentMax={priceRange.max}\r\n                    onPriceChange={handlePriceChange}\r\n                />\r\n            </div>\r\n\r\n            {/* Product Grid Area */}\r\n            <div className=\"flex-1\">\r\n                <ProductListing\r\n                    title={categoryData.name}\r\n                    products={paginatedProducts}\r\n                    totalProducts={filteredAndSortedProducts.length}\r\n                    currentPage={currentPage}\r\n                    totalPages={totalPages}\r\n                    onPageChange={handlePageChange}\r\n                    currentSort={currentSort}\r\n                    onSortChange={handleSortChange}\r\n                    isUpdating={isUpdating}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\category\\MobileCategoryDrawer.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Link' is defined but never used.","line":4,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":12,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Link"},"fix":{"range":[96,125],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":141,"column":45,"nodeType":"JSXOpeningElement","endLine":141,"endColumn":143}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\nimport React, { useState } from 'react';\r\nimport { Category } from '@/lib/api';\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/navigation';\r\n\r\ninterface MobileCategoryDrawerProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    categories: Category[];\r\n}\r\n\r\nexport function MobileCategoryDrawer({ isOpen, onClose, categories }: MobileCategoryDrawerProps) {\r\n    const [selectedCategory, setSelectedCategory] = useState<Category | null>(null);\r\n\r\n    // Reset selection when closing\r\n    React.useEffect(() => {\r\n        if (!isOpen) {\r\n            // slightly delay reset to avoid UI jumping before animation ends\r\n            const timer = setTimeout(() => setSelectedCategory(null), 300);\r\n            return () => clearTimeout(timer);\r\n        }\r\n    }, [isOpen]);\r\n\r\n    // Handle Back Button to Close Drawer\r\n    const isClosingViaBack = React.useRef(false);\r\n\r\n    React.useEffect(() => {\r\n        if (isOpen) {\r\n            isClosingViaBack.current = false;\r\n            // Push a new state to history when drawer opens\r\n            window.history.pushState({ drawerOpen: true }, '', window.location.href);\r\n\r\n            const handlePopState = () => {\r\n                isClosingViaBack.current = true;\r\n                onClose();\r\n            };\r\n\r\n            window.addEventListener('popstate', handlePopState);\r\n\r\n            return () => {\r\n                window.removeEventListener('popstate', handlePopState);\r\n                // If not closed via back button (i.e. closed via UI), remove the history item\r\n                if (!isClosingViaBack.current) {\r\n                    window.history.back();\r\n                }\r\n            };\r\n        }\r\n    }, [isOpen, onClose]);\r\n\r\n    const router = useRouter();\r\n\r\n    const handleNavigation = (e: React.MouseEvent, path: string) => {\r\n        e.preventDefault();\r\n        isClosingViaBack.current = true; // Prevent cleanup hook from double-popping\r\n        window.history.back(); // Remove the drawer state\r\n        onClose(); // Update UI state\r\n        // Small delay to ensure drawer closing validation doesn't interfere with navigation\r\n        setTimeout(() => {\r\n            router.push(path);\r\n        }, 50);\r\n    };\r\n\r\n    return (\r\n        <div className={`fixed inset-0 z-[100] transition-opacity duration-300 ${isOpen ? 'opacity-100 visible' : 'opacity-0 invisible'}`}>\r\n            {/* Backdrop */}\r\n            <div\r\n                className=\"absolute inset-0 bg-black/50 backdrop-blur-sm\"\r\n                onClick={onClose}\r\n            />\r\n\r\n            {/* Drawer */}\r\n            <div className={`absolute bottom-0 left-0 right-0 bg-white dark:bg-slate-900 rounded-t-3xl shadow-2xl transition-transform duration-300 flex flex-col max-h-[85vh] ${isOpen ? 'translate-y-0' : 'translate-y-full'}`}>\r\n\r\n                {/* Handle Bar */}\r\n                <div className=\"w-full flex justify-center pt-3 pb-1\" onClick={onClose}>\r\n                    <div className=\"w-12 h-1.5 bg-slate-200 dark:bg-slate-700 rounded-full\" />\r\n                </div>\r\n\r\n                {/* Header */}\r\n                <div className=\"px-6 py-4 border-b border-slate-100 dark:border-slate-800 flex items-center justify-between shrink-0\">\r\n                    {selectedCategory ? (\r\n                        <button\r\n                            onClick={() => setSelectedCategory(null)}\r\n                            className=\"flex items-center gap-2 text-sm font-bold text-slate-600 dark:text-slate-400 hover:text-primary transition-colors\"\r\n                        >\r\n                            <span className=\"material-icons-round text-lg\">arrow_back</span>\r\n                            Back\r\n                        </button>\r\n                    ) : (\r\n                        <span className=\"text-lg font-bold text-slate-900 dark:text-white\">Categories</span>\r\n                    )}\r\n\r\n                    <button onClick={onClose} className=\"p-2 -mr-2 text-slate-400 hover:text-slate-600 dark:hover:text-slate-200 transition-colors\">\r\n                        <span className=\"material-icons-round\">close</span>\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"overflow-y-auto p-4 flex-1\">\r\n                    {selectedCategory ? (\r\n                        // Subcategories View\r\n                        <div className=\"space-y-2 animate-in slide-in-from-right-10 fade-in duration-200\">\r\n                            <h3 className=\"text-xl font-bold text-slate-900 dark:text-white mb-4 px-2\">{selectedCategory.name}</h3>\r\n\r\n                            <a\r\n                                href={`/category/${selectedCategory.name.toLowerCase().replace(/ & /g, '-').replace(/ /g, '-')}`}\r\n                                className=\"flex items-center justify-between p-4 bg-primary/5 rounded-2xl hover:bg-primary/10 transition-colors group\"\r\n                                onClick={(e) => handleNavigation(e, `/category/${selectedCategory.name.toLowerCase().replace(/ & /g, '-').replace(/ /g, '-')}`)}\r\n                            >\r\n                                <span className=\"font-bold text-primary\">Shop All {selectedCategory.name}</span>\r\n                                <span className=\"material-icons-round text-primary group-hover:translate-x-1 transition-transform\">arrow_forward</span>\r\n                            </a>\r\n\r\n                            <div className=\"grid grid-cols-2 gap-3 mt-4\">\r\n                                {selectedCategory.subcategories.map((sub) => (\r\n                                    <a\r\n                                        key={sub.name}\r\n                                        href={`/category/${selectedCategory.name.toLowerCase().replace(/ & /g, '-').replace(/ /g, '-')}?subcategory=${encodeURIComponent(sub.name)}`}\r\n                                        className=\"flex flex-col items-center justify-center p-4 bg-slate-50 dark:bg-slate-800 rounded-2xl border border-slate-100 dark:border-slate-700 hover:border-primary/50 hover:shadow-lg hover:shadow-primary/5 transition-all text-center gap-2\"\r\n                                        onClick={(e) => handleNavigation(e, `/category/${selectedCategory.name.toLowerCase().replace(/ & /g, '-').replace(/ /g, '-')}?subcategory=${encodeURIComponent(sub.name)}`)}\r\n                                    >\r\n                                        <span className=\"text-sm font-bold text-slate-700 dark:text-slate-200\">{sub.name}</span>\r\n                                    </a>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        // Main Categories View\r\n                        <div className=\"grid grid-cols-2 gap-3\">\r\n                            {categories.map((category) => (\r\n                                <button\r\n                                    key={category.id}\r\n                                    onClick={() => setSelectedCategory(category)}\r\n                                    className=\"flex flex-col items-center text-center p-4 bg-slate-50 dark:bg-slate-800 rounded-2xl border border-slate-100 dark:border-slate-700 hover:border-primary/50 hover:shadow-md transition-all group\"\r\n                                >\r\n                                    <div className=\"w-12 h-12 mb-3 bg-white dark:bg-slate-700 rounded-full flex items-center justify-center shadow-sm text-2xl group-hover:scale-110 transition-transform\">\r\n                                        {/* You might want to map category names to icons or image URLs if available */}\r\n                                        {/* For now using first letter or generic icon if no image */}\r\n                                        {category.img ? (\r\n                                            <img src={category.img} alt={category.name} className=\"w-full h-full object-cover rounded-full\" />\r\n                                        ) : (\r\n                                            <span className=\"material-icons-round text-primary\">category</span>\r\n                                        )}\r\n                                    </div>\r\n                                    <span className=\"font-bold text-slate-900 dark:text-white text-sm\">{category.name}</span>\r\n                                    <span className=\"text-xs text-slate-400 mt-1\">{category.subcategories.length} Items</span>\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\category\\MobileFilterBar.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'totalResults' is defined but never used.","line":11,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":11,"endColumn":47}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\nimport React from 'react';\r\n\r\ninterface MobileFilterBarProps {\r\n    totalResults: number;\r\n    onFilterClick: () => void;\r\n    currentSort: string;\r\n    onSortChange: (sort: string) => void;\r\n}\r\n\r\nexport function MobileFilterBar({ totalResults, onFilterClick, currentSort, onSortChange }: MobileFilterBarProps) {\r\n    return (\r\n        <div className=\"lg:hidden py-3 -mx-4 px-4 flex items-center justify-between border-b border-transparent\">\r\n            {/* Sort Dropdown (Simplified) */}\r\n            <div className=\"relative\">\r\n                <select\r\n                    value={currentSort}\r\n                    onChange={(e) => onSortChange(e.target.value)}\r\n                    className=\"appearance-none bg-white dark:bg-slate-800 pl-3 pr-8 py-2 rounded-lg text-sm font-bold text-slate-700 dark:text-slate-200 border border-slate-200 dark:border-slate-700 outline-none focus:border-primary focus:ring-1 focus:ring-primary/20\"\r\n                >\r\n                    <option value=\"newest\">Newest</option>\r\n                    <option value=\"price-asc\">Price: Low to High</option>\r\n                    <option value=\"price-desc\">Price: High to Low</option>\r\n                    <option value=\"best-selling\">Best Selling</option>\r\n                </select>\r\n                <span className=\"material-icons-round absolute right-2 top-1/2 -translate-y-1/2 text-slate-400 pointer-events-none text-sm\">\r\n                    expand_more\r\n                </span>\r\n            </div>\r\n\r\n            <div className=\"flex items-center gap-3 ml-auto\">\r\n                <button\r\n                    onClick={onFilterClick}\r\n                    className=\"flex items-center gap-2 px-4 py-2 bg-slate-900 dark:bg-white text-white dark:text-slate-900 rounded-lg text-sm font-bold shadow-lg shadow-slate-900/10 active:scale-95 transition-transform\"\r\n                >\r\n                    <span className=\"material-icons-round text-base\">tune</span>\r\n                    Filter\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\category\\MobileFilterDrawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\category\\MobileSubcategoryBar.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\category\\ProductListing.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'totalProducts' is defined but never used.","line":24,"column":5,"nodeType":"Identifier","messageId":"unusedVar","endLine":24,"endColumn":18}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { ProductCard } from '@/components/product/ProductCard';\r\nimport { Product } from '@/lib/api';\r\nimport React from 'react';\r\n\r\ninterface ProductListingProps {\r\n    title: string;\r\n    subtitle?: string;\r\n    products: Product[];\r\n    totalProducts: number;\r\n    currentPage: number;\r\n    totalPages: number;\r\n    onPageChange: (page: number) => void;\r\n    currentSort: string;\r\n    onSortChange: (sort: string) => void;\r\n    isUpdating: boolean;\r\n}\r\n\r\nexport function ProductListing({\r\n    title,\r\n    subtitle,\r\n    products,\r\n    totalProducts,\r\n    currentPage,\r\n    totalPages,\r\n    onPageChange,\r\n    currentSort,\r\n    onSortChange,\r\n    isUpdating\r\n}: ProductListingProps) {\r\n\r\n    const handleSortChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n        onSortChange(e.target.value);\r\n    };\r\n\r\n    return (\r\n        <div className={`transition-opacity duration-300 ${isUpdating ? 'opacity-50 pointer-events-none' : 'opacity-100'}`}>\r\n            <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-4 mb-8\">\r\n                <div>\r\n                    <h1 className=\"text-3xl font-bold text-slate-900 dark:text-white leading-tight\">{title}</h1>\r\n                    {subtitle && <p className=\"text-slate-500 dark:text-slate-400 mt-1\">{subtitle}</p>}\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                    <span className=\"text-sm text-slate-500 hidden sm:block\">Sort by:</span>\r\n                    <select\r\n                        value={currentSort}\r\n                        onChange={handleSortChange}\r\n                        disabled={isUpdating}\r\n                        className=\"bg-white dark:bg-slate-800 border-none rounded-xl py-2 pl-4 pr-10 text-sm font-bold text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/20 outline-none cursor-pointer disabled:opacity-50\"\r\n                    >\r\n                        <option value=\"newest\">Newest</option>\r\n                        <option value=\"best-selling\">Best Selling</option>\r\n                        <option value=\"price-asc\">Price: Low to High</option>\r\n                        <option value=\"price-desc\">Price: High to Low</option>\r\n                    </select>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Grid */}\r\n            <div className=\"relative min-h-[400px]\">\r\n                {/* Loading State Overlay */}\r\n                {isUpdating && (\r\n                    <div className=\"absolute inset-0 z-10 bg-white/50 dark:bg-slate-900/50 backdrop-blur-sm flex items-center justify-center rounded-xl transition-all duration-300 animate-fade-in\">\r\n                        <div className=\"flex flex-col items-center gap-3\">\r\n                            <div className=\"w-10 h-10 border-4 border-primary border-t-transparent rounded-full animate-spin\"></div>\r\n                            <span className=\"text-sm font-bold text-primary animate-pulse\">Updating...</span>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                <div className={`grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6 mb-12 transition-opacity duration-300 ${isUpdating ? 'opacity-40' : 'opacity-100'}`}>\r\n                    {products.map((product) => (\r\n                        <ProductCard key={product.id} product={{ ...product, id: product.id }} />\r\n                    ))}\r\n                </div>\r\n\r\n                {products.length === 0 && !isUpdating && (\r\n                    <div className=\"flex flex-col items-center justify-center py-20 text-center\">\r\n                        <span className=\"material-icons-round text-6xl text-slate-200 dark:text-slate-700 mb-4\">search_off</span>\r\n                        <h3 className=\"text-xl font-bold text-slate-900 dark:text-white mb-2\">No products found</h3>\r\n                        <p className=\"text-slate-500\">Try changing your filters.</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Pagination - Dynamic */}\r\n            {(totalPages > 0) && (\r\n                <div className=\"flex justify-center flex-wrap gap-2\">\r\n                    <button\r\n                        onClick={() => onPageChange?.(Math.max(1, currentPage - 1))}\r\n                        disabled={currentPage === 1}\r\n                        className=\"w-10 h-10 rounded-xl bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                    >\r\n                        <span className=\"material-icons-round\">chevron_left</span>\r\n                    </button>\r\n\r\n                    {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\r\n                        <button\r\n                            key={page}\r\n                            onClick={() => onPageChange?.(page)}\r\n                            className={`w-10 h-10 rounded-xl font-bold flex items-center justify-center transition-all ${currentPage === page\r\n                                ? 'bg-primary text-white shadow-lg shadow-primary/30 scale-105'\r\n                                : 'bg-slate-100 dark:bg-slate-800 text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700'\r\n                                }`}\r\n                        >\r\n                            {page}\r\n                        </button>\r\n                    ))}\r\n\r\n                    <button\r\n                        onClick={() => onPageChange?.(Math.min(totalPages, currentPage + 1))}\r\n                        disabled={currentPage === totalPages}\r\n                        className=\"w-10 h-10 rounded-xl bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors\"\r\n                    >\r\n                        <span className=\"material-icons-round\">chevron_right</span>\r\n                    </button>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\category\\SidebarFilters.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\checkout\\CheckoutStepper.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'index' is defined but never used.","line":28,"column":32,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":37},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'isPending' is assigned a value but never used.","line":31,"column":27,"nodeType":"Identifier","messageId":"unusedVar","endLine":31,"endColumn":36}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\ntype CheckoutStepperProps = {\r\n    currentStep: 1 | 2 | 3;\r\n};\r\n\r\nexport function CheckoutStepper({ currentStep }: CheckoutStepperProps) {\r\n    const steps = [\r\n        { step: 1, label: 'Shopping Cart', icon: 'shopping_cart' },\r\n        { step: 2, label: 'Checkout Details', icon: 'credit_card' },\r\n        { step: 3, label: 'Order Complete', icon: 'check_circle' }\r\n    ];\r\n\r\n    return (\r\n        <div className=\"w-full max-w-4xl mx-auto mb-10 px-4\">\r\n            <div className=\"relative flex items-center justify-between z-0\">\r\n                {/* Connecting Line - Background */}\r\n                <div className=\"absolute left-[10%] right-[10%] top-1/2 -translate-y-1/2 h-0.5 bg-slate-200 dark:bg-slate-700\" />\r\n\r\n                {/* Connecting Line - Progress */}\r\n                <div\r\n                    className=\"absolute left-[10%] top-1/2 -translate-y-1/2 h-0.5 bg-[#4c9a80] transition-all duration-700 ease-in-out\"\r\n                    style={{\r\n                        width: `${((currentStep - 1) / (steps.length - 1)) * 80}%`\r\n                    }}\r\n                />\r\n\r\n                {steps.map((s, index) => {\r\n                    const isCompleted = currentStep > s.step;\r\n                    const isActive = currentStep === s.step;\r\n                    const isPending = currentStep < s.step;\r\n\r\n                    return (\r\n                        <div key={s.step} className=\"flex flex-col items-center gap-3 relative group\">\r\n                            {/* Step Circle */}\r\n                            <div\r\n                                className={`\r\n                                    w-12 h-12 rounded-full flex items-center justify-center border-2 transition-all duration-500 ease-out z-10\r\n                                    ${isActive\r\n                                        ? 'bg-white dark:bg-[#0d1b17] border-[#4c9a80] text-[#4c9a80] shadow-[0_0_0_4px_rgba(76,154,128,0.15)] scale-110'\r\n                                        : isCompleted\r\n                                            ? 'bg-[#4c9a80] border-[#4c9a80] text-white shadow-md shadow-[#4c9a80]/20'\r\n                                            : 'bg-white dark:bg-[#0d1b17] border-slate-200 dark:border-slate-700 text-slate-300 dark:text-slate-600'\r\n                                    }\r\n                                `}\r\n                            >\r\n                                <span className={`material-icons-round text-xl transition-transform duration-300 ${isActive ? 'scale-110' : ''}`}>\r\n                                    {isCompleted ? 'check' : s.icon}\r\n                                </span>\r\n                            </div>\r\n\r\n                            {/* Label */}\r\n                            <div className=\"flex flex-col items-center gap-0.5\">\r\n                                <span\r\n                                    className={`\r\n                                        text-xs font-bold uppercase tracking-wider transition-colors duration-300\r\n                                        ${isActive\r\n                                            ? 'text-[#0d1b17] dark:text-white'\r\n                                            : isCompleted\r\n                                                ? 'text-[#4c9a80]'\r\n                                                : 'text-slate-400 dark:text-slate-600'\r\n                                        }\r\n                                    `}\r\n                                >\r\n                                    Step {s.step}\r\n                                </span>\r\n                                <span\r\n                                    className={`\r\n                                        text-sm font-bold whitespace-nowrap transition-colors duration-300 hidden sm:block\r\n                                        ${isActive || isCompleted\r\n                                            ? 'text-[#0d1b17] dark:text-white'\r\n                                            : 'text-slate-400 dark:text-slate-600'\r\n                                        }\r\n                                    `}\r\n                                >\r\n                                    {s.label}\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\home\\AdvertiseScroller.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":4,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":19,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useEffect"},"fix":{"range":[59,69],"text":""},"desc":"Remove unused variable \"useEffect\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useRef' is defined but never used.","line":4,"column":21,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":27,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useRef"},"fix":{"range":[68,76],"text":""},"desc":"Remove unused variable \"useRef\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useState' is defined but never used.","line":4,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":37,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"useState"},"fix":{"range":[50,102],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'ads' is assigned a value but never used.","line":6,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":6,"endColumn":10}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\"use client\";\r\n\r\nimport Image from \"next/image\";\r\nimport { useEffect, useRef, useState } from \"react\";\r\n\r\nconst ads = [\r\n    \"/legacy_assets/images/card1.png\",\r\n    \"/legacy_assets/images/card2.png\",\r\n    \"/legacy_assets/images/card3.png\",\r\n    \"/legacy_assets/images/card1.png\", // Duplicates for seamless looping if needed, or we just map twice\r\n    \"/legacy_assets/images/card2.png\",\r\n    \"/legacy_assets/images/card3.png\",\r\n];\r\n\r\nexport function AdvertiseScroller({ ads = [] }: { ads?: string[] }) {\r\n    // Fallback if no ads provided\r\n    const displayAds = ads.length > 0 ? ads : [\r\n        \"/legacy_assets/images/card1.png\",\r\n        \"/legacy_assets/images/card2.png\",\r\n        \"/legacy_assets/images/card3.png\",\r\n    ];\r\n\r\n    return (\r\n        <div className=\"w-full bg-white dark:bg-slate-900 py-4 overflow-hidden\">\r\n            <div className=\"flex gap-4 animate-scroll whitespace-nowrap w-max hover:[animation-play-state:paused]\">\r\n                {[...displayAds, ...displayAds, ...displayAds].map((src, index) => (\r\n                    <div\r\n                        key={index}\r\n                        className=\"relative w-[300px] h-[160px] md:w-[400px] md:h-[220px] bg-gray-100 dark:bg-slate-800 rounded-xl overflow-hidden shadow-sm flex-shrink-0\"\r\n                    >\r\n                        <Image\r\n                            src={src}\r\n                            alt={`Advertisement ${index + 1}`}\r\n                            fill\r\n                            className=\"object-cover hover:scale-105 transition-transform duration-500\"\r\n                        />\r\n                    </div>\r\n                ))}\r\n            </div>\r\n            <style jsx>{`\r\n                .animate-scroll {\r\n                    animation: scroll 40s linear infinite;\r\n                }\r\n                @keyframes scroll {\r\n                    0% {\r\n                        transform: translateX(0);\r\n                    }\r\n                    100% {\r\n                        transform: translateX(-50%);\r\n                    }\r\n                }\r\n            `}</style>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\home\\CategoryScroller.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":64,"column":29,"nodeType":"JSXOpeningElement","endLine":64,"endColumn":102}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useRef } from 'react';\r\nimport Link from 'next/link';\r\nimport { Category } from '@/lib/api';\r\n\r\ninterface CategoryScrollerProps {\r\n    categories: Category[];\r\n}\r\n\r\nexport function CategoryScroller({ categories }: CategoryScrollerProps) {\r\n    const scrollContainerRef = useRef<HTMLDivElement>(null);\r\n\r\n    const scroll = (direction: 'left' | 'right') => {\r\n        if (scrollContainerRef.current) {\r\n            const scrollAmount = 300;\r\n            const newScrollLeft = scrollContainerRef.current.scrollLeft + (direction === 'right' ? scrollAmount : -scrollAmount);\r\n            scrollContainerRef.current.scrollTo({\r\n                left: newScrollLeft,\r\n                behavior: 'smooth'\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <section className=\"group\">\r\n            <div className=\"flex items-center justify-between mb-6\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-extrabold flex items-center gap-2 text-slate-900 dark:text-white\">\r\n                        Categories <span className=\"text-3xl\">📦</span>\r\n                    </h2>\r\n                    <p className=\"text-slate-500 text-sm mt-1\">Browse our wide range of freshness</p>\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                    <button\r\n                        onClick={() => scroll('left')}\r\n                        className=\"w-10 h-10 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center hover:bg-primary hover:text-white transition-all text-slate-600 dark:text-slate-400\"\r\n                        aria-label=\"Scroll left\"\r\n                    >\r\n                        <span className=\"material-icons-round\">chevron_left</span>\r\n                    </button>\r\n                    <button\r\n                        onClick={() => scroll('right')}\r\n                        className=\"w-10 h-10 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center hover:bg-primary hover:text-white transition-all text-slate-600 dark:text-slate-400\"\r\n                        aria-label=\"Scroll right\"\r\n                    >\r\n                        <span className=\"material-icons-round\">chevron_right</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Scroll Container */}\r\n            <div\r\n                ref={scrollContainerRef}\r\n                className=\"flex gap-4 overflow-x-auto pb-4 hide-scrollbar scroll-smooth\"\r\n            >\r\n                {categories.map((cat) => (\r\n                    <Link\r\n                        key={cat.id}\r\n                        href={`/category/${cat.slug}`}\r\n                        className=\"flex-shrink-0 flex items-center gap-4 bg-white dark:bg-slate-800 p-3 pr-6 rounded-2xl border border-slate-100 dark:border-slate-700 cursor-pointer hover:border-primary transition-all group/item min-w-[220px]\"\r\n                    >\r\n                        <div className=\"w-16 h-16 bg-slate-100 dark:bg-slate-700 rounded-xl flex items-center justify-center group-hover/item:bg-primary/10 transition-colors shrink-0\">\r\n                            <img alt={cat.name} className=\"w-10 h-10 object-contain\" src={cat.img} />\r\n                        </div>\r\n                        <div className=\"flex flex-col\">\r\n                            <span className=\"font-bold text-sm text-slate-900 dark:text-white\">{cat.name}</span>\r\n                        </div>\r\n                    </Link>\r\n                ))}\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\home\\FeaturesSection.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\home\\HeroSection.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'bannerGradient' is assigned a value but never used.","line":3,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":21},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":10,"column":17,"nodeType":"JSXOpeningElement","endLine":14,"endColumn":19}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import Link from 'next/link';\r\n\r\nconst bannerGradient = \"bg-gradient-to-br from-[#DCFCE7] to-[#F0FDF4] dark:from-[#14532D] dark:to-[#064E3B]\";\r\n\r\nexport function HeroSection({ settings }: { settings?: any }) {\r\n    return (\r\n        <section className=\"relative min-h-[500px] md:min-h-[600px] rounded-3xl overflow-hidden flex items-center py-12 md:py-20 group border border-slate-200 dark:border-slate-700 transition-colors\">\r\n            {/* Background Image with Zoom Effect */}\r\n            <div className=\"absolute inset-0 z-0\">\r\n                <img\r\n                    alt={settings?.title || \"Fresh Vegetables\"}\r\n                    className=\"w-full h-full object-cover transition-transform duration-1000 group-hover:scale-105 dark:brightness-[0.85]\"\r\n                    src={settings?.image_url || \"https://images.unsplash.com/photo-1542838132-92c53300491e?q=80&w=2574&auto=format&fit=crop\"}\r\n                />\r\n                {/* Premium Gradient Overlay */}\r\n                <div className=\"absolute inset-0 bg-gradient-to-r from-black/80 via-black/40 to-transparent z-10 dark:from-black/95 dark:via-black/80\"></div>\r\n            </div>\r\n\r\n            <div className=\"relative z-20 px-8 md:px-16 max-w-2xl space-y-6\">\r\n                <span className=\"inline-block px-4 py-1.5 bg-white/20 dark:bg-white/10 backdrop-blur-md text-white text-xs md:text-sm font-bold uppercase tracking-[0.2em] rounded-full border border-white/30 dark:border-white/20\">\r\n                    {settings?.subtitle || 'Organic & Fresh'}\r\n                </span>\r\n                <h1 className=\"text-4xl md:text-6xl lg:text-7xl font-black leading-tight text-white drop-shadow-lg\">\r\n                    {settings?.title || \"Nature's Best\"} <br />\r\n                    <span className=\"text-transparent bg-clip-text bg-gradient-to-r from-primary to-green-300\">\r\n                        {settings?.title ? \"\" : \"Just for You\"}\r\n                    </span>\r\n                </h1>\r\n                <p className=\"text-lg md:text-xl text-gray-200 dark:text-gray-100 max-w-md font-medium leading-relaxed drop-shadow-md\">\r\n                    {settings?.description || 'Experience the freshest produce delivered directly from local farms to your table. Taste the difference today.'}\r\n                </p>\r\n\r\n                <div className=\"flex flex-col sm:flex-row gap-4 pt-4\">\r\n                    <Link href=\"/shop\" className=\"px-8 py-4 bg-primary text-white font-bold rounded-2xl shadow-[0_10px_20px_rgba(34,197,94,0.3)] hover:shadow-[0_15px_30px_rgba(34,197,94,0.4)] hover:-translate-y-1 transition-all active:scale-95 text-base flex items-center justify-center gap-2\">\r\n                        <span className=\"material-icons-round\">shopping_bag</span>\r\n                        {settings?.button_text || 'Shop Now'}\r\n                    </Link>\r\n                    <a href={settings?.button_link || \"#special-offers\"} className=\"px-8 py-4 bg-white/10 dark:bg-white/5 backdrop-blur-md text-white font-bold rounded-2xl border border-white/20 dark:border-white/30 hover:bg-white hover:text-slate-900 dark:hover:bg-white dark:hover:text-slate-900 transition-all text-center text-base flex items-center justify-center gap-2\">\r\n                        View Offers\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\home\\NoticeScroller.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\home\\ProductGrid.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Link' is defined but never used.","line":4,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":4,"endColumn":12,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Link"},"fix":{"range":[57,86],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { useRef } from 'react';\r\nimport Link from 'next/link';\r\nimport { ProductCard } from '@/components/product/ProductCard';\r\nimport { Product } from '@/lib/api';\r\n\r\ninterface ProductGridProps {\r\n    products: Product[];\r\n    title?: string;\r\n    subtitle?: string;\r\n}\r\n\r\nexport function ProductGrid({ products, title = \"Best selling 🔥\", subtitle = \"Based on this week's most popular purchases\" }: ProductGridProps) {\r\n    const scrollRef = useRef<HTMLDivElement>(null);\r\n\r\n    const scroll = (direction: 'left' | 'right') => {\r\n        if (scrollRef.current) {\r\n            const { current } = scrollRef;\r\n            const scrollAmount = direction === 'left' ? -current.offsetWidth : current.offsetWidth;\r\n            current.scrollBy({ left: scrollAmount, behavior: 'smooth' });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <section>\r\n            <div className=\"flex items-center justify-between mb-8\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-extrabold flex items-center gap-2 text-slate-900 dark:text-white\">\r\n                        {title}\r\n                    </h2>\r\n                    {subtitle && <p className=\"text-slate-500 text-sm mt-1\">{subtitle}</p>}\r\n                </div>\r\n                <div className=\"flex gap-2\">\r\n                    <button\r\n                        onClick={() => scroll('left')}\r\n                        className=\"w-10 h-10 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center hover:bg-primary hover:text-white transition-all text-slate-600 dark:text-slate-400\"\r\n                    >\r\n                        <span className=\"material-icons-round\">chevron_left</span>\r\n                    </button>\r\n                    <button\r\n                        onClick={() => scroll('right')}\r\n                        className=\"w-10 h-10 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center hover:bg-primary hover:text-white transition-all text-slate-600 dark:text-slate-400\"\r\n                    >\r\n                        <span className=\"material-icons-round\">chevron_right</span>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Slider Container */}\r\n            <div\r\n                ref={scrollRef}\r\n                className=\"flex gap-6 overflow-x-auto pb-4 custom-scrollbar snap-x\"\r\n            >\r\n                {products.map((product) => (\r\n                    <div key={product.id} className=\"min-w-[200px] w-[200px] md:min-w-[240px] md:w-[240px] snap-start\">\r\n                        <ProductCard product={{ ...product, id: product.id }} />\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\home\\PromotionalBanners.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":75,"column":25,"nodeType":"JSXOpeningElement","endLine":79,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useRef } from 'react';\r\nimport Link from 'next/link';\r\n\r\ninterface Offer {\r\n    id: number;\r\n    name: string;\r\n    description?: string;\r\n    image_url?: string;\r\n}\r\n\r\ninterface PromotionalBannersProps {\r\n    offers: Offer[];\r\n}\r\n\r\nexport function PromotionalBanners({ offers }: PromotionalBannersProps) {\r\n    const scrollContainerRef = useRef<HTMLDivElement>(null);\r\n\r\n    // Filter only offers with images to be safe\r\n    const activeOffers = offers.filter(o => o.image_url);\r\n\r\n    if (activeOffers.length === 0) return null;\r\n\r\n    const scroll = (direction: 'left' | 'right') => {\r\n        if (scrollContainerRef.current) {\r\n            const scrollAmount = 400; // Card width approx\r\n            const newScrollLeft = scrollContainerRef.current.scrollLeft + (direction === 'right' ? scrollAmount : -scrollAmount);\r\n            scrollContainerRef.current.scrollTo({\r\n                left: newScrollLeft,\r\n                behavior: 'smooth'\r\n            });\r\n        }\r\n    };\r\n\r\n    return (\r\n        <section id=\"special-offers\" className=\"relative group scroll-mt-24\">\r\n            <div className=\"flex items-center justify-between mb-8\">\r\n                <div>\r\n                    <h2 className=\"text-2xl font-extrabold flex items-center gap-2 text-slate-900 dark:text-white\">\r\n                        Special Offers <span className=\"text-3xl\">🏷️</span>\r\n                    </h2>\r\n                    <p className=\"text-slate-500 text-sm mt-1\">Grab them before they're gone</p>\r\n                </div>\r\n                {activeOffers.length > 2 && (\r\n                    <div className=\"flex gap-2\">\r\n                        <button\r\n                            onClick={() => scroll('left')}\r\n                            className=\"w-10 h-10 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center hover:bg-primary hover:text-white transition-all text-slate-600 dark:text-slate-400\"\r\n                            aria-label=\"Scroll left\"\r\n                        >\r\n                            <span className=\"material-icons-round\">chevron_left</span>\r\n                        </button>\r\n                        <button\r\n                            onClick={() => scroll('right')}\r\n                            className=\"w-10 h-10 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center hover:bg-primary hover:text-white transition-all text-slate-600 dark:text-slate-400\"\r\n                            aria-label=\"Scroll right\"\r\n                        >\r\n                            <span className=\"material-icons-round\">chevron_right</span>\r\n                        </button>\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <div\r\n                ref={scrollContainerRef}\r\n                className=\"flex gap-6 overflow-x-auto pb-4 hide-scrollbar scroll-smooth snap-x snap-mandatory\"\r\n            >\r\n                {activeOffers.map((offer) => (\r\n                    <div\r\n                        key={offer.id}\r\n                        className=\"relative min-w-[300px] md:min-w-[500px] h-[250px] rounded-3xl overflow-hidden group/card snap-center flex-shrink-0\"\r\n                    >\r\n                        {/* Image */}\r\n                        <img\r\n                            alt={offer.name}\r\n                            src={offer.image_url}\r\n                            className=\"absolute inset-0 w-full h-full object-cover group-hover/card:scale-105 transition-transform duration-700\"\r\n                        />\r\n\r\n                        {/* Overlay */}\r\n                        <div className=\"absolute inset-0 bg-gradient-to-r from-slate-900/90 via-slate-900/40 to-transparent flex flex-col justify-center p-8 md:p-12 space-y-4\">\r\n                            <span className=\"text-white/80 text-sm font-bold uppercase tracking-wider bg-primary/20 backdrop-blur w-fit px-3 py-1 rounded-full border border-primary/30\">\r\n                                Limited Time\r\n                            </span>\r\n                            <h3 className=\"text-2xl md:text-3xl font-extrabold text-white leading-tight\">\r\n                                {offer.name}\r\n                            </h3>\r\n                            {offer.description && (\r\n                                <p className=\"text-slate-200 text-sm md:text-base max-w-[80%] line-clamp-2\">\r\n                                    {offer.description}\r\n                                </p>\r\n                            )}\r\n                            <Link\r\n                                href={`/offers/${encodeURIComponent(offer.name)}`} // Assuming name is unique/slug-like or we add slug later\r\n                                className=\"w-fit px-6 py-2.5 bg-white text-slate-900 font-bold rounded-xl text-sm hover:bg-primary hover:text-white transition-all transform group-hover/card:translate-x-2\"\r\n                            >\r\n                                Claim Offer\r\n                            </Link>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\layout\\Footer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\layout\\GlobalSearch.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\layout\\MobileNav.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\layout\\MobileSearchDrawer.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Link' is defined but never used.","line":3,"column":8,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":12,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"Link"},"fix":{"range":[76,105],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":114,"column":37,"nodeType":"JSXOpeningElement","endLine":118,"endColumn":39}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport Link from 'next/link';\r\nimport { useRouter } from 'next/navigation';\r\nimport { Product, searchProducts } from '@/lib/api';\r\nimport { formatPrice } from '@/lib/format';\r\n\r\ninterface MobileSearchDrawerProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n}\r\n\r\nexport function MobileSearchDrawer({ isOpen, onClose }: MobileSearchDrawerProps) {\r\n    const [query, setQuery] = useState('');\r\n    const [results, setResults] = useState<Product[]>([]);\r\n    const [isSearching, setIsSearching] = useState(false);\r\n    const inputRef = useRef<HTMLInputElement>(null);\r\n    const router = useRouter();\r\n\r\n    // Auto-focus input when opened\r\n    useEffect(() => {\r\n        if (isOpen) {\r\n            setTimeout(() => {\r\n                inputRef.current?.focus();\r\n            }, 100);\r\n        } else {\r\n            setQuery('');\r\n            setResults([]);\r\n        }\r\n    }, [isOpen]);\r\n\r\n    // Debounce search\r\n    useEffect(() => {\r\n        const timer = setTimeout(async () => {\r\n            if (query.trim().length > 1) {\r\n                setIsSearching(true);\r\n                try {\r\n                    const data = await searchProducts(query);\r\n                    setResults(data);\r\n                } catch (error) {\r\n                    console.error(error);\r\n                } finally {\r\n                    setIsSearching(false);\r\n                }\r\n            } else {\r\n                setResults([]);\r\n            }\r\n        }, 300);\r\n\r\n        return () => clearTimeout(timer);\r\n    }, [query]);\r\n\r\n    const handleSelect = (productId: number | string) => {\r\n        router.push(`/product/${productId}`);\r\n        onClose();\r\n    };\r\n\r\n    const handleSearchSubmit = (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (query.trim()) {\r\n            // Navigate to a search page if you have one, or just close and let user browse results if browsing is supported in drawer.\r\n            // For now, let's assume we just show results in the drawer or navigate to first result(?)\r\n            // Better: If we had a dedicated /search page, we'd go there. \r\n            // Since we don't seem to have a dedicated /search page (just dropdown), let's just keep the drawer open or relying on clicking items.\r\n            // Or maybe trigger a search filter on the current category page? No, that's complex.\r\n            // Let's just focus input.\r\n            inputRef.current?.blur();\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={`fixed inset-0 z-[100] bg-white dark:bg-slate-900 transition-transform duration-300 ${isOpen ? 'translate-y-0' : 'translate-y-full'}`}>\r\n            {/* Header */}\r\n            <div className=\"flex items-center gap-2 p-4 border-b border-slate-100 dark:border-slate-800\">\r\n                <button onClick={onClose} className=\"p-2 -ml-2 text-slate-500 rounded-full hover:bg-slate-100 dark:hover:bg-slate-800 transition-colors\">\r\n                    <span className=\"material-icons-round text-2xl\">arrow_back</span>\r\n                </button>\r\n                <form onSubmit={handleSearchSubmit} className=\"flex-1 relative\">\r\n                    <input\r\n                        ref={inputRef}\r\n                        type=\"text\"\r\n                        placeholder=\"Search products...\"\r\n                        className=\"w-full bg-slate-100 dark:bg-slate-800 border-none rounded-xl py-3 pl-4 pr-10 text-base font-medium focus:ring-2 focus:ring-primary/20 transition-all outline-none text-slate-900 dark:text-white\"\r\n                        value={query}\r\n                        onChange={(e) => setQuery(e.target.value)}\r\n                    />\r\n                    {query && (\r\n                        <button\r\n                            type=\"button\"\r\n                            onClick={() => setQuery('')}\r\n                            className=\"absolute right-3 top-1/2 -translate-y-1/2 text-slate-400 hover:text-slate-600\"\r\n                        >\r\n                            <span className=\"material-icons-round text-lg\">close</span>\r\n                        </button>\r\n                    )}\r\n                </form>\r\n            </div>\r\n\r\n            {/* Results */}\r\n            <div className=\"overflow-y-auto h-[calc(100vh-80px)] p-4\">\r\n                {isSearching ? (\r\n                    <div className=\"flex justify-center py-10\">\r\n                        <div className=\"w-8 h-8 border-4 border-primary/30 border-t-primary rounded-full animate-spin\"></div>\r\n                    </div>\r\n                ) : results.length > 0 ? (\r\n                    <div className=\"grid grid-cols-1 gap-2\">\r\n                        {results.map((product) => (\r\n                            <div\r\n                                key={product.id}\r\n                                className=\"flex items-center gap-4 p-3 bg-slate-50 dark:bg-slate-800/50 rounded-2xl active:scale-[0.98] transition-all cursor-pointer\"\r\n                                onClick={() => handleSelect(product.id)}\r\n                            >\r\n                                <div className=\"w-16 h-16 bg-white dark:bg-slate-800 rounded-xl p-1 flex items-center justify-center shrink-0 border border-slate-100 dark:border-slate-700\">\r\n                                    <img\r\n                                        src={product.images && product.images.length > 0 ? product.images[0] : ''}\r\n                                        alt={product.name}\r\n                                        className=\"w-full h-full object-contain\"\r\n                                    />\r\n                                </div>\r\n                                <div className=\"flex-1 min-w-0\">\r\n                                    <h4 className=\"font-bold text-sm text-slate-900 dark:text-white line-clamp-2\">{product.name}</h4>\r\n                                    <div className=\"flex items-center gap-2 mt-1\">\r\n                                        <span className=\"text-primary font-bold text-sm\">{formatPrice(product.price)}</span>\r\n                                        {product.originalPrice && (\r\n                                            <span className=\"text-slate-400 text-xs line-through\">{formatPrice(product.originalPrice)}</span>\r\n                                        )}\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-1 mt-1 text-[10px] text-slate-500\">\r\n                                        <span>{product.category}</span>\r\n                                        {product.subcategory && (\r\n                                            <>\r\n                                                <span>•</span>\r\n                                                <span>{product.subcategory}</span>\r\n                                            </>\r\n                                        )}\r\n                                    </div>\r\n                                </div>\r\n                                <span className=\"material-icons-round text-slate-300\">chevron_right</span>\r\n                            </div>\r\n                        ))}\r\n                    </div>\r\n                ) : query.length > 1 ? (\r\n                    <div className=\"text-center py-10 text-slate-500\">\r\n                        <span className=\"material-icons-round text-4xl mb-2 text-slate-300\">search_off</span>\r\n                        <p>No products found for \"{query}\"</p>\r\n                    </div>\r\n                ) : (\r\n                    <div className=\"text-center py-10 text-slate-400\">\r\n                        <span className=\"material-icons-round text-4xl mb-2 text-slate-200 dark:text-slate-800\">search</span>\r\n                        <p>Type to search...</p>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\layout\\NavBar.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":73,"column":29,"nodeType":"JSXOpeningElement","endLine":73,"endColumn":237},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":243,"column":45,"nodeType":"JSXOpeningElement","endLine":243,"endColumn":141}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\nimport React from 'react';\r\nimport Link from 'next/link';\r\nimport { useCart } from '@/context/CartContext';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { Category, searchProducts, Product } from '@/lib/api';\r\nimport { useRouter } from 'next/navigation';\r\nimport { formatPrice } from '@/lib/format';\r\nimport { useUI } from '@/context/UIContext';\r\nimport { useTheme } from 'next-themes';\r\nimport { ThemeTransition } from '@/components/ThemeTransition';\r\n\r\nfunction SearchBar() {\r\n    const router = useRouter();\r\n    const [query, setQuery] = React.useState('');\r\n    const [results, setResults] = React.useState<Product[]>([]);\r\n    const [isSearching, setIsSearching] = React.useState(false);\r\n    const [showDropdown, setShowDropdown] = React.useState(false);\r\n\r\n    // Debounce search\r\n    React.useEffect(() => {\r\n        const timer = setTimeout(async () => {\r\n            if (query.trim().length > 1) {\r\n                setIsSearching(true);\r\n                try {\r\n                    const data = await searchProducts(query);\r\n                    setResults(data);\r\n                    setShowDropdown(true);\r\n                } catch (error) {\r\n                    console.error(error);\r\n                } finally {\r\n                    setIsSearching(false);\r\n                }\r\n            } else {\r\n                setResults([]);\r\n                setShowDropdown(false);\r\n            }\r\n        }, 300);\r\n\r\n        return () => clearTimeout(timer);\r\n    }, [query]);\r\n\r\n    const handleSelect = (productId: number | string) => {\r\n        router.push(`/product/${productId}`);\r\n        setShowDropdown(false);\r\n        setQuery('');\r\n    };\r\n\r\n    return (\r\n        <div className=\"relative w-full group\">\r\n            <span className=\"material-icons-round absolute left-4 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-primary transition-colors\">\r\n                search\r\n            </span>\r\n            <input\r\n                type=\"text\"\r\n                placeholder=\"Search products...\"\r\n                className=\"w-full bg-slate-100 dark:bg-slate-800 border-none rounded-2xl py-3 pl-12 pr-4 text-sm font-medium focus:ring-2 focus:ring-primary/20 transition-all outline-none text-slate-900 dark:text-white\"\r\n                value={query}\r\n                onChange={(e) => setQuery(e.target.value)}\r\n                onFocus={() => query.length > 1 && setShowDropdown(true)}\r\n                onBlur={() => setTimeout(() => setShowDropdown(false), 200)} // Delay to allow click\r\n            />\r\n\r\n            {/* Suggestions Dropdown */}\r\n            {showDropdown && results.length > 0 && (\r\n                <div className=\"absolute top-full left-0 w-full mt-2 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded-2xl shadow-xl overflow-hidden z-[100]\">\r\n                    {results.map((product) => (\r\n                        <div\r\n                            key={product.id}\r\n                            className=\"flex items-center gap-4 p-3 hover:bg-slate-50 dark:hover:bg-slate-700 cursor-pointer transition-colors\"\r\n                            onClick={() => handleSelect(product.id)}\r\n                        >\r\n                            <img src={product.images && product.images.length > 0 ? product.images[0] : ''} alt={product.name} className=\"w-10 h-10 object-contain p-1 bg-white rounded-lg border border-slate-100 dark:border-slate-600\" />\r\n                            <div>\r\n                                <h4 className=\"font-bold text-sm text-slate-900 dark:text-white line-clamp-1\">{product.name}</h4>\r\n                                <div className=\"flex items-center gap-2 text-xs\">\r\n                                    <span className=\"text-primary font-bold\">{formatPrice(product.price)}</span>\r\n                                    {product.category && <span className=\"text-slate-400\">• {product.category}</span>}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n            {showDropdown && query.length > 1 && results.length === 0 && !isSearching && (\r\n                <div className=\"absolute top-full left-0 w-full mt-2 bg-white dark:bg-slate-800 border border-slate-100 dark:border-slate-700 rounded-2xl shadow-xl p-4 text-center text-sm text-slate-500 z-[100]\">\r\n                    No products found.\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function NavBar({ categories }: { categories: Category[] }) {\r\n    const { totalItems } = useCart();\r\n    const { user, signOut } = useAuth();\r\n    // const user = { user_metadata: { full_name: \"Test User\", avatar_url: null } }; const signOut = async () => { };\r\n\r\n    const { setTheme, theme } = useTheme();\r\n    const [mounted, setMounted] = React.useState(false);\r\n\r\n    const [isScrolled, setIsScrolled] = React.useState(false);\r\n    const [isAnimating, setIsAnimating] = React.useState(false);\r\n    const [animationOrigin, setAnimationOrigin] = React.useState({ x: 0, y: 0 });\r\n    const [targetTheme, setTargetTheme] = React.useState<'light' | 'dark'>('light');\r\n\r\n    // Wait for theme to hydrate\r\n    React.useEffect(() => {\r\n        setMounted(true);\r\n    }, []);\r\n\r\n    React.useEffect(() => {\r\n        const handleScroll = () => {\r\n            setIsScrolled(window.scrollY > 10);\r\n        };\r\n        window.addEventListener('scroll', handleScroll);\r\n        return () => window.removeEventListener('scroll', handleScroll);\r\n    }, []);\r\n\r\n    const toggleTheme = (event: React.MouseEvent<HTMLButtonElement>) => {\r\n        if (isAnimating || !mounted) return; // Prevent clicks before theme loads\r\n\r\n        const button = event.currentTarget;\r\n        const rect = button.getBoundingClientRect();\r\n        const x = rect.left + rect.width / 2;\r\n        const y = rect.top + rect.height / 2;\r\n\r\n        const newTheme = theme === 'dark' ? 'light' : 'dark';\r\n\r\n        // Set origin first, then start animation\r\n        setAnimationOrigin({ x, y });\r\n        setTargetTheme(newTheme);\r\n\r\n        // Double RAF to ensure state updates complete before animation\r\n        requestAnimationFrame(() => {\r\n            requestAnimationFrame(() => {\r\n                setIsAnimating(true);\r\n            });\r\n        });\r\n\r\n        // Change theme early (25% through) so navbar changes first\r\n        setTimeout(() => {\r\n            setTheme(newTheme);\r\n        }, 300);\r\n\r\n        // End animation\r\n        setTimeout(() => {\r\n            setIsAnimating(false);\r\n        }, 1200);\r\n    };\r\n\r\n    const { openSearch } = useUI();\r\n\r\n    return (\r\n        <>\r\n            <ThemeTransition\r\n                isAnimating={isAnimating}\r\n                originX={animationOrigin.x}\r\n                originY={animationOrigin.y}\r\n                targetTheme={targetTheme}\r\n            />\r\n            <header className={`sticky top-0 z-50 bg-white/80 dark:bg-slate-800/80 backdrop-blur-md border-b border-slate-100 dark:border-slate-800 transition-all duration-300`}>\r\n                {/* Top Bar */}\r\n                <div className={`max-w-7xl mx-auto px-4 w-full flex items-center justify-between gap-4 transition-all duration-300 ${isScrolled ? 'h-14' : 'h-20'}`}>\r\n                    {/* Logo */}\r\n                    <Link href=\"/\" className={`flex items-center gap-2 shrink-0 cursor-pointer transition-all duration-500 origin-left ${isScrolled ? 'scale-75' : 'scale-100'}`}>\r\n                        <div className=\"w-10 h-10 bg-primary rounded-xl flex items-center justify-center shadow-lg shadow-primary/20\">\r\n                            <span className=\"material-icons-round text-white\">eco</span>\r\n                        </div>\r\n                        <span className=\"text-xl font-extrabold tracking-tight text-slate-900 dark:text-white\">\r\n                            Daily<span className=\"text-primary\">Fresh</span>\r\n                        </span>\r\n                    </Link>\r\n\r\n                    {/* Search Bar - Hidden on Mobile */}\r\n                    <div className=\"hidden md:flex flex-1 max-w-lg mx-8 z-50\">\r\n                        <SearchBar />\r\n                    </div>\r\n\r\n                    {/* Mobile Actions (Search & DarkMode) */}\r\n                    <div className=\"flex items-center gap-2 md:hidden\">\r\n                        <button\r\n                            className=\"w-10 h-10 rounded-xl bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors\"\r\n                            onClick={openSearch}\r\n                        >\r\n                            <span className=\"material-icons-round text-xl\">search</span>\r\n                        </button>\r\n                        <button\r\n                            className=\"w-10 h-10 rounded-xl bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors\"\r\n                            onClick={toggleTheme}\r\n                        >\r\n                            <span className=\"material-icons-round text-xl\">\r\n                                {mounted ? (theme === 'dark' ? 'light_mode' : 'dark_mode') : 'dark_mode'}\r\n                            </span>\r\n                        </button>\r\n                        {user ? (\r\n                            <button\r\n                                className=\"w-10 h-10 rounded-xl bg-red-50 dark:bg-red-900/20 flex items-center justify-center text-red-500 hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors\"\r\n                                onClick={signOut}\r\n                            >\r\n                                <span className=\"material-icons-round text-xl\">logout</span>\r\n                            </button>\r\n                        ) : (\r\n                            <Link href=\"/login\" className=\"px-3 py-2 rounded-xl bg-primary/10 text-primary hover:bg-primary hover:text-white transition-all\">\r\n                                <span className=\"text-xs font-bold\">Login/Signup</span>\r\n                            </Link>\r\n                        )}\r\n                    </div>\r\n\r\n                    {/* Desktop Actions */}\r\n                    <div className=\"flex items-center gap-4 hidden md:flex\">\r\n                        <button\r\n                            className=\"w-10 h-10 rounded-xl bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-600 dark:text-slate-400 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors\"\r\n                            onClick={toggleTheme}\r\n                        >\r\n                            <span className=\"material-icons-round text-xl\">\r\n                                {mounted ? (theme === 'dark' ? 'light_mode' : 'dark_mode') : 'dark_mode'}\r\n                            </span>\r\n                        </button>\r\n\r\n                        <Link href=\"/cart\" className=\"relative cursor-pointer\" id=\"cart-icon-container\">\r\n                            <div className=\"w-10 h-10 rounded-xl bg-slate-100 dark:bg-slate-800 flex items-center justify-center text-slate-600 dark:text-slate-400 hover:bg-primary hover:text-white transition-all group\">\r\n                                <span className=\"material-icons-round text-xl group-hover:scale-110 transition-transform\">shopping_cart</span>\r\n                            </div>\r\n                            {totalItems > 0 && (\r\n                                <span className=\"absolute -top-1 -right-1 bg-primary text-white text-[10px] font-bold w-5 h-5 rounded-full flex items-center justify-center border-2 border-white dark:border-slate-900\">\r\n                                    {totalItems}\r\n                                </span>\r\n                            )}\r\n                        </Link>\r\n\r\n                        {user ? (\r\n                            <div className=\"flex items-center gap-3\">\r\n\r\n\r\n                                <div className=\"hidden lg:block text-right\">\r\n                                    <p className=\"text-sm font-bold text-slate-900 dark:text-white\">{user.user_metadata?.full_name || 'User'}</p>\r\n                                    <button onClick={() => signOut()} className=\"text-xs text-slate-500 hover:text-red-500 font-medium\">Sign Out</button>\r\n                                </div>\r\n                                <Link href=\"/profile\" className=\"flex items-center gap-2 pl-1 pr-1 py-1 rounded-full border border-slate-200 dark:border-slate-700 hover:bg-slate-50 dark:hover:bg-slate-800 transition-colors cursor-pointer\">\r\n                                    <div className=\"w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center overflow-hidden\">\r\n                                        {user.user_metadata?.avatar_url ? (\r\n                                            <img src={user.user_metadata.avatar_url} alt=\"Profile\" className=\"w-full h-full object-cover\" />\r\n                                        ) : (\r\n                                            <span className=\"material-icons-round text-slate-400 text-lg\">person</span>\r\n                                        )}\r\n                                    </div>\r\n                                </Link>\r\n                            </div>\r\n                        ) : (\r\n                            <Link href=\"/login\" className=\"flex items-center gap-2 px-4 py-2 rounded-xl bg-primary/10 text-primary hover:bg-primary hover:text-white transition-all\">\r\n                                <span className=\"text-sm font-bold\">Login</span>\r\n                            </Link>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* Secondary Nav */}\r\n                <nav className=\"bg-white dark:bg-slate-900 border-b border-slate-100 dark:border-slate-800 hidden md:block\">\r\n                    <div className=\"max-w-7xl mx-auto px-4 relative flex flex-wrap items-center justify-center gap-x-1 lg:gap-x-4\">\r\n                        {categories.map((category) => {\r\n                            const slug = category.name.toLowerCase().replace(/ & /g, '-').replace(/ /g, '-');\r\n                            return (\r\n                                <div key={category.name} className=\"group relative\">\r\n                                    <Link\r\n                                        href={`/category/${slug}`}\r\n                                        className=\"px-3 lg:px-5 py-3 block text-xs lg:text-sm font-medium text-slate-600 dark:text-slate-400 hover:text-primary transition-colors border-b-2 border-transparent hover:border-primary whitespace-nowrap\"\r\n                                    >\r\n                                        {category.name}\r\n                                    </Link>\r\n\r\n                                    {/* Dropdown Menu */}\r\n                                    <div className=\"absolute top-full left-0 w-56 bg-white dark:bg-slate-900 shadow-xl rounded-b-2xl border-x border-b border-slate-100 dark:border-slate-800 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 transform translate-y-2 group-hover:translate-y-0 z-50\">\r\n                                        <div className=\"p-2 space-y-1\">\r\n                                            {category.subcategories.map((sub) => (\r\n                                                <Link\r\n                                                    key={sub.name}\r\n                                                    href={`/category/${slug}?subcategory=${encodeURIComponent(sub.name)}`}\r\n                                                    className=\"block px-4 py-2.5 text-xs lg:text-sm text-slate-600 dark:text-slate-300 hover:bg-slate-50 dark:hover:bg-slate-800 hover:text-primary dark:hover:text-primary rounded-xl transition-colors\"\r\n                                                >\r\n                                                    {sub.name}\r\n                                                </Link>\r\n                                            ))}\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        })}\r\n                    </div>\r\n                </nav>\r\n            </header>\r\n        </>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\product\\ProductCard.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CartItem' is defined but never used.","line":5,"column":19,"nodeType":"Identifier","messageId":"unusedVar","endLine":5,"endColumn":27,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CartItem"},"fix":{"range":[92,102],"text":""},"desc":"Remove unused variable \"CartItem\"."}]},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":105,"column":25,"nodeType":"JSXOpeningElement","endLine":109,"endColumn":27}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React from 'react';\r\nimport Link from 'next/link';\r\nimport { useCart, CartItem } from '@/context/CartContext';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { useWishlist } from '@/context/WishlistContext';\r\nimport { formatPrice } from '@/lib/format';\r\n\r\nimport { useFlyToCart } from '@/context/FlyToCartContext';\r\n\r\nexport interface Product {\r\n    id: number | string;\r\n    name: string;\r\n    price: number;\r\n    images: string[];\r\n    category?: string;\r\n    quantity?: string; // Display quantity e.g. \"1kg\"\r\n    originalPrice?: number;\r\n    discountPercent?: number;\r\n    specialCategoryLabel?: string;\r\n    description?: string;\r\n}\r\n\r\ninterface ProductCardProps {\r\n    product: Product;\r\n    variant?: 'default' | 'wishlist';\r\n}\r\n\r\nexport function ProductCard({ product, variant = 'default' }: ProductCardProps) {\r\n    const { addItem } = useCart();\r\n    const { user } = useAuth();\r\n    const { addToWishlist, removeFromWishlist, isInWishlist } = useWishlist();\r\n    const { triggerFly } = useFlyToCart();\r\n\r\n    // Local state for quantity\r\n    const [quantity, setQuantity] = React.useState(1);\r\n\r\n    const isWishlisted = isInWishlist(Number(product.id));\r\n\r\n    const handleWishlistClick = async (e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        if (!user) {\r\n            alert(\"Please sign in to add items to your wishlist.\");\r\n            return;\r\n        }\r\n\r\n        if (isWishlisted) {\r\n            await removeFromWishlist(Number(product.id));\r\n        } else {\r\n            await addToWishlist(Number(product.id));\r\n        }\r\n    };\r\n\r\n    const handleDeleteClick = async (e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n\r\n        await removeFromWishlist(Number(product.id));\r\n    };\r\n\r\n    const handleIncrement = (e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        setQuantity(prev => prev + 1);\r\n    };\r\n\r\n    const handleDecrement = (e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        setQuantity(prev => Math.max(1, prev - 1));\r\n    };\r\n\r\n    const handleAddToCart = (e: React.MouseEvent) => {\r\n        e.preventDefault(); // Prevent navigation to product detail\r\n        e.stopPropagation();\r\n\r\n        addItem({\r\n            id: String(product.id), // Ensure string ID for consistency\r\n            name: product.name,\r\n            price: product.price,\r\n            images: product.images || [],\r\n            quantity: quantity,\r\n            category: product.category,\r\n            pack: product.quantity,\r\n            color: '' // Handle undefined color explicitly\r\n        });\r\n\r\n        const imageSrc = product.images && product.images.length > 0 ? product.images[0] : '/placeholder-food.png';\r\n        triggerFly(e.currentTarget as HTMLElement, imageSrc, quantity);\r\n\r\n        // Optional: Reset quantity after adding? Or keep it? keeping it for now.\r\n        // setQuantity(1); \r\n    };\r\n\r\n    return (\r\n        <div className=\"bg-white dark:bg-slate-800 rounded-3xl p-4 border border-slate-100 dark:border-slate-700 hover:shadow-xl hover:shadow-slate-200/50 dark:hover:shadow-none transition-all group relative h-full flex flex-col\">\r\n            <Link href={`/product/${product.id}`} className=\"flex flex-col h-full\">\r\n                {/* Image & Badges */}\r\n                {/* Image & Badges */}\r\n                <div className=\"relative h-40 w-full mb-4 group-hover:scale-105 transition-transform duration-500 bg-gray-50 rounded-lg flex items-center justify-center overflow-hidden\">\r\n                    {product.images && product.images.length > 0 && product.images[0] ? (\r\n                        <img\r\n                            alt={product.name}\r\n                            className=\"w-full h-full object-contain\"\r\n                            src={product.images[0]}\r\n                        />\r\n                    ) : (\r\n                        <span className=\"material-symbols-outlined text-4xl text-gray-300\">image</span>\r\n                    )}\r\n\r\n                    {/* Discount Badge */}\r\n                    {product.discountPercent && product.discountPercent > 0 && (\r\n                        <div className=\"absolute top-0 left-0 bg-red-500/90 backdrop-blur-sm text-white text-[10px] font-bold px-2 py-1 rounded-full shadow-sm z-10\">\r\n                            {product.discountPercent}% OFF\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Special Category Badge */}\r\n                    {product.specialCategoryLabel && (\r\n                        <div className=\"absolute top-0 left-0 mt-6 bg-yellow-400/90 backdrop-blur-sm text-slate-900 text-[10px] font-bold px-2 py-1 rounded-full shadow-sm z-10\">\r\n                            {product.specialCategoryLabel}\r\n                        </div>\r\n                    )}\r\n\r\n                    {variant === 'wishlist' ? (\r\n                        <button\r\n                            onClick={handleDeleteClick}\r\n                            className=\"absolute top-0 right-0 p-2 rounded-full transition-colors bg-red-50 text-red-500 hover:bg-red-100\"\r\n                            title=\"Remove from wishlist\"\r\n                        >\r\n                            <span className=\"material-icons-round text-sm\">delete_outline</span>\r\n                        </button>\r\n                    ) : (\r\n                        <button\r\n                            onClick={handleWishlistClick}\r\n                            className={`absolute top-0 right-0 p-2 rounded-full transition-colors ${isWishlisted ? 'bg-red-50 text-red-500' : 'bg-slate-100 dark:bg-slate-700 text-slate-400 hover:text-red-500'}`}\r\n                        >\r\n                            <span className={`material-icons-round text-sm ${isWishlisted ? 'material-icons' : 'material-icons-outlined'}`}>\r\n                                {isWishlisted ? 'favorite' : 'favorite_border'}\r\n                            </span>\r\n                        </button>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"space-y-2 flex-1 flex flex-col\">\r\n                    {product.category && (\r\n                        <p className=\"text-xs font-bold text-primary uppercase tracking-wider\">{product.category}</p>\r\n                    )}\r\n                    <h3 className=\"font-bold text-slate-900 dark:text-white line-clamp-1 group-hover:text-primary transition-colors\">\r\n                        {product.name}\r\n                    </h3>\r\n                    {product.quantity && <p className=\"text-xs text-slate-500 dark:text-slate-400\">{product.quantity}</p>}\r\n\r\n                    <div className=\"mt-auto pt-2 space-y-3\">\r\n                        {/* Price Area */}\r\n                        <div className=\"flex items-center justify-between\">\r\n                            <div className=\"flex flex-col\">\r\n                                <div className=\"flex items-baseline gap-2\">\r\n                                    <span className={`font-bold text-lg ${product.discountPercent ? 'text-red-500' : 'text-slate-900 dark:text-white'}`}>\r\n                                        {formatPrice(product.price)}\r\n                                    </span>\r\n                                    {product.originalPrice && (\r\n                                        <span className=\"text-xs text-slate-400 line-through decoration-slate-400/50\">\r\n                                            {formatPrice(product.originalPrice)}\r\n                                        </span>\r\n                                    )}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Quantity Selector */}\r\n                            <div className=\"flex items-center bg-slate-100 dark:bg-slate-700 rounded-lg p-1\">\r\n                                <button\r\n                                    onClick={handleDecrement}\r\n                                    className=\"w-6 h-6 flex items-center justify-center rounded-md bg-white dark:bg-slate-600 shadow-sm text-slate-600 dark:text-slate-200 hover:text-primary active:scale-95 transition-all\"\r\n                                >\r\n                                    <span className=\"material-icons-round text-xs\">remove</span>\r\n                                </button>\r\n                                <span className=\"w-8 text-center text-sm font-bold text-slate-900 dark:text-white\">{quantity}</span>\r\n                                <button\r\n                                    onClick={handleIncrement}\r\n                                    className=\"w-6 h-6 flex items-center justify-center rounded-md bg-white dark:bg-slate-600 shadow-sm text-slate-600 dark:text-slate-200 hover:text-primary active:scale-95 transition-all\"\r\n                                >\r\n                                    <span className=\"material-icons-round text-xs\">add</span>\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Add to Cart Button */}\r\n                        <button\r\n                            onClick={handleAddToCart}\r\n                            className=\"w-full py-2 bg-primary text-white font-bold rounded-xl shadow-lg shadow-primary/30 hover:shadow-primary/50 hover:-translate-y-0.5 active:translate-y-0 active:shadow-none transition-all flex items-center justify-center gap-2\"\r\n                        >\r\n                            <span className=\"material-icons-round text-sm\">shopping_cart</span>\r\n                            <span>Add to Cart</span>\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </Link>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\product\\ProductInfo.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":87,"column":21,"nodeType":"JSXOpeningElement","endLine":92,"endColumn":23},{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":122,"column":33,"nodeType":"JSXOpeningElement","endLine":127,"endColumn":35}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\nimport { useState } from 'react';\r\nimport { useCart } from '@/context/CartContext';\r\nimport { Product } from '@/lib/api';\r\nimport { formatPrice } from '@/lib/format';\r\n\r\nimport { useWishlist } from '@/context/WishlistContext';\r\n\r\nimport { useFlyToCart } from '@/context/FlyToCartContext';\r\n\r\nexport function ProductInfo({ product }: { product: Product }) {\r\n    const [quantity, setQuantity] = useState(1);\r\n    const [selectedColor, setSelectedColor] = useState<string | null>(product.colors && product.colors.length > 0 ? product.colors[0] : null);\r\n    const [selectedSize, setSelectedSize] = useState<string | null>(product.sizes && product.sizes.length > 0 ? product.sizes[0] : null);\r\n\r\n    // Wishlist\r\n    const { addToWishlist, removeFromWishlist, isInWishlist } = useWishlist();\r\n    const isWishlisted = isInWishlist(Number(product.id));\r\n\r\n    const handleWishlistClick = async (e: React.MouseEvent) => {\r\n        e.preventDefault();\r\n        e.stopPropagation();\r\n        if (isWishlisted) {\r\n            await removeFromWishlist(Number(product.id));\r\n        } else {\r\n            await addToWishlist(Number(product.id));\r\n        }\r\n    };\r\n\r\n    // Description Toggle\r\n    const [isExpanded, setIsExpanded] = useState(false);\r\n    const description = product.description || `Enjoy the finest ${product.name}, sourced with care to bring nature's best to your table. Perfect for your daily needs.`;\r\n\r\n    // Image Gallery State\r\n    const [selectedImage, setSelectedImage] = useState<string>(product.images && product.images.length > 0 ? product.images[0] : '');\r\n\r\n    const { addItem } = useCart();\r\n    const { triggerFly } = useFlyToCart();\r\n\r\n    const isOutOfStock = product.stockQuantity === 0;\r\n\r\n    const handleAddToCart = (e: React.MouseEvent<HTMLElement>) => {\r\n        addItem({\r\n            id: product.id,\r\n            name: product.name,\r\n            price: product.price,\r\n            images: product.images || [],\r\n            quantity: quantity,\r\n            category: product.category,\r\n            pack: product.quantity,\r\n            color: selectedColor || undefined,\r\n            size: selectedSize || undefined\r\n        });\r\n\r\n        triggerFly(e.currentTarget, selectedImage || '/placeholder-food.png', quantity);\r\n    };\r\n\r\n    return (\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-12\">\r\n            {/* Image Gallery Section */}\r\n            <div className=\"space-y-4\">\r\n                {/* Main Image */}\r\n                <div className=\"bg-white dark:bg-slate-800 rounded-3xl p-8 border border-slate-100 dark:border-slate-700 shadow-sm relative group overflow-hidden h-[500px] flex items-center justify-center\">\r\n                    {/* Discount Badge */}\r\n                    {product.discountPercent && product.discountPercent > 0 && (\r\n                        <div className=\"absolute top-4 left-4 bg-red-500 text-white text-xs font-bold px-3 py-1.5 rounded-full z-10 shadow-sm\">\r\n                            {product.discountPercent}% OFF\r\n                        </div>\r\n                    )}\r\n                    {/* Special Category Badge - Moved to ensure no overlap with Wishlist */}\r\n                    {product.specialCategoryLabel && (\r\n                        <div className={`absolute left-4 bg-yellow-400 text-slate-900 text-xs font-bold px-3 py-1.5 rounded-full z-10 shadow-sm ${product.discountPercent ? 'top-14' : 'top-4'}`}>\r\n                            {product.specialCategoryLabel}\r\n                        </div>\r\n                    )}\r\n\r\n                    {/* Wishlist Button */}\r\n                    <button\r\n                        onClick={handleWishlistClick}\r\n                        className=\"absolute top-4 right-4 bg-white/90 dark:bg-slate-700/90 p-2.5 rounded-full shadow-sm text-slate-400 dark:text-slate-300 hover:text-red-500 hover:bg-red-50 dark:hover:bg-slate-600 transition-all z-20 group/wishlist\"\r\n                    >\r\n                        <span className={`material-icons-round text-xl transform group-hover/wishlist:scale-110 transition-transform ${isWishlisted ? 'text-red-500' : ''}`}>\r\n                            {isWishlisted ? 'favorite' : 'favorite_border'}\r\n                        </span>\r\n                    </button>\r\n\r\n                    <img\r\n                        src={selectedImage || '/placeholder-food.png'}\r\n                        onError={(e) => { e.currentTarget.src = 'https://placehold.co/600x400?text=No+Image'; }}\r\n                        alt={product.name}\r\n                        className=\"w-full h-full object-contain group-hover:scale-105 transition-transform duration-500 animate-scale-up\"\r\n                    />\r\n\r\n                    {/* Image Dots Indicator */}\r\n                    {product.images && product.images.length > 1 && (\r\n                        <div className=\"absolute bottom-4 left-1/2 -translate-x-1/2 flex gap-2 z-10 bg-black/20 backdrop-blur-sm px-3 py-1.5 rounded-full\">\r\n                            {product.images.filter(img => img).map((img, idx) => (\r\n                                <button\r\n                                    key={idx}\r\n                                    onClick={(e) => { e.stopPropagation(); setSelectedImage(img); }}\r\n                                    className={`w-2 h-2 rounded-full transition-all ${selectedImage === img ? 'bg-white scale-125' : 'bg-white/50 hover:bg-white/80'}`}\r\n                                    aria-label={`View image ${idx + 1}`}\r\n                                />\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Thumbnails */}\r\n                {/* Ensure we only show thumbnails if we actually have > 1 VALID images */}\r\n                {product.images && product.images.length > 1 && (\r\n                    <div className=\"flex gap-4 overflow-x-auto pb-2 scrollbar-hide py-2 px-1\">\r\n                        {product.images.filter(img => img).map((img, idx) => (\r\n                            <button\r\n                                key={idx}\r\n                                onClick={() => setSelectedImage(img)}\r\n                                className={`relative w-20 h-20 rounded-xl border-2 p-1 flex-shrink-0 transition-all overflow-hidden bg-white dark:bg-slate-800 ${selectedImage === img\r\n                                    ? 'border-primary ring-2 ring-primary/20'\r\n                                    : 'border-slate-100 dark:border-slate-700 hover:border-slate-300 dark:hover:border-slate-600'\r\n                                    }`}\r\n                            >\r\n                                <img\r\n                                    src={img}\r\n                                    onError={(e) => { e.currentTarget.style.display = 'none'; }}\r\n                                    alt={`View ${idx + 1}`}\r\n                                    className=\"w-full h-full object-contain rounded-lg\"\r\n                                />\r\n                            </button>\r\n                        ))}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            {/* Product Details */}\r\n            <div className=\"flex flex-col h-full\">\r\n                <div className=\"mb-2\">\r\n                    {isOutOfStock ? (\r\n                        <span className=\"px-2.5 py-1 bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-400 text-xs font-bold rounded-full uppercase tracking-wider\">Out of Stock</span>\r\n                    ) : (\r\n                        <span className=\"px-2.5 py-1 bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-400 text-xs font-bold rounded-full uppercase tracking-wider\">In Stock ({product.stockQuantity})</span>\r\n                    )}\r\n                </div>\r\n                <h1 className=\"text-4xl font-bold text-slate-900 dark:text-white mb-2\">{product.name}</h1>\r\n                <div className=\"flex items-baseline gap-2 mb-6\">\r\n                    <span className=\"text-3xl font-bold text-primary\">{formatPrice(product.price)}</span>\r\n                    <span className=\"text-slate-500 dark:text-slate-400 text-lg\">/ {product.quantity || 'unit'}</span>\r\n                </div>\r\n                <div className=\"mb-8\">\r\n                    <p className={`text-slate-600 dark:text-slate-300 leading-relaxed whitespace-pre-line inline`}>\r\n                        {isExpanded ? description : description.slice(0, 150) + (description.length > 150 ? '...' : '')}\r\n                    </p>\r\n                    {description.length > 150 && (\r\n                        <button\r\n                            onClick={() => setIsExpanded(!isExpanded)}\r\n                            className=\"ml-2 text-primary font-bold hover:underline text-sm inline-block\"\r\n                        >\r\n                            {isExpanded ? 'See Less' : 'See All'}\r\n                        </button>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Color Selection */}\r\n                {product.colors && product.colors.length > 0 && (\r\n                    <div className=\"mb-8\">\r\n                        <h3 className=\"text-sm font-bold text-slate-900 dark:text-white uppercase tracking-wider mb-3\">Available Colors</h3>\r\n                        <div className=\"flex flex-wrap gap-3\">\r\n                            {product.colors.map((color) => (\r\n                                <button\r\n                                    key={color}\r\n                                    onClick={() => setSelectedColor(color)}\r\n                                    className={`px-4 py-2 rounded-xl text-sm font-bold border-2 transition-all ${selectedColor === color\r\n                                        ? 'border-primary bg-primary/10 text-primary'\r\n                                        : 'border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:border-primary/50'\r\n                                        }`}\r\n                                >\r\n                                    {color}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Size Selection */}\r\n                {product.sizes && product.sizes.length > 0 && (\r\n                    <div className=\"mb-8\">\r\n                        <h3 className=\"text-sm font-bold text-slate-900 dark:text-white uppercase tracking-wider mb-3\">Available Sizes</h3>\r\n                        <div className=\"flex flex-wrap gap-3\">\r\n                            {product.sizes.map((size) => (\r\n                                <button\r\n                                    key={size}\r\n                                    onClick={() => setSelectedSize(size)}\r\n                                    className={`min-w-[3rem] px-4 py-2 rounded-xl text-sm font-bold border-2 transition-all ${selectedSize === size\r\n                                        ? 'border-primary bg-primary/10 text-primary'\r\n                                        : 'border-slate-200 dark:border-slate-700 text-slate-600 dark:text-slate-400 hover:border-primary/50'\r\n                                        }`}\r\n                                >\r\n                                    {size}\r\n                                </button>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {/* Dynamic Product Info */}\r\n                <div className=\"space-y-6 mb-8\">\r\n                    {/* Rating & Vendor Row */}\r\n                    <div className=\"flex items-start justify-between gap-4 flex-wrap\">\r\n                        {/* Rating */}\r\n                        <div className=\"flex items-center gap-3 p-3 bg-amber-50 dark:bg-amber-900/10 rounded-xl border border-amber-100 dark:border-amber-900/30\">\r\n                            <div className=\"w-10 h-10 bg-amber-100 dark:bg-amber-900/30 rounded-lg flex items-center justify-center text-amber-500\">\r\n                                <span className=\"material-icons-round\">star</span>\r\n                            </div>\r\n                            <div>\r\n                                <div className=\"flex items-baseline gap-1.5\">\r\n                                    <span className=\"text-xl font-black text-slate-900 dark:text-white\">{product.average_rating || 0}</span>\r\n                                    <span className=\"text-xs font-bold text-slate-400\">/ 5</span>\r\n                                </div>\r\n                                <p className=\"text-xs font-medium text-amber-600 dark:text-amber-400\">{product.reviews_count || 0} Verified Reviews</p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Vendor */}\r\n                        <div className=\"flex items-center gap-3 p-3 bg-blue-50 dark:bg-blue-900/10 rounded-xl border border-blue-100 dark:border-blue-900/30\">\r\n                            <div className=\"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center text-blue-500\">\r\n                                <span className=\"material-icons-round\">storefront</span>\r\n                            </div>\r\n                            <div>\r\n                                <p className=\"text-xs font-bold text-slate-400 uppercase tracking-wide mb-0.5\">Sold By</p>\r\n                                <p className=\"text-sm font-black text-slate-900 dark:text-white\">{product.shop_name || product.vendor_name || 'Daily Fresh'}</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Shipping Info */}\r\n                    <div className=\"bg-slate-50 dark:bg-slate-800/50 rounded-2xl border border-slate-100 dark:border-slate-700 overflow-hidden\">\r\n                        <div className=\"flex items-center gap-2 px-4 py-3 border-b border-slate-100 dark:border-slate-700 bg-white dark:bg-slate-800\">\r\n                            <span className=\"material-icons-round text-slate-400 text-sm\">local_shipping</span>\r\n                            <h4 className=\"text-sm font-bold text-slate-900 dark:text-white\">Delivery Charges</h4>\r\n                        </div>\r\n                        <div className=\"flex divide-x divide-slate-100 dark:divide-slate-700\">\r\n                            <div className=\"flex-1 p-3 text-center\">\r\n                                <p className=\"text-xs text-slate-500 dark:text-slate-400 mb-1\">Inside Dhaka</p>\r\n                                <p className=\"font-bold text-slate-900 dark:text-white\">{formatPrice(product.shipping_inside_dhaka || 60)}</p>\r\n                            </div>\r\n                            <div className=\"flex-1 p-3 text-center\">\r\n                                <p className=\"text-xs text-slate-500 dark:text-slate-400 mb-1\">Outside Dhaka</p>\r\n                                <p className=\"font-bold text-slate-900 dark:text-white\">{formatPrice(product.shipping_outside_dhaka || 120)}</p>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"mt-auto pt-8 border-t border-slate-200 dark:border-slate-800\">\r\n                    <div className=\"flex flex-col md:flex-row items-stretch md:items-center gap-4 md:gap-6\">\r\n                        <div className=\"flex items-center bg-slate-100 dark:bg-slate-800 rounded-xl md:rounded-full p-1 justify-between md:w-36\">\r\n                            <button\r\n                                onClick={() => setQuantity(Math.max(1, quantity - 1))}\r\n                                disabled={isOutOfStock}\r\n                                className=\"w-12 h-12 md:w-10 md:h-10 flex items-center justify-center bg-white dark:bg-slate-700 rounded-lg md:rounded-full shadow-sm hover:bg-slate-50 dark:hover:bg-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                            >\r\n                                <span className=\"material-icons-round text-sm\">remove</span>\r\n                            </button>\r\n                            <span className=\"font-bold text-lg px-2 text-slate-900 dark:text-white\">{quantity}</span>\r\n                            <button\r\n                                onClick={() => setQuantity(quantity + 1)}\r\n                                disabled={isOutOfStock || quantity >= product.stockQuantity}\r\n                                className=\"w-12 h-12 md:w-10 md:h-10 flex items-center justify-center bg-primary text-white rounded-lg md:rounded-full shadow-lg shadow-green-500/20 hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                            >\r\n                                <span className=\"material-icons-round text-sm\">add</span>\r\n                            </button>\r\n                        </div>\r\n                        <button\r\n                            onClick={handleAddToCart}\r\n                            disabled={isOutOfStock}\r\n                            className=\"flex-1 bg-primary text-white font-bold py-4 px-8 rounded-xl md:rounded-full shadow-xl shadow-green-500/20 hover:scale-[1.02] active:scale-[0.98] transition-all flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none text-lg md:text-base\"\r\n                        >\r\n                            <span className=\"material-icons-round\">shopping_basket</span>\r\n                            {isOutOfStock ? 'Out of Stock' : 'Add to cart'}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\product\\RelatedProducts.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\product\\Reviews.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'stats' is assigned a value but never used.","line":18,"column":12,"nodeType":"Identifier","messageId":"unusedVar","endLine":18,"endColumn":17},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'checkEligibility' and 'loadReviews'. Either include them or remove the dependency array.","line":36,"column":8,"nodeType":"ArrayExpression","endLine":36,"endColumn":25,"suggestions":[{"desc":"Update the dependencies array to be: [checkEligibility, loadReviews, productId, user]","fix":{"range":[1189,1206],"text":"[checkEligibility, loadReviews, productId, user]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport {\r\n    checkReviewEligibility,\r\n    submitReview,\r\n    getProductReviews,\r\n    getProductReviewStats,\r\n    type Review,\r\n    type ReviewStats\r\n} from '@/actions/reviews';\r\nimport Link from 'next/link';\r\n\r\nexport function Reviews({ productId }: { productId: number | string }) {\r\n    const { user } = useAuth();\r\n    const [reviews, setReviews] = useState<Review[]>([]);\r\n    const [stats, setStats] = useState<ReviewStats>({\r\n        averageRating: 0,\r\n        totalReviews: 0,\r\n        ratingDistribution: { 1: 0, 2: 0, 3: 0, 4: 0, 5: 0 }\r\n    });\r\n    const [loading, setLoading] = useState(true);\r\n    const [submitting, setSubmitting] = useState(false);\r\n    const [rating, setRating] = useState(5);\r\n    const [comment, setComment] = useState('');\r\n    const [canReview, setCanReview] = useState(false);\r\n    const [checkingEligibility, setCheckingEligibility] = useState(false);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        loadReviews();\r\n        if (user) {\r\n            checkEligibility();\r\n        }\r\n    }, [productId, user]);\r\n\r\n    const checkEligibility = async () => {\r\n        if (!user) return;\r\n        setCheckingEligibility(true);\r\n        try {\r\n            const allowed = await checkReviewEligibility(user.id, productId);\r\n            setCanReview(allowed);\r\n        } catch (error) {\r\n            console.error('Error checking review eligibility:', error);\r\n        } finally {\r\n            setCheckingEligibility(false);\r\n        }\r\n    };\r\n\r\n    const loadReviews = async () => {\r\n        try {\r\n            setLoading(true);\r\n            const [reviewsData, statsData] = await Promise.all([\r\n                getProductReviews(productId),\r\n                getProductReviewStats(productId)\r\n            ]);\r\n            setReviews(reviewsData);\r\n            setStats(statsData);\r\n        } catch (error) {\r\n            console.error('Error loading reviews:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!user) return;\r\n\r\n        setSubmitting(true);\r\n        setError(null);\r\n\r\n        const result = await submitReview(user.id, productId, rating, comment);\r\n\r\n        if (result.success) {\r\n            setComment('');\r\n            setRating(5);\r\n            await loadReviews();\r\n            await checkEligibility();\r\n        } else {\r\n            setError(result.error || 'Failed to submit review');\r\n        }\r\n\r\n        setSubmitting(false);\r\n    };\r\n\r\n    return (\r\n        <section className=\"py-12 border-t border-slate-100 dark:border-slate-700\">\r\n            <h2 className=\"text-2xl font-bold mb-8 text-slate-900 dark:text-white\">Customer Reviews</h2>\r\n\r\n            {/* Rating Summary - Removed as per request */}\r\n\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-12\">\r\n                {/* Reviews List */}\r\n                <div className=\"lg:col-span-2 space-y-6\">\r\n                    {loading ? (\r\n                        <div className=\"flex gap-4 animate-pulse\">\r\n                            <div className=\"w-12 h-12 bg-slate-200 dark:bg-slate-700 rounded-full\"></div>\r\n                            <div className=\"flex-1 space-y-2\">\r\n                                <div className=\"h-4 bg-slate-200 dark:bg-slate-700 rounded w-1/4\"></div>\r\n                                <div className=\"h-4 bg-slate-200 dark:bg-slate-700 rounded w-full\"></div>\r\n                            </div>\r\n                        </div>\r\n                    ) : reviews.length === 0 ? (\r\n                        <p className=\"text-slate-500 italic\">No reviews yet. Be the first to review!</p>\r\n                    ) : (\r\n                        reviews.map((review) => (\r\n                            <div key={review.id} className=\"flex gap-4\">\r\n                                <div className=\"w-12 h-12 rounded-full bg-slate-100 dark:bg-slate-800 flex items-center justify-center overflow-hidden border border-slate-200 dark:border-slate-700 shrink-0\">\r\n                                    <span className=\"material-icons-round text-slate-400\">person</span>\r\n                                </div>\r\n                                <div className=\"flex-1\">\r\n                                    <div className=\"flex items-center gap-2 mb-1\">\r\n                                        <h4 className=\"font-bold text-slate-900 dark:text-white\">\r\n                                            {review.User?.name || 'Anonymous'}\r\n                                        </h4>\r\n                                        <span className=\"text-xs text-slate-400\">\r\n                                            • {new Date(review.created_at).toLocaleDateString()}\r\n                                        </span>\r\n                                    </div>\r\n                                    <div className=\"flex items-center gap-1 mb-2\">\r\n                                        {[...Array(5)].map((_, i) => (\r\n                                            <span\r\n                                                key={i}\r\n                                                className={`material-icons-round text-sm ${i < review.rating\r\n                                                    ? 'text-yellow-400'\r\n                                                    : 'text-slate-200 dark:text-slate-700'\r\n                                                    }`}\r\n                                            >\r\n                                                star\r\n                                            </span>\r\n                                        ))}\r\n                                    </div>\r\n                                    <p className=\"text-slate-600 dark:text-slate-300 leading-relaxed\">\r\n                                        {review.comment}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n                        ))\r\n                    )}\r\n                </div>\r\n\r\n                {/* Write Review Form */}\r\n                <div className=\"bg-slate-50 dark:bg-slate-800/50 rounded-2xl p-6 h-fit border border-slate-100 dark:border-slate-700\">\r\n                    <h3 className=\"text-lg font-bold mb-4 text-slate-900 dark:text-white\">Write a Review</h3>\r\n                    {checkingEligibility ? (\r\n                        <div className=\"flex gap-2 items-center text-slate-500 text-sm\">\r\n                            <span className=\"w-4 h-4 border-2 border-primary border-t-transparent rounded-full animate-spin\"></span>\r\n                            Checking eligibility...\r\n                        </div>\r\n                    ) : user ? (\r\n                        canReview ? (\r\n                            <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                                {error && (\r\n                                    <div className=\"p-3 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg text-red-600 dark:text-red-400 text-sm\">\r\n                                        {error}\r\n                                    </div>\r\n                                )}\r\n                                <div>\r\n                                    <label className=\"block text-sm font-semibold mb-2 text-slate-700 dark:text-slate-300\">\r\n                                        Rating\r\n                                    </label>\r\n                                    <div className=\"flex items-center gap-1\">\r\n                                        {[1, 2, 3, 4, 5].map((star) => (\r\n                                            <button\r\n                                                key={star}\r\n                                                type=\"button\"\r\n                                                onClick={() => setRating(star)}\r\n                                                className={`w-8 h-8 rounded-lg flex items-center justify-center transition-all ${rating >= star\r\n                                                    ? 'text-yellow-400 bg-yellow-400/10'\r\n                                                    : 'text-slate-300 hover:text-yellow-400'\r\n                                                    }`}\r\n                                            >\r\n                                                <span className=\"material-icons-round\">star</span>\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-sm font-semibold mb-2 text-slate-700 dark:text-slate-300\">\r\n                                        Review (minimum 10 characters)\r\n                                    </label>\r\n                                    <textarea\r\n                                        value={comment}\r\n                                        onChange={(e) => setComment(e.target.value)}\r\n                                        className=\"w-full rounded-xl bg-white dark:bg-slate-800 border-none p-4 text-slate-900 dark:text-white focus:ring-2 focus:ring-primary/20 placeholder:text-slate-400\"\r\n                                        rows={4}\r\n                                        placeholder=\"Share your thoughts...\"\r\n                                        required\r\n                                        minLength={10}\r\n                                    ></textarea>\r\n                                </div>\r\n                                <button\r\n                                    type=\"submit\"\r\n                                    disabled={submitting}\r\n                                    className=\"w-full py-3 rounded-xl bg-primary text-white font-bold hover:bg-primary/90 transition-all disabled:opacity-70\"\r\n                                >\r\n                                    {submitting ? 'Submitting...' : 'Post Review'}\r\n                                </button>\r\n                            </form>\r\n                        ) : (\r\n                            <div className=\"text-center py-6 bg-white dark:bg-slate-800 rounded-xl border border-slate-100 dark:border-slate-700\">\r\n                                <span className=\"material-icons-round text-3xl text-slate-300 mb-2\">lock</span>\r\n                                <p className=\"text-slate-500 dark:text-slate-400 text-sm mb-1 font-bold\">\r\n                                    Verified Purchase Only\r\n                                </p>\r\n                                <p className=\"text-xs text-slate-400 px-4\">\r\n                                    You can write a review after you have purchased and received this product.\r\n                                </p>\r\n                            </div>\r\n                        )\r\n                    ) : (\r\n                        <div className=\"text-center py-6\">\r\n                            <p className=\"text-slate-500 mb-4\">Please log in to write a review.</p>\r\n                            <Link\r\n                                href=\"/login\"\r\n                                className=\"inline-block px-6 py-2 rounded-xl bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-bold\"\r\n                            >\r\n                                Login\r\n                            </Link>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </section>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\profile\\AddressCard.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nF:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\profile\\AddressCard.tsx:28:9\n  26 |     useEffect(() => {\n  27 |         // eslint-disable-next-line react-hooks/set-state-in-effect\n> 28 |         fetchAddress();\n     |         ^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  29 |     }, [fetchAddress]);\n  30 |\n  31 |     return (","line":28,"column":9,"nodeType":null,"endLine":28,"endColumn":21,"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\profile\\AddressList.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\profile\\AddressManagerModal.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'fetchAddresses'. Either include it or remove the dependency array.","line":44,"column":8,"nodeType":"ArrayExpression","endLine":44,"endColumn":42,"suggestions":[{"desc":"Update the dependencies array to be: [isOpen, user, initialEditAddress, fetchAddresses]","fix":{"range":[1499,1533],"text":"[isOpen, user, initialEditAddress, fetchAddresses]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { useAuth } from '@/context/AuthContext';\r\nimport { Address, saveAddress, getUserAddresses, deleteAddress, setDefaultAddress } from '@/actions/address';\r\n\r\ninterface AddressManagerModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    onUpdate: () => void;\r\n    initialEditAddress?: Address | null; // Pass address to edit immediately\r\n}\r\n\r\nexport function AddressManagerModal({ isOpen, onClose, onUpdate, initialEditAddress }: AddressManagerModalProps) {\r\n    const { user } = useAuth();\r\n    const [addresses, setAddresses] = useState<Address[]>([]);\r\n    const [view, setView] = useState<'list' | 'form'>('list');\r\n    const [loading, setLoading] = useState(false);\r\n    const [editingAddress, setEditingAddress] = useState<Partial<Address> | null>(null);\r\n\r\n    // Form State\r\n    const [formData, setFormData] = useState({\r\n        label: 'Home',\r\n        fullName: '',\r\n        phone: '',\r\n        street: '',\r\n        city: '',\r\n        state: '',\r\n        postalCode: '',\r\n        country: 'Bangladesh',\r\n        isDefault: false\r\n    });\r\n\r\n    useEffect(() => {\r\n        if (isOpen && user) {\r\n            // Decision: If initialEditAddress is provided, jump straight to form\r\n            if (initialEditAddress) {\r\n                handleEdit(initialEditAddress);\r\n            } else {\r\n                fetchAddresses();\r\n                setView('list'); // Default to list\r\n            }\r\n        }\r\n    }, [isOpen, user, initialEditAddress]);\r\n\r\n    const fetchAddresses = async () => {\r\n        if (!user) return;\r\n        setLoading(true);\r\n        try {\r\n            const data = await getUserAddresses();\r\n            setAddresses(data);\r\n        } catch (error) {\r\n            console.error(error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleEdit = (address: Address) => {\r\n        setEditingAddress(address);\r\n        setFormData({\r\n            label: address.label,\r\n            fullName: address.fullName,\r\n            phone: address.phone,\r\n            street: address.street,\r\n            city: address.city,\r\n            state: address.state,\r\n            postalCode: address.postalCode,\r\n            country: address.country,\r\n            isDefault: address.isDefault\r\n        });\r\n        setView('form');\r\n    };\r\n\r\n    const handleAddNew = () => {\r\n        setEditingAddress(null);\r\n        setFormData({\r\n            label: 'Home',\r\n            fullName: user?.user_metadata?.full_name || '',\r\n            phone: '',\r\n            street: '',\r\n            city: '',\r\n            state: '',\r\n            postalCode: '',\r\n            country: 'Bangladesh',\r\n            isDefault: addresses.length === 0\r\n        });\r\n        setView('form');\r\n    };\r\n\r\n    const handleSave = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        if (!user) return;\r\n\r\n        setLoading(true);\r\n        try {\r\n            await saveAddress({\r\n                ...formData,\r\n                id: editingAddress?.id\r\n            });\r\n\r\n            // If we came from external edit, close immediately\r\n            if (initialEditAddress) {\r\n                onUpdate();\r\n                onClose();\r\n            } else {\r\n                await fetchAddresses();\r\n                setView('list');\r\n                onUpdate();\r\n            }\r\n        } catch (error) {\r\n            alert('Failed to save address');\r\n            console.error(error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleDelete = async (id: string) => {\r\n        if (!confirm('Are you sure you want to delete this address?')) return;\r\n        setLoading(true);\r\n        try {\r\n            await deleteAddress(id);\r\n            await fetchAddresses();\r\n            onUpdate();\r\n        } catch (error) {\r\n            console.error(error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleSetDefault = async (id: string) => {\r\n        if (!user) return;\r\n        setLoading(true);\r\n        try {\r\n            await setDefaultAddress(id);\r\n            await fetchAddresses();\r\n            onUpdate();\r\n        } catch (error) {\r\n            console.error(error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm\">\r\n            <div className=\"bg-white dark:bg-[#10221c] w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh]\">\r\n                {/* Header */}\r\n                <div className=\"p-6 border-b border-slate-100 dark:border-[#1e3a31] flex justify-between items-center\">\r\n                    <h2 className=\"text-xl font-bold text-slate-900 dark:text-white\">\r\n                        {view === 'list' && !initialEditAddress ? 'Manage Addresses' : (editingAddress ? 'Edit Address' : 'Add New Address')}\r\n                    </h2>\r\n                    <button onClick={onClose} className=\"p-2 hover:bg-slate-100 dark:hover:bg-[#1e3a31] rounded-full transition-colors\">\r\n                        <span className=\"material-icons-round text-slate-500\">close</span>\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"flex-1 overflow-y-auto p-6\">\r\n                    {view === 'list' && !initialEditAddress ? (\r\n                        <div className=\"space-y-4\">\r\n                            <button\r\n                                onClick={handleAddNew}\r\n                                className=\"w-full py-4 border-2 border-dashed border-primary/30 rounded-xl flex items-center justify-center gap-2 text-primary font-bold hover:bg-primary/5 transition-colors\"\r\n                            >\r\n                                <span className=\"material-icons-round\">add</span>\r\n                                Add New Address\r\n                            </button>\r\n\r\n                            {loading && <div className=\"text-center py-4\">Loading...</div>}\r\n\r\n                            <div className=\"grid gap-4\">\r\n                                {addresses.map(addr => (\r\n                                    <div key={addr.id} className={`relative p-4 rounded-xl border ${addr.isDefault ? 'border-primary bg-primary/5' : 'border-slate-200 dark:border-[#1e3a31]'} transition-all`}>\r\n                                        <div className=\"flex justify-between items-start\">\r\n                                            <div>\r\n                                                <div className=\"flex items-center gap-2 mb-1\">\r\n                                                    <span className=\"font-bold text-slate-900 dark:text-white\">{addr.label}</span>\r\n                                                    {addr.isDefault && (\r\n                                                        <span className=\"px-2 py-0.5 text-xs font-bold bg-primary text-white rounded-full\">Default</span>\r\n                                                    )}\r\n                                                </div>\r\n                                                <p className=\"text-sm text-slate-600 dark:text-slate-400 font-medium\">{addr.fullName} <span className=\"text-slate-400\">•</span> {addr.phone}</p>\r\n                                                <p className=\"text-sm text-slate-500 mt-1\">\r\n                                                    {addr.street}, {addr.city}, {addr.state} {addr.postalCode}\r\n                                                </p>\r\n                                            </div>\r\n                                            <div className=\"flex gap-2\">\r\n                                                <button onClick={() => handleEdit(addr)} className=\"p-2 text-slate-400 hover:text-primary transition-colors\">\r\n                                                    <span className=\"material-icons-round text-xl\">edit</span>\r\n                                                </button>\r\n                                                <button onClick={() => handleDelete(addr.id)} className=\"p-2 text-slate-400 hover:text-red-500 transition-colors\">\r\n                                                    <span className=\"material-icons-round text-xl\">delete</span>\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                        {!addr.isDefault && (\r\n                                            <button\r\n                                                onClick={() => handleSetDefault(addr.id)}\r\n                                                className=\"mt-3 text-sm font-bold text-slate-500 hover:text-primary transition-colors\"\r\n                                            >\r\n                                                Set as Default\r\n                                            </button>\r\n                                        )}\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <form onSubmit={handleSave} className=\"space-y-4\">\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <FormInput label=\"Label (e.g. Home)\" value={formData.label} onChange={v => setFormData({ ...formData, label: v })} required />\r\n                                <FormInput label=\"Full Name\" value={formData.fullName} onChange={v => setFormData({ ...formData, fullName: v })} required />\r\n                            </div>\r\n                            <FormInput label=\"Phone Number\" value={formData.phone} onChange={v => setFormData({ ...formData, phone: v })} required />\r\n                            <FormInput label=\"Street Address\" value={formData.street} onChange={v => setFormData({ ...formData, street: v })} required />\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <FormInput label=\"City\" value={formData.city} onChange={v => setFormData({ ...formData, city: v })} required />\r\n                                <FormInput label=\"State / Region\" value={formData.state} onChange={v => setFormData({ ...formData, state: v })} />\r\n                            </div>\r\n                            <div className=\"grid grid-cols-2 gap-4\">\r\n                                <FormInput label=\"Postal Code\" value={formData.postalCode} onChange={v => setFormData({ ...formData, postalCode: v })} required />\r\n                                <FormInput label=\"Country\" value={formData.country} onChange={v => setFormData({ ...formData, country: v })} required />\r\n                            </div>\r\n\r\n                            <div className=\"flex items-center gap-3 pt-2\">\r\n                                <input\r\n                                    type=\"checkbox\"\r\n                                    id=\"isDefault\"\r\n                                    checked={formData.isDefault}\r\n                                    onChange={e => setFormData({ ...formData, isDefault: e.target.checked })}\r\n                                    className=\"w-5 h-5 rounded border-gray-300 text-primary focus:ring-primary\"\r\n                                />\r\n                                <label htmlFor=\"isDefault\" className=\"text-sm font-medium text-slate-700 dark:text-slate-300\">\r\n                                    Set as default address\r\n                                </label>\r\n                            </div>\r\n\r\n                            <div className=\"flex gap-4 pt-4\">\r\n                                <button\r\n                                    type=\"button\"\r\n                                    onClick={() => {\r\n                                        if (initialEditAddress) {\r\n                                            onClose();\r\n                                        } else {\r\n                                            setView('list');\r\n                                        }\r\n                                    }}\r\n                                    className=\"flex-1 py-3 font-bold text-slate-600 dark:text-slate-300 bg-slate-100 dark:bg-slate-800 rounded-xl hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors\"\r\n                                >\r\n                                    Cancel\r\n                                </button>\r\n                                <button type=\"submit\" disabled={loading} className=\"flex-1 py-3 font-bold text-white bg-primary rounded-xl hover:bg-primary/90 transition-colors shadow-lg shadow-primary/20\">\r\n                                    {loading ? 'Saving...' : 'Save Address'}\r\n                                </button>\r\n                            </div>\r\n                        </form>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nfunction FormInput({ label, value, onChange, required }: { label: string, value: string, onChange: (v: string) => void, required?: boolean }) {\r\n    return (\r\n        <div>\r\n            <label className=\"block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1.5\">{label}</label>\r\n            <input\r\n                type=\"text\"\r\n                value={value}\r\n                onChange={e => onChange(e.target.value)}\r\n                required={required}\r\n                className=\"w-full px-4 py-3 bg-slate-50 dark:bg-slate-800/50 border border-slate-200 dark:border-slate-700 rounded-xl focus:outline-none focus:ring-2 focus:ring-primary/50 text-slate-900 dark:text-white font-medium\"\r\n            />\r\n        </div>\r\n    );\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\profile\\MembershipCard.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\profile\\OrderDetailsModal.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":66,"column":53,"nodeType":"JSXOpeningElement","endLine":66,"endColumn":132}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { formatPrice } from '@/lib/format';\r\n\r\ninterface OrderDetailsModalProps {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    order: any;\r\n    loading?: boolean;\r\n}\r\n\r\nexport function OrderDetailsModal({ isOpen, onClose, order, loading }: OrderDetailsModalProps) {\r\n    if (!isOpen) return null;\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm\">\r\n            <div className=\"bg-white dark:bg-[#10221c] w-full max-w-2xl rounded-2xl shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-in fade-in zoom-in duration-200\">\r\n                {/* Header */}\r\n                <div className=\"p-6 border-b border-slate-100 dark:border-[#1e3a31] flex justify-between items-center bg-slate-50/50 dark:bg-white/5\">\r\n                    <div>\r\n                        <h2 className=\"text-xl font-bold text-slate-900 dark:text-white\">\r\n                            Order Details\r\n                        </h2>\r\n                        {order && (\r\n                            <p className=\"text-sm text-slate-500 mt-1\">\r\n                                #{order.id.slice(0, 8).toUpperCase()} • {new Date(order.created_at).toLocaleDateString()}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n                    <button onClick={onClose} className=\"p-2 hover:bg-slate-100 dark:hover:bg-[#1e3a31] rounded-full transition-colors\">\r\n                        <span className=\"material-icons-round text-slate-500\">close</span>\r\n                    </button>\r\n                </div>\r\n\r\n                {/* Content */}\r\n                <div className=\"flex-1 overflow-y-auto p-6\">\r\n                    {loading ? (\r\n                        <div className=\"flex flex-col items-center justify-center py-12\">\r\n                            <div className=\"animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-primary mb-4\"></div>\r\n                            <p className=\"text-slate-500 font-medium\">Loading details...</p>\r\n                        </div>\r\n                    ) : order ? (\r\n                        <div className=\"space-y-6\">\r\n                            {/* Status Banner */}\r\n                            <div className={`p-4 rounded-xl flex items-center gap-3 ${order.status === 'delivered' ? 'bg-[#f1f5f9] text-[#64748b]' : 'bg-[#e7f3ef] text-[#07882e]'\r\n                                }`}>\r\n                                <span className=\"material-icons-round\">\r\n                                    {order.status === 'delivered' ? 'check_circle' : 'inventory_2'}\r\n                                </span>\r\n                                <div>\r\n                                    <p className=\"font-bold uppercase text-xs tracking-wider\">Order Status</p>\r\n                                    <p className=\"font-bold text-sm\">\r\n                                        {order.status === 'delivered' ? 'Delivered' : order.status.charAt(0).toUpperCase() + order.status.slice(1)}\r\n                                    </p>\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Items List */}\r\n                            <div>\r\n                                <h3 className=\"text-sm font-bold text-slate-500 uppercase tracking-wider mb-3\">Items</h3>\r\n                                <div className=\"space-y-3\">\r\n                                    {order.items?.map((item: any) => (\r\n                                        <div key={item.id} className=\"flex gap-4 p-3 rounded-xl border border-slate-100 dark:border-[#1e3a31] bg-slate-50/50 dark:bg-white/5\">\r\n                                            <div className=\"size-16 rounded-lg bg-white dark:bg-black/20 shrink-0 overflow-hidden\">\r\n                                                {item.image ? (\r\n                                                    <img src={item.image} alt={item.name} className=\"w-full h-full object-cover\" />\r\n                                                ) : (\r\n                                                    <div className=\"w-full h-full flex items-center justify-center bg-slate-100 dark:bg-slate-800\">\r\n                                                        <span className=\"material-icons-round text-slate-300\">image</span>\r\n                                                    </div>\r\n                                                )}\r\n                                            </div>\r\n                                            <div className=\"flex-1 min-w-0\">\r\n                                                <p className=\"font-bold text-slate-900 dark:text-white truncate\">{item.name}</p>\r\n                                                <p className=\"text-xs text-slate-500 mt-1\">Quantity: {item.quantity}</p>\r\n                                                <p className=\"text-sm font-bold text-primary mt-1\">{formatPrice(item.price)}</p>\r\n                                            </div>\r\n                                            <div className=\"text-right font-bold text-slate-900 dark:text-white\">\r\n                                                {formatPrice(item.price * item.quantity)}\r\n                                            </div>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n\r\n                            {/* Summary */}\r\n                            <div className=\"border-t border-slate-100 dark:border-[#1e3a31] pt-4 mt-6\">\r\n                                <div className=\"flex justify-between items-center text-lg font-bold text-slate-900 dark:text-white\">\r\n                                    <span>Total Amount</span>\r\n                                    <span>{formatPrice(order.total_amount)}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"text-center py-12 text-slate-500\">\r\n                            Failed to load order details.\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n                {/* Footer */}\r\n                <div className=\"p-4 border-t border-slate-100 dark:border-[#1e3a31] bg-slate-50/50 dark:bg-white/5 flex justify-end\">\r\n                    <button\r\n                        onClick={onClose}\r\n                        className=\"px-6 py-2.5 bg-slate-200 dark:bg-slate-800 hover:bg-slate-300 dark:hover:bg-slate-700 text-slate-800 dark:text-white font-bold rounded-xl transition-colors\"\r\n                    >\r\n                        Close\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\profile\\ProfileEditModal.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\profile\\ProfileSidebar.tsx","messages":[{"ruleId":"@next/next/no-img-element","severity":1,"message":"Using `<img>` could result in slower LCP and higher bandwidth. Consider using `<Image />` from `next/image` or a custom image loader to automatically optimize images. This may incur additional usage or cost from your provider. See: https://nextjs.org/docs/messages/no-img-element","line":25,"column":33,"nodeType":"JSXOpeningElement","endLine":25,"endColumn":129}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\nimport Link from 'next/link';\r\nimport { useAuth } from '@/context/AuthContext';\r\n\r\ninterface ProfileSidebarProps {\r\n    activeTab?: string;\r\n    onEditProfile?: () => void;\r\n}\r\n\r\nexport function ProfileSidebar({ activeTab = 'overview', onEditProfile }: ProfileSidebarProps) {\r\n    const { user, signOut } = useAuth();\r\n\r\n    return (\r\n        <aside className=\"hidden lg:flex w-72 flex-col border-r border-[#cfe7df] dark:border-[#1e3a31] bg-white dark:bg-[#10221c] p-6 h-[calc(100vh-64px)] sticky top-16\">\r\n            <div className=\"flex flex-col h-full justify-between\">\r\n                <div className=\"flex flex-col gap-8\">\r\n                    <Link href=\"/\" className=\"flex items-center gap-2 text-slate-500 hover:text-primary transition-colors group\">\r\n                        <span className=\"material-icons-round text-xl group-hover:-translate-x-1 transition-transform\">arrow_back</span>\r\n                        <span className=\"font-semibold\">Back to Home</span>\r\n                    </Link>\r\n\r\n                    <div className=\"flex gap-3 items-center\">\r\n                        <div className=\"bg-center bg-no-repeat aspect-square bg-cover rounded-full size-12 border-2 border-primary overflow-hidden\">\r\n                            {user?.user_metadata?.avatar_url ? (\r\n                                <img src={user.user_metadata.avatar_url} alt=\"Profile\" className=\"w-full h-full object-cover\" />\r\n                            ) : (\r\n                                <div className=\"w-full h-full bg-slate-200 dark:bg-slate-700 flex items-center justify-center\">\r\n                                    <span className=\"material-icons-round text-slate-400\">person</span>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                        <div className=\"flex flex-col\">\r\n                            <h1 className=\"text-[#0d1b17] dark:text-white text-base font-bold leading-none\">\r\n                                {user?.user_metadata?.full_name || 'User'}\r\n                            </h1>\r\n                            <p className=\"text-[#4c9a80] text-xs font-normal mt-1\">Prime Member</p>\r\n                        </div>\r\n                    </div>\r\n                    <nav className=\"flex flex-col gap-2\">\r\n                        <Link href=\"/profile\" className={`flex items-center gap-3 px-3 py-3 rounded-xl transition-colors ${activeTab === 'overview' ? 'bg-primary/10 text-primary' : 'hover:bg-[#e7f3ef] dark:hover:bg-[#1e3a31] text-[#0d1b17] dark:text-white'}`}>\r\n                            <span className=\"material-icons-round\">account_circle</span>\r\n                            <span className=\"text-sm font-semibold\">Profile Overview</span>\r\n                        </Link>\r\n                        <Link href=\"/profile/orders\" className={`flex items-center gap-3 px-3 py-3 rounded-xl transition-colors ${activeTab === 'orders' ? 'bg-primary/10 text-primary' : 'hover:bg-[#e7f3ef] dark:hover:bg-[#1e3a31] text-[#0d1b17] dark:text-white'}`}>\r\n                            <span className=\"material-icons-round\">shopping_bag</span>\r\n                            <span className=\"text-sm font-medium\">My Orders</span>\r\n                        </Link>\r\n                        <Link href=\"/profile/wishlist\" className={`flex items-center gap-3 px-3 py-3 rounded-xl transition-colors ${activeTab === 'wishlist' ? 'bg-primary/10 text-primary' : 'hover:bg-[#e7f3ef] dark:hover:bg-[#1e3a31] text-[#0d1b17] dark:text-white'}`}>\r\n                            <span className=\"material-icons-round\">favorite</span>\r\n                            <span className=\"text-sm font-medium\">Wishlist</span>\r\n                        </Link>\r\n                        <Link href=\"/profile/addresses\" className={`flex items-center gap-3 px-3 py-3 rounded-xl transition-colors ${activeTab === 'addresses' ? 'bg-primary/10 text-primary' : 'hover:bg-[#e7f3ef] dark:hover:bg-[#1e3a31] text-[#0d1b17] dark:text-white'}`}>\r\n                            <span className=\"material-icons-round\">location_on</span>\r\n                            <span className=\"text-sm font-medium\">Saved Addresses</span>\r\n                        </Link>\r\n                        <div className=\"flex items-center gap-3 px-3 py-3 rounded-xl transition-colors text-slate-400 cursor-not-allowed opacity-60\">\r\n                            <span className=\"material-icons-round\">credit_card</span>\r\n                            <span className=\"text-sm font-medium\">Payment Methods</span>\r\n                            <span className=\"ml-auto text-[10px] uppercase font-bold bg-slate-100 dark:bg-slate-800 px-2 py-0.5 rounded\">Soon</span>\r\n                        </div>\r\n                        <div className=\"flex items-center gap-3 px-3 py-3 rounded-xl transition-colors mt-4 border-t border-[#cfe7df] pt-6 text-slate-400 cursor-not-allowed opacity-60\">\r\n                            <span className=\"material-icons-round\">settings</span>\r\n                            <span className=\"text-sm font-medium\">Settings</span>\r\n                        </div>\r\n                    </nav>\r\n                </div>\r\n                {onEditProfile && (\r\n                    <button\r\n                        onClick={onEditProfile}\r\n                        className=\"flex w-full cursor-pointer items-center justify-center rounded-xl h-12 bg-primary text-[#0d1b17] font-bold shadow-lg shadow-primary/20 hover:scale-[1.02] transition-transform mb-3\"\r\n                    >\r\n                        <span className=\"material-icons-round mr-2\">edit</span>\r\n                        <span>Edit Profile</span>\r\n                    </button>\r\n                )}\r\n\r\n                <button\r\n                    onClick={() => signOut()}\r\n                    className=\"flex w-full cursor-pointer items-center justify-center rounded-xl h-12 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 font-bold hover:bg-red-100 dark:hover:bg-red-900/40 transition-colors\"\r\n                >\r\n                    <span className=\"material-icons-round mr-2\">logout</span>\r\n                    <span>Sign Out</span>\r\n                </button>\r\n            </div>\r\n        </aside>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\profile\\ProfileStats.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\profile\\QuickActions.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\profile\\RecentOrders.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\shop\\MobileShopFilterDrawer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\shop\\ShopView.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'useEffect' is defined but never used.","line":3,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":45,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"useEffect"},"fix":{"range":[50,61],"text":""},"desc":"Remove unused variable \"useEffect\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { useState, useMemo, useEffect } from 'react';\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport { Product, Category } from '@/lib/api';\r\nimport { ProductListing } from '@/components/category/ProductListing';\r\nimport { MobileFilterBar } from '@/components/category/MobileFilterBar';\r\nimport { SidebarShopFilters } from './SidebarShopFilters';\r\nimport { MobileShopFilterDrawer } from './MobileShopFilterDrawer';\r\n\r\ninterface ShopViewProps {\r\n    products: Product[];\r\n    categories: Category[];\r\n}\r\n\r\nexport function ShopView({ products, categories }: ShopViewProps) {\r\n    const router = useRouter();\r\n    const searchParams = useSearchParams();\r\n\r\n    // -- Derived Initial State --\r\n    const globalMinPrice = useMemo(() => {\r\n        if (products.length === 0) return 0;\r\n        return Math.floor(Math.min(...products.map(p => p.price)));\r\n    }, [products]);\r\n\r\n    const globalMaxPrice = useMemo(() => {\r\n        if (products.length === 0) return 1000;\r\n        return Math.ceil(Math.max(...products.map(p => p.price)));\r\n    }, [products]);\r\n\r\n    // -- State --\r\n    const [currentSort, setCurrentSort] = useState(searchParams.get('sort') || 'newest');\r\n    // Initialize price range directly from computed globals\r\n    const [priceRange, setPriceRange] = useState({ min: globalMinPrice, max: globalMaxPrice });\r\n\r\n    // Category State (URL Sync)\r\n    // We treat URL as source of truth for Category/Subcategory to allow sharing links\r\n    const selectedCategorySlug = searchParams.get('category') || undefined;\r\n    const selectedSubcategoryName = searchParams.get('subcategory') || undefined;\r\n\r\n    const [isUpdating, setIsUpdating] = useState(false);\r\n    const [isMobileFiltersOpen, setIsMobileFiltersOpen] = useState(false);\r\n    const [currentPage, setCurrentPage] = useState(1);\r\n\r\n    // -- Handlers --\r\n    const handleSortChange = (sort: string) => {\r\n        setIsUpdating(true);\r\n        setTimeout(() => {\r\n            setCurrentSort(sort);\r\n            updateUrl({ sort });\r\n            setIsUpdating(false);\r\n        }, 500);\r\n    };\r\n\r\n    const handlePriceChange = (min: number, max: number) => {\r\n        setPriceRange({ min, max });\r\n    };\r\n\r\n    const handleCategoryChange = (categorySlug: string | undefined, subcategoryName?: string) => {\r\n        // Reset pagination\r\n        setCurrentPage(1);\r\n        setIsUpdating(true);\r\n\r\n        setTimeout(() => {\r\n            const params = new URLSearchParams(searchParams.toString());\r\n            if (categorySlug) {\r\n                params.set('category', categorySlug);\r\n            } else {\r\n                params.delete('category');\r\n            }\r\n\r\n            if (subcategoryName) {\r\n                params.set('subcategory', subcategoryName);\r\n            } else {\r\n                params.delete('subcategory');\r\n            }\r\n\r\n            // Clean up sort if default\r\n            if (currentSort === 'newest') params.delete('sort');\r\n            else params.set('sort', currentSort);\r\n\r\n            router.push(`/shop?${params.toString()}`, { scroll: false });\r\n            setIsUpdating(false);\r\n            setIsMobileFiltersOpen(false);\r\n        }, 300);\r\n    };\r\n\r\n    const handlePageChange = (page: number) => {\r\n        setIsUpdating(true);\r\n        setTimeout(() => {\r\n            setCurrentPage(page);\r\n            window.scrollTo({ top: 0, behavior: 'smooth' });\r\n            setIsUpdating(false);\r\n        }, 300);\r\n    };\r\n\r\n    const updateUrl = (updates: Record<string, string>) => {\r\n        const params = new URLSearchParams(searchParams.toString());\r\n        Object.entries(updates).forEach(([key, value]) => params.set(key, value));\r\n        window.history.pushState(null, '', `?${params.toString()}`);\r\n    };\r\n\r\n    // -- Filtering & Sorting Logic --\r\n    const filteredAndSortedProducts = useMemo(() => {\r\n        let result = [...products];\r\n\r\n        // 1. Filter by Category\r\n        if (selectedCategorySlug) {\r\n            // Find category name from slug\r\n            const catInfo = categories.find(c => c.slug === selectedCategorySlug);\r\n            if (catInfo) {\r\n                result = result.filter(p => p.category === catInfo.name);\r\n            }\r\n        }\r\n\r\n        // 2. Filter by Subcategory\r\n        if (selectedSubcategoryName) {\r\n            // Need to know which field holds subcategory. API usually returns 'subcategory' or we check tags?\r\n            // Checking `Product` interface in `lib/api.ts` (assumed).\r\n            // Usually products have `subcategory`. If not, we might need adjustments.\r\n            // Assumption: Product has `subcategory` field matching the name.\r\n            result = result.filter(p => p.subcategory === selectedSubcategoryName);\r\n        }\r\n\r\n        // 3. Filter by Price\r\n        result = result.filter(p => p.price >= priceRange.min && p.price <= priceRange.max);\r\n\r\n        // 4. Sort\r\n        switch (currentSort) {\r\n            case 'price-asc':\r\n                result.sort((a, b) => a.price - b.price);\r\n                break;\r\n            case 'price-desc':\r\n                result.sort((a, b) => b.price - a.price);\r\n                break;\r\n            case 'best-selling':\r\n                result.sort((a, b) => (b.sold_count || 0) - (a.sold_count || 0));\r\n                break;\r\n            case 'newest':\r\n                result.sort((a, b) => {\r\n                    const dateA = a.createdAt ? new Date(a.createdAt).getTime() : 0;\r\n                    const dateB = b.createdAt ? new Date(b.createdAt).getTime() : 0;\r\n                    return dateB - dateA;\r\n                });\r\n                break;\r\n        }\r\n\r\n        return result;\r\n    }, [products, categories, selectedCategorySlug, selectedSubcategoryName, priceRange, currentSort]);\r\n\r\n    // -- Pagination --\r\n    const ITEMS_PER_PAGE = 12;\r\n    const totalPages = Math.ceil(filteredAndSortedProducts.length / ITEMS_PER_PAGE);\r\n    const paginatedProducts = useMemo(() => {\r\n        const start = (currentPage - 1) * ITEMS_PER_PAGE;\r\n        const end = start + ITEMS_PER_PAGE;\r\n        return filteredAndSortedProducts.slice(start, end);\r\n    }, [filteredAndSortedProducts, currentPage]);\r\n\r\n    return (\r\n        <div className=\"flex flex-col lg:flex-row gap-12 relative pb-32 lg:pb-0\">\r\n            {/* Mobile Sticky Header */}\r\n            <div className=\"lg:hidden sticky top-[56px] z-30 bg-white/95 dark:bg-slate-900/95 backdrop-blur-lg border-b border-slate-100 dark:border-slate-800 transition-all duration-300\">\r\n                <MobileFilterBar\r\n                    totalResults={filteredAndSortedProducts.length}\r\n                    onFilterClick={() => setIsMobileFiltersOpen(true)}\r\n                    currentSort={currentSort}\r\n                    onSortChange={handleSortChange}\r\n                />\r\n                {/* Active Filters Display (Mobile) */}\r\n                {(selectedCategorySlug || selectedSubcategoryName) && (\r\n                    <div className=\"px-4 py-2 flex items-center gap-2 overflow-x-auto hide-scrollbar\">\r\n                        {selectedCategorySlug && (\r\n                            <span className=\"flex-shrink-0 px-3 py-1 bg-slate-100 dark:bg-slate-800 rounded-full text-xs font-bold text-slate-700 dark:text-slate-300 flex items-center gap-1\">\r\n                                {categories.find(c => c.slug === selectedCategorySlug)?.name}\r\n                                <button onClick={() => handleCategoryChange(undefined)} className=\"hover:text-red-500\"><span className=\"material-icons-round text-sm\">close</span></button>\r\n                            </span>\r\n                        )}\r\n                        {selectedSubcategoryName && (\r\n                            <span className=\"flex-shrink-0 px-3 py-1 bg-primary/10 rounded-full text-xs font-bold text-primary flex items-center gap-1\">\r\n                                {selectedSubcategoryName}\r\n                                <button onClick={() => handleCategoryChange(selectedCategorySlug, undefined)} className=\"hover:text-red-500\"><span className=\"material-icons-round text-sm\">close</span></button>\r\n                            </span>\r\n                        )}\r\n                    </div>\r\n                )}\r\n            </div>\r\n\r\n            <MobileShopFilterDrawer\r\n                isOpen={isMobileFiltersOpen}\r\n                onClose={() => setIsMobileFiltersOpen(false)}\r\n                categories={categories}\r\n                selectedCategory={selectedCategorySlug}\r\n                selectedSubcategory={selectedSubcategoryName}\r\n                onCategoryChange={handleCategoryChange}\r\n                minPrice={globalMinPrice}\r\n                maxPrice={globalMaxPrice}\r\n                currentMin={priceRange.min}\r\n                currentMax={priceRange.max}\r\n                onPriceChange={handlePriceChange}\r\n            />\r\n\r\n            {/* Desktop Sidebar */}\r\n            <div className=\"hidden lg:block w-72 flex-shrink-0\">\r\n                <SidebarShopFilters\r\n                    categories={categories}\r\n                    selectedCategory={selectedCategorySlug}\r\n                    selectedSubcategory={selectedSubcategoryName}\r\n                    onCategoryChange={handleCategoryChange}\r\n                    minPrice={globalMinPrice}\r\n                    maxPrice={globalMaxPrice}\r\n                    currentMin={priceRange.min}\r\n                    currentMax={priceRange.max}\r\n                    onPriceChange={handlePriceChange}\r\n                />\r\n            </div>\r\n\r\n            {/* Product Grid */}\r\n            <div className=\"flex-1\">\r\n                <ProductListing\r\n                    title={\r\n                        selectedSubcategoryName\r\n                            ? selectedSubcategoryName\r\n                            : selectedCategorySlug\r\n                                ? categories.find(c => c.slug === selectedCategorySlug)?.name || 'Products'\r\n                                : 'All Products'\r\n                    }\r\n                    subtitle={`Showing ${filteredAndSortedProducts.length} results`}\r\n                    products={paginatedProducts}\r\n                    totalProducts={filteredAndSortedProducts.length}\r\n                    currentPage={currentPage}\r\n                    totalPages={totalPages}\r\n                    onPageChange={handlePageChange}\r\n                    currentSort={currentSort}\r\n                    onSortChange={handleSortChange}\r\n                    isUpdating={isUpdating}\r\n                />\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\components\\shop\\SidebarShopFilters.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\context\\AuthContext.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'router' is assigned a value but never used.","line":29,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":29,"endColumn":17},{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'supabase'. Either include it or remove the dependency array.","line":72,"column":8,"nodeType":"ArrayExpression","endLine":72,"endColumn":10,"suggestions":[{"desc":"Update the dependencies array to be: [supabase]","fix":{"range":[2521,2523],"text":"[supabase]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { createContext, useContext, useEffect, useState } from 'react';\r\nimport { User, Session } from '@supabase/supabase-js';\r\nimport { useRouter } from 'next/navigation';\r\nimport { createClient } from '@/lib/supabase/client';\r\n\r\ntype AuthContextType = {\r\n    user: User | null;\r\n    session: Session | null;\r\n    loading: boolean;\r\n    signOut: () => Promise<void>;\r\n};\r\n\r\nconst AuthContext = createContext<AuthContextType>({\r\n    user: null,\r\n    session: null,\r\n    loading: true,\r\n    signOut: async () => { },\r\n});\r\n\r\nexport const useAuth = () => useContext(AuthContext);\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const [session, setSession] = useState<Session | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [isSigningOut, setIsSigningOut] = useState(false);\r\n    const router = useRouter();\r\n    const supabase = createClient();\r\n\r\n    useEffect(() => {\r\n        const {\r\n            data: { subscription },\r\n        } = supabase.auth.onAuthStateChange(async (event, session) => {\r\n            if (session) {\r\n                setSession(session);\r\n                // Extend user object with data from public.User if needed, \r\n                // or just use the session user which is now the source of truth for auth.\r\n                // For now, we just set the Supabase Auth User.\r\n                // In a real app we might fetch public.User here to get the role.\r\n                const { data: profile } = await supabase\r\n                    .from('User')\r\n                    .select('*')\r\n                    .eq('id', session.user.id)\r\n                    .single();\r\n\r\n                if (profile) {\r\n                    // Merge profile data securely\r\n                    setUser({\r\n                        ...session.user,\r\n                        role: profile.role,\r\n                        user_metadata: {\r\n                            ...session.user.user_metadata,\r\n                            full_name: profile.name,\r\n                            phone: profile.phone\r\n                        }\r\n                    } as any);\r\n                } else {\r\n                    setUser(session.user);\r\n                }\r\n            } else {\r\n                setSession(null);\r\n                setUser(null);\r\n            }\r\n            setLoading(false);\r\n        });\r\n\r\n        return () => {\r\n            subscription.unsubscribe();\r\n        };\r\n    }, []);\r\n\r\n    const signOut = async () => {\r\n        setIsSigningOut(true);\r\n        try {\r\n            await supabase.auth.signOut();\r\n            // Use window.location for hard redirect to clear all state\r\n            window.location.href = '/';\r\n        } catch (error) {\r\n            console.error('Error signing out:', error);\r\n            setIsSigningOut(false);\r\n        }\r\n    };\r\n\r\n    const value = {\r\n        session,\r\n        user,\r\n        loading,\r\n        signOut,\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={value}>\r\n            {children}\r\n            {isSigningOut && (\r\n                <div className=\"fixed inset-0 z-[9999] flex items-center justify-center bg-white/80 backdrop-blur-sm transition-all duration-300\">\r\n                    <div className=\"flex flex-col items-center gap-4\">\r\n                        <div className=\"w-12 h-12 border-4 border-primary border-t-transparent rounded-full animate-spin\"></div>\r\n                        <p className=\"text-lg font-medium text-slate-700 animate-pulse\">Signing out...</p>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </AuthContext.Provider>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\context\\CartContext.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'supabase'. Either include it or remove the dependency array.","line":159,"column":8,"nodeType":"ArrayExpression","endLine":159,"endColumn":27,"suggestions":[{"desc":"Update the dependencies array to be: [user, authLoading, supabase]","fix":{"range":[6277,6296],"text":"[user, authLoading, supabase]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\nimport { useAuth } from './AuthContext';\r\nimport { createClient } from '@/lib/supabase/client';\r\n\r\nexport interface CartItem {\r\n    id: number | string;\r\n    name: string;\r\n    price: number;\r\n    images: string[];\r\n    quantity: number;\r\n    category?: string;\r\n    pack?: string;\r\n    color?: string;\r\n    size?: string;\r\n}\r\n\r\ninterface CartContextType {\r\n    items: CartItem[];\r\n    addItem: (item: CartItem) => Promise<void>;\r\n    removeItem: (id: number | string, color?: string) => Promise<void>;\r\n    updateQuantity: (id: number | string, delta: number, color?: string) => Promise<void>;\r\n    clearCart: () => Promise<void>;\r\n    totalPrice: number;\r\n    totalItems: number;\r\n    loading: boolean;\r\n}\r\n\r\nconst defaultContext: CartContextType = {\r\n    items: [],\r\n    addItem: async () => { },\r\n    removeItem: async () => { },\r\n    updateQuantity: async () => { },\r\n    clearCart: async () => { },\r\n    totalPrice: 0,\r\n    totalItems: 0,\r\n    loading: true\r\n};\r\n\r\nconst CartContext = createContext<CartContextType>(defaultContext);\r\n\r\nexport function CartProvider({ children }: { children: ReactNode }) {\r\n    const { user, loading: authLoading } = useAuth();\r\n    const [supabase] = useState(() => createClient());\r\n    const [items, setItems] = useState<CartItem[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [isInitialized, setIsInitialized] = useState(false);\r\n\r\n    // Initial load\r\n    useEffect(() => {\r\n        if (authLoading) return;\r\n\r\n        const loadCart = async () => {\r\n            setLoading(true);\r\n            if (user) {\r\n                // Load from Supabase\r\n                try {\r\n                    // Get cart_id for user, or create if not exists\r\n                    const { data: initialCart, error: cartError } = await supabase\r\n                        .from('carts')\r\n                        .select('id')\r\n                        .eq('user_id', user.id)\r\n                        .single();\r\n\r\n                    let cart = initialCart;\r\n\r\n                    if (cartError && cartError.code === 'PGRST116') {\r\n                        // Cart doesn't exist, create it\r\n                        const { data: newCart, error: createError } = await supabase\r\n                            .from('carts')\r\n                            .insert([{ user_id: user.id }])\r\n                            .select('id')\r\n                            .single();\r\n\r\n                        if (createError) {\r\n                            // If unique violation (23505), it means it was created concurrently or hidden\r\n                            if (createError.code === '23505') {\r\n                                const { data: existingCart, error: retryError } = await supabase\r\n                                    .from('carts')\r\n                                    .select('id')\r\n                                    .eq('user_id', user.id)\r\n                                    .single();\r\n\r\n                                if (retryError) throw retryError;\r\n                                cart = existingCart;\r\n                            } else {\r\n                                throw createError;\r\n                            }\r\n                        } else {\r\n                            cart = newCart;\r\n                        }\r\n                    } else if (cartError) {\r\n                        throw cartError;\r\n                    }\r\n\r\n                    if (cart) {\r\n                        const { data: cartItems, error: itemsError } = await supabase\r\n                            .from('cart_items')\r\n                            .select('*')\r\n                            .eq('cart_id', cart.id);\r\n\r\n                        if (itemsError) throw itemsError;\r\n\r\n                        if (cartItems) {\r\n                            const mappedItems: CartItem[] = cartItems.map(item => ({\r\n                                id: item.product_id,\r\n                                name: item.name,\r\n                                price: item.price,\r\n                                images: [item.image], // Map legacy stored image string to array\r\n                                quantity: item.quantity,\r\n                                category: item.category,\r\n                                pack: item.pack,\r\n                                color: item.color\r\n                            }));\r\n                            setItems(mappedItems);\r\n                        }\r\n                    }\r\n\r\n                } catch (error: any) {\r\n                    // If error is empty or RLS-related, silently fall back to empty cart\r\n                    // This happens when RLS policies haven't been set up yet\r\n                    const isRLSError = !error?.message || error?.code === '42501' || error?.code === 'PGRST301';\r\n\r\n                    if (isRLSError) {\r\n                        console.warn(\"Cart access blocked (likely RLS policies not set up). Using empty cart.\");\r\n                        setItems([]);\r\n                    } else {\r\n                        console.error(\"Error loading cart from Supabase:\", error);\r\n                        console.error(\"Error details:\", {\r\n                            message: error?.message,\r\n                            code: error?.code,\r\n                            details: error?.details,\r\n                            hint: error?.hint\r\n                        });\r\n                    }\r\n                }\r\n\r\n            } else {\r\n                // Load from LocalStorage\r\n                const storedCart = localStorage.getItem('cart');\r\n                if (storedCart) {\r\n                    try {\r\n                        setItems(JSON.parse(storedCart));\r\n                    } catch (error) {\r\n                        console.error('Failed to parse cart from local storage:', error);\r\n                        setItems([]);\r\n                    }\r\n                } else {\r\n                    // Explicitly clear items if no local cart found (e.g. after logout)\r\n                    setItems([]);\r\n                }\r\n            }\r\n            setLoading(false);\r\n            setIsInitialized(true);\r\n        };\r\n\r\n        loadCart();\r\n    }, [user, authLoading]);\r\n\r\n    // Save to LocalStorage (Always sync as backup/cache)\r\n    useEffect(() => {\r\n        if (!authLoading && isInitialized) {\r\n            localStorage.setItem('cart', JSON.stringify(items));\r\n        }\r\n    }, [items, authLoading, isInitialized]);\r\n\r\n\r\n    // Helper to sanitize optional fields for DB equality checks\r\n    const sanitizeAttr = (val: string | undefined): string | null => {\r\n        return val ? val : null;\r\n    };\r\n\r\n    const addItem = async (newItem: CartItem) => {\r\n        // Normalize new item attributes\r\n        const color = sanitizeAttr(newItem.color);\r\n        const size = sanitizeAttr(newItem.size);\r\n        const pack = sanitizeAttr(newItem.pack);\r\n\r\n        if (user) {\r\n            // Optimistic UI update\r\n            setItems(currentItems => {\r\n                const existingItem = currentItems.find(item =>\r\n                    String(item.id) === String(newItem.id) &&\r\n                    sanitizeAttr(item.color) === color &&\r\n                    sanitizeAttr(item.size) === size &&\r\n                    sanitizeAttr(item.pack) === pack\r\n                );\r\n\r\n                if (existingItem) {\r\n                    return currentItems.map(item =>\r\n                        (String(item.id) === String(newItem.id) &&\r\n                            sanitizeAttr(item.color) === color &&\r\n                            sanitizeAttr(item.size) === size &&\r\n                            sanitizeAttr(item.pack) === pack)\r\n                            ? { ...item, quantity: item.quantity + newItem.quantity }\r\n                            : item\r\n                    );\r\n                }\r\n                return [...currentItems, newItem];\r\n            });\r\n\r\n            try {\r\n                // Fetch cart ID or create if missing\r\n                let { data: cart } = await supabase.from('carts').select('id').eq('user_id', user.id).single();\r\n\r\n                if (!cart) {\r\n                    const { data: newCart, error: createError } = await supabase\r\n                        .from('carts')\r\n                        .insert([{ user_id: user.id }])\r\n                        .select('id')\r\n                        .single();\r\n                    if (createError) throw createError;\r\n                    cart = newCart;\r\n                }\r\n\r\n                if (!cart) return;\r\n\r\n                // Check dependencies using specific filters matching the sanitization\r\n                let query = supabase\r\n                    .from('cart_items')\r\n                    .select('*')\r\n                    .eq('cart_id', cart.id)\r\n                    .eq('product_id', newItem.id);\r\n\r\n                // Add explicit filters for optional attributes\r\n                if (color) query = query.eq('color', color);\r\n                else query = query.is('color', null);\r\n\r\n                // Note: unique constraint is (cart_id, product_id, color). \r\n                // We trust the constraint but need to find the specific row to update.\r\n                const { data: existingDbItems } = await query;\r\n\r\n                // Manual filtering if needed (to be extra safe against DB weirdness) or just take first\r\n                const existingDbItem = existingDbItems && existingDbItems.length > 0 ? existingDbItems[0] : null;\r\n\r\n                if (existingDbItem) {\r\n                    const { error: updateError } = await supabase\r\n                        .from('cart_items')\r\n                        .update({ quantity: existingDbItem.quantity + newItem.quantity })\r\n                        .eq('id', existingDbItem.id);\r\n\r\n                    if (updateError) console.warn(\"CartContext: Update item error (UI already updated):\", updateError);\r\n                } else {\r\n                    const { error: insertError } = await supabase.from('cart_items').insert([{\r\n                        cart_id: cart.id,\r\n                        product_id: String(newItem.id), // Ensure string\r\n                        name: newItem.name,\r\n                        price: newItem.price,\r\n                        image: newItem.images[0] || '',\r\n                        quantity: newItem.quantity,\r\n                        category: newItem.category,\r\n                        pack: pack,\r\n                        color: color,\r\n                        size: size\r\n                    }]);\r\n\r\n                    if (insertError) console.warn(\"CartContext: Insert item error (UI already updated):\", insertError);\r\n                }\r\n\r\n            } catch (error) {\r\n                // Silently log errors - optimistic update already happened\r\n                // Only log to console for debugging, don't show to user\r\n                console.warn(\"CartContext: Error syncing item to database (item already added to UI):\", error);\r\n            }\r\n\r\n        } else {\r\n            // Guest Logic\r\n            setItems(currentItems => {\r\n                const existingItem = currentItems.find(item =>\r\n                    String(item.id) === String(newItem.id) &&\r\n                    item.color === newItem.color // Simple check for guest\r\n                );\r\n                if (existingItem) {\r\n                    return currentItems.map(item =>\r\n                        (String(item.id) === String(newItem.id) && item.color === newItem.color)\r\n                            ? { ...item, quantity: item.quantity + newItem.quantity }\r\n                            : item\r\n                    );\r\n                }\r\n                return [...currentItems, newItem];\r\n            });\r\n        }\r\n    };\r\n\r\n    const removeItem = async (id: number | string, color?: string) => {\r\n        const normColor = sanitizeAttr(color);\r\n\r\n        setItems(currentItems => currentItems.filter(item => {\r\n            const isSameId = String(item.id) === String(id);\r\n            const isSameColor = sanitizeAttr(item.color) === normColor;\r\n            return !(isSameId && isSameColor);\r\n        }));\r\n\r\n        if (user) {\r\n            try {\r\n                const { data: cart } = await supabase.from('carts').select('id').eq('user_id', user.id).single();\r\n                if (cart) {\r\n                    let query = supabase\r\n                        .from('cart_items')\r\n                        .delete()\r\n                        .eq('cart_id', cart.id)\r\n                        .eq('product_id', id);\r\n\r\n                    if (normColor) query = query.eq('color', normColor);\r\n                    else query = query.is('color', null);\r\n\r\n                    await query;\r\n                }\r\n            } catch (error) {\r\n                console.warn(\"CartContext: Error removing item from database (UI already updated):\", error);\r\n            }\r\n        }\r\n    };\r\n\r\n    const updateQuantity = async (id: number | string, delta: number, color?: string) => {\r\n        const normColor = sanitizeAttr(color);\r\n        let newQuantity = 0;\r\n\r\n        setItems(currentItems =>\r\n            currentItems.map(item => {\r\n                if (String(item.id) === String(id) && sanitizeAttr(item.color) === normColor) {\r\n                    newQuantity = Math.max(1, item.quantity + delta);\r\n                    return { ...item, quantity: newQuantity };\r\n                }\r\n                return item;\r\n            })\r\n        );\r\n\r\n        if (user) {\r\n            try {\r\n                const { data: cart } = await supabase.from('carts').select('id').eq('user_id', user.id).single();\r\n                if (cart) {\r\n                    let query = supabase\r\n                        .from('cart_items')\r\n                        .update({ quantity: newQuantity })\r\n                        .eq('cart_id', cart.id)\r\n                        .eq('product_id', id);\r\n\r\n                    if (normColor) query = query.eq('color', normColor);\r\n                    else query = query.is('color', null);\r\n\r\n                    await query;\r\n                }\r\n            } catch (error) {\r\n                console.warn(\"CartContext: Error updating quantity in database (UI already updated):\", error);\r\n            }\r\n        }\r\n    };\r\n\r\n    const clearCart = async () => {\r\n        setItems([]);\r\n        if (user) {\r\n            try {\r\n                const { data: cart } = await supabase.from('carts').select('id').eq('user_id', user.id).single();\r\n                if (cart) {\r\n                    await supabase.from('cart_items').delete().eq('cart_id', cart.id);\r\n                }\r\n            } catch (error) {\r\n                console.warn(\"CartContext: Error clearing database cart (UI already updated):\", error);\r\n            }\r\n        }\r\n    };\r\n\r\n    const totalPrice = items.reduce((total, item) => total + (item.price * item.quantity), 0);\r\n    const totalItems = items.reduce((total, item) => total + item.quantity, 0);\r\n\r\n    return (\r\n        <CartContext.Provider value={{ items, addItem, removeItem, updateQuantity, clearCart, totalPrice, totalItems, loading }}>\r\n            {children}\r\n        </CartContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useCart() {\r\n    return useContext(CartContext);\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\context\\FlyToCartContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\context\\ThemeProvider.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\context\\UIContext.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\context\\WishlistContext.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook React.useCallback has a missing dependency: 'supabase'. Either include it or remove the dependency array.","line":38,"column":8,"nodeType":"ArrayExpression","endLine":38,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [supabase, user?.id]","fix":{"range":[1370,1376],"text":"[supabase, user?.id]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\nimport { createClient } from '@/lib/supabase/client';\r\nimport { useAuth } from './AuthContext';\r\n\r\ninterface WishlistContextType {\r\n    wishlistIds: number[];\r\n    addToWishlist: (productId: number) => Promise<void>;\r\n    removeFromWishlist: (productId: number) => Promise<void>;\r\n    isInWishlist: (productId: number) => boolean;\r\n    loading: boolean;\r\n}\r\n\r\nconst WishlistContext = createContext<WishlistContextType | undefined>(undefined);\r\n\r\nexport function WishlistProvider({ children }: { children: ReactNode }) {\r\n    const { user } = useAuth();\r\n    const supabase = createClient();\r\n    const [wishlistIds, setWishlistIds] = useState<number[]>([]);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const fetchWishlistIds = React.useCallback(async () => {\r\n        try {\r\n            setLoading(true);\r\n            const { data, error } = await supabase\r\n                .from('wishlists')\r\n                .select('product_id')\r\n                .eq('user_id', user?.id);\r\n\r\n            if (error) throw error;\r\n            setWishlistIds(data.map((item: any) => item.product_id));\r\n        } catch (error) {\r\n            console.error('Error fetching wishlist:', error);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    }, [user]);\r\n\r\n    useEffect(() => {\r\n        if (user) {\r\n            fetchWishlistIds();\r\n        } else {\r\n            setWishlistIds([]);\r\n        }\r\n    }, [user, fetchWishlistIds]);\r\n\r\n    const addToWishlist = async (productId: number) => {\r\n        if (!user) return;\r\n        try {\r\n            // Optimistic update\r\n            setWishlistIds(prev => [...prev, productId]);\r\n\r\n            const { error } = await supabase\r\n                .from('wishlists')\r\n                .insert({ user_id: user.id, product_id: productId });\r\n\r\n            if (error) {\r\n                // Revert on error\r\n                setWishlistIds(prev => prev.filter(id => id !== productId));\r\n                throw error;\r\n            }\r\n        } catch (error) {\r\n            console.error('Error adding to wishlist:', error);\r\n            alert('Failed to add to wishlist');\r\n        }\r\n    };\r\n\r\n    const removeFromWishlist = async (productId: number) => {\r\n        if (!user) return;\r\n        try {\r\n            // Optimistic update\r\n            setWishlistIds(prev => prev.filter(id => id !== productId));\r\n\r\n            const { error } = await supabase\r\n                .from('wishlists')\r\n                .delete()\r\n                .eq('user_id', user.id)\r\n                .eq('product_id', productId);\r\n\r\n            if (error) {\r\n                // Revert\r\n                setWishlistIds(prev => [...prev, productId]);\r\n                throw error;\r\n            }\r\n        } catch (error) {\r\n            console.error('Error removing from wishlist:', error);\r\n        }\r\n    };\r\n\r\n    const isInWishlist = (productId: number) => wishlistIds.includes(productId);\r\n\r\n    return (\r\n        <WishlistContext.Provider value={{ wishlistIds, addToWishlist, removeFromWishlist, isInWishlist, loading }}>\r\n            {children}\r\n        </WishlistContext.Provider>\r\n    );\r\n}\r\n\r\nexport function useWishlist() {\r\n    const context = useContext(WishlistContext);\r\n    if (context === undefined) {\r\n        throw new Error('useWishlist must be used within a WishlistProvider');\r\n    }\r\n    return context;\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\lib\\api.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'phoneQuery' is defined but never used.","line":263,"column":36,"nodeType":"Identifier","messageId":"unusedVar","endLine":263,"endColumn":46}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createClient } from '@/lib/supabase/client';\r\n\r\nconst supabase = createClient();\r\n\r\nexport interface Category {\r\n    id: string;\r\n    name: string;\r\n    slug: string;\r\n    img: string; // Icon/Slider Image\r\n    banner?: string; // Hero Banner Image\r\n    subcategories: { id?: string; name: string; count?: number }[];\r\n}\r\n\r\nexport interface Product {\r\n    id: number;\r\n    name: string;\r\n    category: string;\r\n    subcategory?: string; // Mapped from subcategories.name\r\n    price: number;\r\n    originalPrice?: number;\r\n    discountPercent?: number;\r\n    specialCategoryLabel?: string; // e.g. \"Flash Deal\"\r\n    images: string[];\r\n    description?: string;\r\n    quantity?: string; // Display quantity e.g. \"1kg\"\r\n    stockQuantity: number;\r\n    colors: string[];\r\n    sizes?: string[];\r\n    createdAt: string; // ISO date string\r\n    average_rating?: number;\r\n    reviews_count?: number;\r\n    shipping_inside_dhaka?: number;\r\n    shipping_outside_dhaka?: number;\r\n    vendor_name?: string;\r\n    sold_count?: number;\r\n    shop_name?: string;\r\n    // SEO Fields\r\n    metaTitle?: string;\r\n    metaDescription?: string;\r\n    canonicalUrl?: string;\r\n    keywords?: string[];\r\n    ogImage?: string;\r\n    noIndex?: boolean;\r\n}\r\n\r\n// Helper to map DB result to app interface\r\nfunction mapCategory(row: any): Category {\r\n    return {\r\n        id: row.id,\r\n        name: row.name,\r\n        slug: row.slug,\r\n        img: row.image_url,\r\n        banner: row.banner_url || row.image_url, // Fallback to icon if banner missing\r\n        // Filter out hidden categories if necessary, but this mapper is usually for valid categories\r\n        subcategories: row.subcategories\r\n            ? row.subcategories.map((s: any) => ({\r\n                name: s.name,\r\n                count: s.products ? s.products[0]?.count || 0 : 0\r\n            }))\r\n            : []\r\n    };\r\n}\r\n\r\nfunction mapProduct(row: any): Product {\r\n    // V2: Pricing is already persistent in the DB.\r\n    // 'price' is the current active price (discounted or regular).\r\n    // 'original_price' is the previous price (if any).\r\n    // 'discount_percent' is stored directly.\r\n\r\n    return {\r\n        id: row.id,\r\n        name: row.name,\r\n        category: row.categories?.name || 'Unknown',\r\n        subcategory: row.subcategories?.name,\r\n        price: row.price,\r\n        originalPrice: row.original_price,\r\n        discountPercent: row.discount_percent > 0 ? row.discount_percent : undefined,\r\n        specialCategoryLabel: row.special_categories?.name,\r\n        // Ensure images is an array and filter out empty strings/nulls\r\n        images: Array.isArray(row.images) ? row.images.filter((img: any) => img && typeof img === 'string' && img.trim() !== '') : [],\r\n        description: row.description,\r\n        quantity: row.quantity_label,\r\n        stockQuantity: row.stock_quantity || 0,\r\n        colors: row.colors || [],\r\n        sizes: row.sizes || [],\r\n        createdAt: row.created_at,\r\n        average_rating: row.average_rating,\r\n        reviews_count: row.reviews_count,\r\n        shipping_inside_dhaka: row.shipping_inside_dhaka,\r\n        shipping_outside_dhaka: row.shipping_outside_dhaka,\r\n        vendor_name: row.vendor_name,\r\n        sold_count: row.sold_count || 0,\r\n        shop_name: row.shop_name,\r\n        // Map SEO fields\r\n        metaTitle: row.meta_title,\r\n        metaDescription: row.meta_description,\r\n        canonicalUrl: row.canonical_url,\r\n        keywords: row.keywords || [],\r\n        ogImage: row.og_image,\r\n        noIndex: row.no_index || false\r\n    };\r\n}\r\n\r\nexport async function getCategories(): Promise<Category[]> {\r\n    const { data, error } = await supabase\r\n        .from('categories')\r\n        .select(`\r\n            id, name, slug, image_url, banner_url, is_hidden,\r\n            subcategories (\r\n                name,\r\n                products:products(count)\r\n            )\r\n        `)\r\n        .eq('is_hidden', false);\r\n\r\n    if (error) {\r\n        console.error('Error fetching categories:', error);\r\n        return [];\r\n    }\r\n\r\n    return data.map(mapCategory);\r\n}\r\n\r\nexport async function getCategory(slug: string): Promise<Category | null> {\r\n    const { data, error } = await supabase\r\n        .from('categories')\r\n        .select(`\r\n            id, name, slug, image_url, banner_url, is_hidden,\r\n            subcategories (\r\n                name,\r\n                products:products(count)\r\n            )\r\n        `)\r\n        .eq('slug', slug)\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error(`Error fetching category ${slug}:`, error);\r\n        return null;\r\n    }\r\n\r\n    return mapCategory(data);\r\n}\r\n\r\nexport async function getCategoryById(id: string): Promise<Category | null> {\r\n    const { data, error } = await supabase\r\n        .from('categories')\r\n        .select(`\r\n            id, name, slug, image_url, banner_url, is_hidden,\r\n            subcategories ( id, name )\r\n        `)\r\n        .eq('id', id)\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error(`Error fetching category ${id}:`, error);\r\n        return null;\r\n    }\r\n\r\n    return {\r\n        ...mapCategory(data),\r\n        subcategories: data.subcategories // Keep IDs for editing\r\n    };\r\n}\r\n\r\nexport async function createCategory(category: { name: string; slug: string; image_url: string; banner_url?: string; subcategories?: string[] }) {\r\n    // 1. Insert Category\r\n    const { data: newCat, error } = await supabase\r\n        .from('categories')\r\n        .insert({\r\n            name: category.name,\r\n            slug: category.slug,\r\n            image_url: category.image_url,\r\n            banner_url: category.banner_url\r\n        })\r\n        .select()\r\n        .single();\r\n\r\n    if (error) throw error;\r\n\r\n    // 2. Insert Subcategories\r\n    if (category.subcategories && category.subcategories.length > 0) {\r\n        const subs = category.subcategories.map(name => ({\r\n            category_id: newCat.id,\r\n            name\r\n        }));\r\n        const { error: subError } = await supabase.from('subcategories').insert(subs);\r\n        if (subError) throw subError;\r\n    }\r\n}\r\n\r\nexport async function updateCategory(id: string, category: { name: string; slug: string; image_url: string; banner_url?: string; subcategories?: { id?: string; name: string }[] }) {\r\n    // 1. Update Category\r\n    const { error } = await supabase\r\n        .from('categories')\r\n        .update({\r\n            name: category.name,\r\n            slug: category.slug,\r\n            image_url: category.image_url,\r\n            banner_url: category.banner_url\r\n        })\r\n        .eq('id', id);\r\n\r\n    if (error) throw error;\r\n\r\n    // 2. Manage Subcategories (Simple Replace or Diff?)\r\n    // Simple approach: Delete all and re-insert is risky for product FKs.\r\n    // Better: Upsert explicit IDs, insert new ones, delete missing?\r\n    // For this demo, we'll just insert new ones and update existing names. Deletion is tricky if products depend on them.\r\n    // Let's just Insert new ones for now and Update existing.\r\n    if (category.subcategories) {\r\n        for (const sub of category.subcategories) {\r\n            if (sub.id) {\r\n                await supabase.from('subcategories').update({ name: sub.name }).eq('id', sub.id);\r\n            } else {\r\n                await supabase.from('subcategories').insert({ category_id: id, name: sub.name });\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport async function deleteCategory(id: string) {\r\n    // Check for products in this category first\r\n    const { count, error: countError } = await supabase\r\n        .from('products')\r\n        .select('*', { count: 'exact', head: true })\r\n        .eq('category_id', id);\r\n\r\n    if (countError) {\r\n        console.error('Error checking products:', countError);\r\n        throw new Error('Failed to verify category products.');\r\n    }\r\n\r\n    if (count !== null && count > 0) {\r\n        throw new Error(`Cannot delete category. It contains ${count} products. Please remove/move them first.`);\r\n    }\r\n\r\n    const { error } = await supabase.from('categories').delete().eq('id', id);\r\n    if (error) throw error;\r\n}\r\n\r\nexport async function getCategoryProducts(categoryId: string) {\r\n    const { data, error } = await supabase\r\n        .from('products')\r\n        .select('id, name, stock_quantity, image_url')\r\n        .eq('category_id', categoryId)\r\n        .eq('is_deleted', false);\r\n\r\n    if (error) {\r\n        console.error('Error fetching category products:', error);\r\n        return [];\r\n    }\r\n    return data.map(p => ({ ...p, image: p.image_url }));\r\n}\r\n\r\n\r\n\r\nexport async function deleteSubcategory(id: string) {\r\n    const { error } = await supabase.from('subcategories').delete().eq('id', id);\r\n    if (error) throw error;\r\n}\r\n\r\nexport async function getCustomers(phoneQuery?: string) {\r\n    const { data, error } = await supabase\r\n        .from('User')\r\n        .select('*');\r\n\r\n    if (error) {\r\n        console.error('Error fetching customers:', error);\r\n        return [];\r\n    }\r\n    // Map User table fields to profile-like structure\r\n    return data.map((user: any) => ({\r\n        id: user.id,\r\n        full_name: user.name,\r\n        avatar_url: user.image,\r\n        phone: user.phone,\r\n        email: user.email,\r\n        created_at: user.createdAt\r\n    }));\r\n}\r\n\r\nexport async function getCustomerById(id: string) {\r\n    const { data, error } = await supabase\r\n        .from('User')\r\n        .select('*')\r\n        .eq('id', id)\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error(`Error fetching customer ${id}:`, error);\r\n        return null;\r\n    }\r\n    return {\r\n        ...data,\r\n        full_name: data.name,\r\n        avatar_url: data.image\r\n    };\r\n}\r\n\r\n\r\n\r\nexport async function getSalesAnalytics() {\r\n    const thirtyDaysAgo = new Date();\r\n    thirtyDaysAgo.setDate(thirtyDaysAgo.getDate() - 30);\r\n\r\n    const { data: orders, error } = await supabase\r\n        .from('orders')\r\n        .select('created_at, total_amount')\r\n        .eq('status', 'delivered')\r\n        .gte('created_at', thirtyDaysAgo.toISOString())\r\n        .order('created_at', { ascending: true });\r\n\r\n    if (error) {\r\n        console.error('Error fetching sales analytics:', error);\r\n        return [];\r\n    }\r\n\r\n    // Group by Date\r\n    const salesMap = new Map<string, number>();\r\n\r\n    // Initialize last 30 days with 0\r\n    for (let i = 0; i < 30; i++) {\r\n        const d = new Date();\r\n        d.setDate(d.getDate() - i);\r\n        salesMap.set(d.toLocaleDateString('en-US'), 0);\r\n    }\r\n\r\n    orders.forEach(order => {\r\n        const date = new Date(order.created_at).toLocaleDateString('en-US');\r\n        const current = salesMap.get(date) || 0;\r\n        salesMap.set(date, current + order.total_amount);\r\n    });\r\n\r\n    return Array.from(salesMap.entries())\r\n        .map(([date, sales]) => ({ name: date.split('/')[0] + '/' + date.split('/')[1], sales, fullDate: date }))\r\n        .sort((a, b) => new Date(a.fullDate).getTime() - new Date(b.fullDate).getTime());\r\n}\r\n\r\nexport async function getCategoryStats() {\r\n    try {\r\n        // Try to fetch from view first (if user ran the SQL)\r\n        const { data: viewData, error: viewError } = await supabase\r\n            .from('category_stats')\r\n            .select('*')\r\n            .order('total_items_sold', { ascending: false });\r\n\r\n        if (!viewError && viewData) {\r\n            const total = viewData.reduce((sum, item) => sum + item.total_items_sold, 0);\r\n            return viewData.map((item: any) => ({\r\n                name: item.category,\r\n                count: item.total_items_sold,\r\n                percentage: total > 0 ? Math.round((item.total_items_sold / total) * 100) : 0\r\n            }));\r\n        }\r\n\r\n        // Fallback: Client-side aggregation\r\n        const { data, error } = await supabase\r\n            .from('order_items')\r\n            .select('category, quantity');\r\n\r\n        if (error) throw error;\r\n\r\n        const stats = new Map<string, number>();\r\n        let totalItems = 0;\r\n\r\n        data.forEach((item: any) => {\r\n            if (item.category) {\r\n                const current = stats.get(item.category) || 0;\r\n                stats.set(item.category, current + item.quantity);\r\n                totalItems += item.quantity;\r\n            }\r\n        });\r\n\r\n        return Array.from(stats.entries())\r\n            .map(([name, count]) => ({\r\n                name,\r\n                count,\r\n                percentage: totalItems > 0 ? Math.round((count / totalItems) * 100) : 0\r\n            }))\r\n            .sort((a, b) => b.count - a.count);\r\n\r\n    } catch (error) {\r\n        console.error('Error fetching category stats:', error);\r\n        return [];\r\n    }\r\n}\r\n\r\nexport async function getSpecialCategories(): Promise<{ id: number; name: string; description?: string; image_url?: string }[]> {\r\n    const { data, error } = await supabase\r\n        .from('special_categories')\r\n        .select('id, name, description, image_url')\r\n        .eq('active', true);\r\n\r\n    if (error) {\r\n        console.error('Error fetching special categories:', error);\r\n        return [];\r\n    }\r\n    return data;\r\n}\r\n\r\nexport async function searchProducts(query: string): Promise<Product[]> {\r\n    if (!query) return [];\r\n\r\n    const { data, error } = await supabase\r\n        .from('products')\r\n        .select(`\r\n            *,\r\n            categories (name),\r\n            special_categories (name),\r\n            subcategories (name)\r\n        `)\r\n        .eq('is_deleted', false) // Soft delete filter\r\n        .ilike('name', `%${query}%`)\r\n        .limit(5);\r\n\r\n    if (error) {\r\n        console.error('Error searching products:', error);\r\n        return [];\r\n    }\r\n\r\n    return data.map(mapProduct);\r\n}\r\n\r\nexport async function createSpecialCategory(name: string, description?: string, imageUrl?: string) {\r\n    const { error } = await supabase\r\n        .from('special_categories')\r\n        .insert({ name, description, image_url: imageUrl });\r\n\r\n    if (error) {\r\n        console.error('Error creating special category:', error);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport async function deleteSpecialCategory(id: number) {\r\n    const { error } = await supabase\r\n        .from('special_categories')\r\n        .delete()\r\n        .eq('id', id);\r\n\r\n    if (error) {\r\n        console.error('Error deleting special category:', error);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport interface ProductFilterOptions {\r\n    query?: string;\r\n    categoryId?: string;\r\n    sortBy?: 'price_asc' | 'price_desc' | 'stock_asc' | 'stock_desc' | 'newest';\r\n    minPrice?: number;\r\n    maxPrice?: number;\r\n    page?: number;\r\n    limit?: number;\r\n}\r\n\r\nexport interface PaginatedProducts {\r\n    data: Product[];\r\n    count: number;\r\n    page: number;\r\n    pageSize: number;\r\n    totalPages: number;\r\n}\r\n\r\nexport async function getProducts(options?: ProductFilterOptions | string): Promise<Product[]> {\r\n    const filter = typeof options === 'string' ? { query: options } : (options || {});\r\n\r\n    let query = supabase\r\n        .from('products')\r\n        .select(`\r\n            *,\r\n            categories (name),\r\n            special_categories (name),\r\n            subcategories (name)\r\n        `)\r\n        .eq('is_deleted', false);\r\n\r\n    if (filter.query) {\r\n        query = query.ilike('name', `%${filter.query}%`);\r\n    }\r\n\r\n    if (filter.categoryId) {\r\n        query = query.eq('category_id', filter.categoryId);\r\n    }\r\n\r\n    if (filter.minPrice !== undefined) {\r\n        query = query.gte('price', filter.minPrice);\r\n    }\r\n\r\n    if (filter.maxPrice !== undefined) {\r\n        query = query.lte('price', filter.maxPrice);\r\n    }\r\n\r\n    if (filter.sortBy) {\r\n        switch (filter.sortBy) {\r\n            case 'price_asc': query = query.order('price', { ascending: true }); break;\r\n            case 'price_desc': query = query.order('price', { ascending: false }); break;\r\n            case 'stock_asc': query = query.order('stock_quantity', { ascending: true }); break;\r\n            case 'stock_desc': query = query.order('stock_quantity', { ascending: false }); break;\r\n            case 'newest': query = query.order('created_at', { ascending: false }); break;\r\n            default: query = query.order('id', { ascending: true });\r\n        }\r\n    } else {\r\n        query = query.order('id', { ascending: true });\r\n    }\r\n\r\n    // No pagination here to maintain backward compatibility\r\n\r\n    const { data, error } = await query;\r\n\r\n    if (error) {\r\n        console.error('Error fetching products:', error);\r\n        return [];\r\n    }\r\n\r\n    return data.map(mapProduct);\r\n}\r\n\r\nexport async function getProductsPaginated(options: ProductFilterOptions): Promise<PaginatedProducts> {\r\n    const page = options.page || 1;\r\n    const limit = options.limit || 10;\r\n    const from = (page - 1) * limit;\r\n    const to = from + limit - 1;\r\n\r\n    let query = supabase\r\n        .from('products')\r\n        .select(`\r\n            *,\r\n            categories (name),\r\n            special_categories (name),\r\n            subcategories (name)\r\n        `, { count: 'exact' })\r\n        .eq('is_deleted', false);\r\n\r\n    if (options.query) {\r\n        query = query.ilike('name', `%${options.query}%`);\r\n    }\r\n\r\n    if (options.categoryId) {\r\n        query = query.eq('category_id', options.categoryId);\r\n    }\r\n\r\n    if (options.minPrice !== undefined) {\r\n        query = query.gte('price', options.minPrice);\r\n    }\r\n\r\n    if (options.maxPrice !== undefined) {\r\n        query = query.lte('price', options.maxPrice);\r\n    }\r\n\r\n    // Apply Sorting\r\n    if (options.sortBy) {\r\n        switch (options.sortBy) {\r\n            case 'price_asc': query = query.order('price', { ascending: true }); break;\r\n            case 'price_desc': query = query.order('price', { ascending: false }); break;\r\n            case 'stock_asc': query = query.order('stock_quantity', { ascending: true }); break;\r\n            case 'stock_desc': query = query.order('stock_quantity', { ascending: false }); break;\r\n            case 'newest': query = query.order('created_at', { ascending: false }); break;\r\n            default: query = query.order('id', { ascending: true });\r\n        }\r\n    } else {\r\n        query = query.order('id', { ascending: true });\r\n    }\r\n\r\n    // Apply Pagination\r\n    query = query.range(from, to);\r\n\r\n    const { data, count, error } = await query;\r\n\r\n    if (error) {\r\n        console.error('Error fetching paginated products:', error);\r\n        return { data: [], count: 0, page, pageSize: limit, totalPages: 0 };\r\n    }\r\n\r\n    return {\r\n        data: (data || []).map(mapProduct),\r\n        count: count || 0,\r\n        page,\r\n        pageSize: limit,\r\n        totalPages: count ? Math.ceil(count / limit) : 0\r\n    };\r\n}\r\n\r\nexport async function getProduct(id: string): Promise<Product | null> {\r\n    const { data, error } = await supabase\r\n        .from('products')\r\n        .select(`\r\n            *,\r\n            categories (name),\r\n            subcategories (name),\r\n            special_categories (name)\r\n        `)\r\n        .eq('id', id)\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error(`Error fetching product ${id}:`, error);\r\n        return null;\r\n    }\r\n\r\n    return mapProduct(data);\r\n}\r\n\r\n// Sort options type (removed popularity)\r\nexport type SortOption = 'price-asc' | 'price-desc' | 'newest';\r\n\r\n// Debug mode: Simplified query\r\nexport async function getProductsByCategory(slug: string, subcategory?: string, sort?: any): Promise<Product[]> {\r\n    let query = supabase\r\n        .from('products')\r\n        .select(`\r\n            *,\r\n            categories!inner (name, slug),\r\n            subcategories (name),\r\n            special_categories (name)\r\n        `)\r\n        .eq('is_deleted', false) // Soft delete filter\r\n        .eq('categories.slug', slug);\r\n\r\n    if (subcategory) {\r\n        query = supabase\r\n            .from('products')\r\n            .select(`\r\n                *,\r\n                categories!inner (name, slug),\r\n                subcategories!inner (name),\r\n                special_categories (name)\r\n            `)\r\n            .eq('is_deleted', false) // Soft delete filter\r\n            .eq('categories.slug', slug)\r\n            .eq('subcategories.name', subcategory);\r\n    }\r\n\r\n    // Sorting\r\n    if (sort) {\r\n        switch (sort) {\r\n            case 'price-asc':\r\n                query = query.order('price', { ascending: true });\r\n                break;\r\n            case 'price-desc':\r\n                query = query.order('price', { ascending: false });\r\n                break;\r\n            case 'newest':\r\n                query = query.order('created_at', { ascending: false });\r\n                break;\r\n            default:\r\n                // Default to id\r\n                query = query.order('id', { ascending: true });\r\n        }\r\n    } else {\r\n        // Default sort\r\n        query = query.order('id', { ascending: true });\r\n    }\r\n\r\n    const { data, error } = await query;\r\n\r\n    if (error) {\r\n        console.error(`Error fetching products for category ${slug}:`, error);\r\n        return [];\r\n    }\r\n\r\n    return data.map(mapProduct);\r\n}\r\n\r\n// Fetch products by Special Category Name\r\nexport async function getProductsBySpecialCategory(specialCategoryName: string, sort?: string): Promise<Product[]> {\r\n    const { data: specialCat } = await supabase.from('special_categories').select('id').eq('name', specialCategoryName).single();\r\n    if (!specialCat) return [];\r\n\r\n    let query = supabase\r\n        .from('products')\r\n        .select(`\r\n            *,\r\n            categories (name, slug),\r\n            special_categories (name),\r\n            subcategories (name)\r\n        `)\r\n        .eq('is_deleted', false)\r\n        .eq('special_category_id', specialCat.id);\r\n\r\n    // Reuse sort logic\r\n    if (sort) {\r\n        switch (sort) {\r\n            case 'price-asc': query = query.order('price', { ascending: true }); break;\r\n            case 'price-desc': query = query.order('price', { ascending: false }); break;\r\n            case 'newest': query = query.order('created_at', { ascending: false }); break;\r\n            default: query = query.order('id', { ascending: true });\r\n        }\r\n    }\r\n\r\n    const { data, error } = await query;\r\n\r\n    if (error) {\r\n        console.error(`Error fetching products for offer ${specialCategoryName}:`, error);\r\n        return [];\r\n    }\r\n\r\n    return data.map(mapProduct);\r\n}\r\n\r\nexport async function getFeaturedProducts(): Promise<Product[]> {\r\n    // Just return some products for now\r\n    const { data, error } = await supabase\r\n        .from('products')\r\n        .select(`\r\n            *,\r\n            categories (name),\r\n            special_categories (name),\r\n            subcategories (name)\r\n        `)\r\n        .eq('is_deleted', false)\r\n        .eq('is_featured', true)\r\n        .limit(8);\r\n\r\n    if (error) {\r\n        console.error('Error fetching featured products:', error);\r\n        return [];\r\n    }\r\n\r\n    return data.map(mapProduct);\r\n}\r\n\r\nexport async function getBestSellingProducts(limit: number = 8): Promise<Product[]> {\r\n    const { data, error } = await supabase\r\n        .from('products')\r\n        .select(`\r\n            *,\r\n            categories (name),\r\n            special_categories (name),\r\n            subcategories (name)\r\n        `)\r\n        .eq('is_deleted', false)\r\n        .order('sold_count', { ascending: false })\r\n        .limit(limit);\r\n\r\n    if (error) {\r\n        console.error('Error fetching best selling products:', error);\r\n        return [];\r\n    }\r\n\r\n    return data.map(mapProduct);\r\n}\r\n\r\nexport async function getRelatedProducts(productId: string | number, limit: number = 4): Promise<Product[]> {\r\n    // 1. Get current product's category to find related items\r\n    const { data: currentProduct, error: fetchError } = await supabase\r\n        .from('products')\r\n        .select('category_id, subcategory_id')\r\n        .eq('id', productId)\r\n        .single();\r\n\r\n    if (fetchError || !currentProduct) {\r\n        return [];\r\n    }\r\n\r\n    // 2. Fetch products in same category, preferably same subcategory\r\n    let query = supabase\r\n        .from('products')\r\n        .select(`\r\n            *,\r\n            categories (name),\r\n            special_categories (name),\r\n            subcategories (name)\r\n        `)\r\n        .eq('is_deleted', false)\r\n        .eq('category_id', currentProduct.category_id)\r\n        .neq('id', productId) // Exclude self\r\n        .limit(limit);\r\n\r\n    // Optional: Sort by sold_count or random? keeping it simple for now (default ID sort or random?)\r\n    // To make it slightly dynamic/interesting, maybe sort by random if possible? \r\n    // Supabase random sort is tricky. Let's just sort by sold_count desc to show best related items.\r\n    query = query.order('sold_count', { ascending: false });\r\n\r\n    const { data, error } = await query;\r\n\r\n    if (error) {\r\n        console.error('Error fetching related products:', error);\r\n        return [];\r\n    }\r\n\r\n    return data.map(mapProduct);\r\n}\r\n\r\nexport async function createProduct(product: Partial<Product> & { specialCategoryId?: number }) {\r\n    // 1. Get Category ID\r\n    const { data: category } = await supabase\r\n        .from('categories')\r\n        .select('id')\r\n        .eq('name', product.category)\r\n        .single();\r\n\r\n    if (!category) throw new Error(`Category ${product.category} not found`);\r\n\r\n    // 2. Get Subcategory ID (if applicable)\r\n    let subcategoryId = null;\r\n    if (product.subcategory) {\r\n        const { data: sub } = await supabase\r\n            .from('subcategories')\r\n            .select('id')\r\n            .eq('name', product.subcategory)\r\n            .eq('category_id', category.id)\r\n            .single();\r\n        if (sub) subcategoryId = sub.id;\r\n    }\r\n\r\n    // 3. Prepare Data\r\n    // Use provided ID or generate\r\n    const newId = product.id || Math.floor(Math.random() * 90000000) + 10000000;\r\n\r\n    const productData: any = {\r\n        id: newId,\r\n        name: product.name,\r\n        price: product.price,\r\n        original_price: product.originalPrice,\r\n        discount_percent: product.discountPercent || 0,\r\n        description: product.description,\r\n        category_id: category.id,\r\n        subcategory_id: subcategoryId,\r\n        quantity_label: product.quantity,\r\n        stock_quantity: product.stockQuantity,\r\n        images: product.images || [], // Use images array\r\n        colors: product.colors,\r\n        sizes: product.sizes,\r\n        special_category_id: product.specialCategoryId\r\n    };\r\n\r\n    const { data, error } = await supabase\r\n        .from('products')\r\n        .insert(productData)\r\n        .select()\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error('Error creating product:', error);\r\n        throw error;\r\n    }\r\n    return mapProduct(data);\r\n}\r\n\r\n\r\n\r\n\r\nexport async function updateProduct(id: string | number, product: Partial<Product> & { specialCategoryId?: number }) {\r\n    const updates: any = {};\r\n    if (product.name) updates.name = product.name;\r\n    if (product.price !== undefined) updates.price = product.price;\r\n    if (product.originalPrice !== undefined) updates.original_price = product.originalPrice;\r\n    if (product.discountPercent !== undefined) updates.discount_percent = product.discountPercent;\r\n    if (product.description) updates.description = product.description;\r\n    if (product.quantity) updates.quantity_label = product.quantity;\r\n    if (product.stockQuantity !== undefined) updates.stock_quantity = product.stockQuantity;\r\n    if (product.images) updates.images = product.images; // Update images array\r\n    if (product.colors) updates.colors = product.colors;\r\n    if (product.sizes) updates.sizes = product.sizes;\r\n    if (product.specialCategoryId !== undefined) updates.special_category_id = product.specialCategoryId;\r\n\r\n    if (product.category) {\r\n        const { data: category } = await supabase.from('categories').select('id').eq('name', product.category).single();\r\n        if (category) {\r\n            updates.category_id = category.id;\r\n\r\n            // If category changes, we must validate/update subcategory too\r\n            if (product.subcategory) {\r\n                const { data: sub } = await supabase\r\n                    .from('subcategories')\r\n                    .select('id')\r\n                    .eq('name', product.subcategory)\r\n                    .eq('category_id', category.id)\r\n                    .single();\r\n                updates.subcategory_id = sub ? sub.id : null;\r\n            } else {\r\n                updates.subcategory_id = null; // Clear subcategory if not provided on category change? Or keep?\r\n                // Safer to clear if category changed and no sub provided, but user might not send it.\r\n                // let's assume if category is sent, subcategory should be sent if it exists.\r\n            }\r\n        }\r\n    } else if (product.subcategory) {\r\n        // Category didn't change, but subcategory did.\r\n        // We need the current category_id to find the subcategory_id... \r\n        // OR we can just find the subcategory by name (assuming unique names? No, names aren't unique across categories globally usually, but here maybe)\r\n        // Safer to fetch product first or assuming UI sends correct data.\r\n        // Let's rely on UI sending category if it changes.\r\n        // If only subcategory changes, we need to find it.\r\n        // This is complex without category_id. \r\n        // For now, assume Admin UI sends category with subcategory.\r\n    }\r\n\r\n    const { data, error } = await supabase\r\n        .from('products')\r\n        .update(updates)\r\n        .eq('id', id)\r\n        .select()\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error('Error updating product:', error);\r\n        throw error;\r\n    }\r\n    return mapProduct(data);\r\n}\r\n\r\n// Soft Delete Product\r\nexport async function deleteProduct(id: number) {\r\n    const { error } = await supabase\r\n        .from('products')\r\n        .update({\r\n            is_deleted: true,\r\n            deleted_at: new Date()\r\n        })\r\n        .eq('id', id);\r\n\r\n    if (error) {\r\n        console.error('Error deleting product:', error);\r\n        throw error;\r\n    }\r\n}\r\n\r\nexport async function createOrder(\r\n    userId: string,\r\n    totalAmount: number,\r\n    items: any[],\r\n    shippingDetails: {\r\n        name: string;\r\n        phone: string;\r\n        address: string;\r\n    },\r\n    paymentMethod: string = 'cod'\r\n) {\r\n    // 1. Create Order\r\n    const { data: order, error: orderError } = await supabase\r\n        .from('orders')\r\n        .insert({\r\n            user_id: userId,\r\n            total_amount: totalAmount,\r\n            status: 'pending',\r\n            shipping_name: shippingDetails.name,\r\n            shipping_phone: shippingDetails.phone,\r\n            shipping_address: shippingDetails.address,\r\n\r\n            payment_method: paymentMethod,\r\n            payment_status: 'pending'\r\n        })\r\n        .select()\r\n        .single();\r\n\r\n    if (orderError) throw orderError;\r\n\r\n    // 2. Create Order Items\r\n    const orderItems = items.map(item => ({\r\n        order_id: order.id,\r\n        product_id: item.id,\r\n        name: item.name,\r\n        price: item.price,\r\n        quantity: item.quantity,\r\n        image: item.images && item.images.length > 0 ? item.images[0] : (item.image || ''),\r\n        category: item.category,\r\n        size: item.size,\r\n        color: item.color\r\n    }));\r\n\r\n    const { error: itemsError } = await supabase\r\n        .from('order_items')\r\n        .insert(orderItems);\r\n\r\n    if (itemsError) throw itemsError;\r\n\r\n    // 3. Clear Cart (Backend side)\r\n    const { data: cart } = await supabase.from('carts').select('id').eq('user_id', userId).single();\r\n    if (cart) {\r\n        await supabase.from('cart_items').delete().eq('cart_id', cart.id);\r\n    }\r\n\r\n    // 4. Update Stock Logic\r\n    try {\r\n        for (const item of items) {\r\n            // Fetch latest stock to ensure accuracy\r\n            const { data: product, error: fetchError } = await supabase\r\n                .from('products')\r\n                .select('stock_quantity')\r\n                .eq('id', item.id)\r\n                .single();\r\n\r\n            if (product && !fetchError) {\r\n                const newStock = Math.max(0, product.stock_quantity - item.quantity);\r\n                await supabase\r\n                    .from('products')\r\n                    .update({ stock_quantity: newStock })\r\n                    .eq('id', item.id);\r\n            }\r\n        }\r\n    } catch (error) {\r\n        console.error('Error updating stock:', error);\r\n        // We don't throw here to avoid failing the order if stock update fails,\r\n        // but in a production app you might want to handle this differently.\r\n    }\r\n\r\n    return order;\r\n}\r\n\r\nexport async function getOrder(id: string) {\r\n    console.log('getOrder called with id:', id);\r\n\r\n    if (!id) return null;\r\n\r\n    // 1. Fetch Order Metadata (No joins to avoid errors)\r\n    const { data: order, error: orderError } = await supabase\r\n        .from('orders')\r\n        .select('*')\r\n        .eq('id', id)\r\n        .single();\r\n\r\n    if (orderError) {\r\n        console.error('Error fetching order metadata:', orderError);\r\n        console.error('Error details:', {\r\n            message: orderError.message,\r\n            code: orderError.code,\r\n            details: orderError.details,\r\n            hint: orderError.hint\r\n        });\r\n        return null; // Return null to trigger 404 handling in UI\r\n    }\r\n\r\n    // 2. Fetch Order Items (Manual fetch)\r\n    const { data: items, error: itemsError } = await supabase\r\n        .from('order_items')\r\n        .select('*')\r\n        .eq('order_id', id);\r\n\r\n    if (itemsError) {\r\n        console.error('Error fetching order items:', itemsError);\r\n        // Continue even if items fail, to show at least order info? \r\n        // Or fail? UI expects items. Let's return empty array if error.\r\n    }\r\n\r\n    // 3. Fetch User Profile\r\n    // database uses 'User' table, not 'profiles'\r\n    const { data: profile } = await supabase\r\n        .from('User')\r\n        .select('name, phone, image')\r\n        .eq('id', order.user_id)\r\n        .single();\r\n\r\n    // 4. Assemble Result\r\n    const customerName = profile?.name || order.shipping_name || 'Guest';\r\n    const customerPhone = profile?.phone || order.shipping_phone || '';\r\n\r\n    return {\r\n        ...order,\r\n        items: items || [], // Attach manually fetched items\r\n        customer: {\r\n            name: customerName,\r\n            phone: customerPhone,\r\n            avatar: profile?.image,\r\n            id: order.user_id\r\n        }\r\n    };\r\n}\r\n\r\nexport async function getUserOrders(userId: string) {\r\n    console.log('getUserOrders called with userId:', userId);\r\n    console.log('Current user from auth:', (await supabase.auth.getUser()).data.user?.id);\r\n\r\n    const { data, error } = await supabase\r\n        .from('orders')\r\n        .select(`\r\n            *,\r\n            order_items!order_items_order_id_fkey (id)\r\n        `)\r\n        .eq('user_id', userId)\r\n        .order('created_at', { ascending: false });\r\n\r\n    if (error) {\r\n        console.error('Error fetching user orders:', error);\r\n        console.error('Full error object:', JSON.stringify(error, null, 2));\r\n        console.error('Error details:', {\r\n            message: error.message || 'No message',\r\n            code: error.code || 'No code',\r\n            details: error.details || 'No details',\r\n            hint: error.hint || 'No hint',\r\n            statusCode: (error as any).statusCode || 'No status code'\r\n        });\r\n\r\n        // Empty error object usually means RLS is blocking\r\n        if (!error.message && !error.code) {\r\n            console.error('⚠️ EMPTY ERROR - This usually means RLS policies are blocking access!');\r\n            console.error('Please run the fix_order_permissions.sql script in Supabase');\r\n        }\r\n\r\n        return [];\r\n    }\r\n\r\n    console.log(`Found ${data?.length || 0} orders for user ${userId}`);\r\n\r\n    return data.map(order => ({\r\n        ...order,\r\n        item_count: order.order_items.length\r\n    }));\r\n}\r\n\r\nexport async function getAllOrders(searchQuery?: string) {\r\n    let query = supabase\r\n        .from('orders')\r\n        .select(`\r\n            *,\r\n            order_items!order_items_order_id_fkey (id, name, quantity, size, color)\r\n        `)\r\n        .order('created_at', { ascending: false });\r\n\r\n    if (searchQuery) {\r\n        query = query.or(`id.ilike.%${searchQuery}%,shipping_name.ilike.%${searchQuery}%`);\r\n    }\r\n\r\n    const { data, error } = await query;\r\n\r\n    if (error) {\r\n        console.error('Error fetching all orders:', error);\r\n        return [];\r\n    }\r\n\r\n    // Fetch profiles for these users to show dynamic names\r\n    const userIds = Array.from(new Set((data || []).map(o => o.user_id)));\r\n    const { data: profiles } = await supabase\r\n        .from('User')\r\n        .select('id, name, phone, image')\r\n        .in('id', userIds);\r\n\r\n    return (data || []).map(order => {\r\n        const profile = profiles?.find(p => p.id === order.user_id);\r\n        const customerName = profile?.name || order.shipping_name || 'Guest';\r\n        const customerPhone = profile?.phone || order.shipping_phone || '';\r\n\r\n        return {\r\n            ...order,\r\n            item_count: order.order_items ? order.order_items.length : 0,\r\n            items_summary: order.order_items ? order.order_items.map((i: any) => `${i.quantity}x ${i.name}`).join(', ') : '',\r\n            customer: {\r\n                name: customerName,\r\n                phone: customerPhone,\r\n                avatar: profile?.image,\r\n                id: order.user_id\r\n            }\r\n        };\r\n    });\r\n}\r\n\r\nexport async function getLowStockProducts() {\r\n    const { data, error } = await supabase\r\n        .from('products')\r\n        .select(`\r\n            id, name, stock_quantity, price, images,\r\n            categories (name)\r\n        `)\r\n        .lt('stock_quantity', 10);\r\n\r\n    if (error) {\r\n        console.error('Error fetching low stock products:', error);\r\n        return [];\r\n    }\r\n    // Map to consistently use 'image' if needed\r\n    return data.map((p: any) => ({\r\n        ...p,\r\n        image: p.images && p.images.length > 0 ? p.images[0] : '',\r\n        category: p.categories?.name || (Array.isArray(p.categories) ? p.categories[0]?.name : 'Unknown')\r\n    }));\r\n}\r\n\r\nexport async function updateOrderStatus(id: string, status: string) {\r\n    const { error } = await supabase\r\n        .from('orders')\r\n        .update({ status })\r\n        .eq('id', id);\r\n\r\n    if (error) throw error;\r\n}\r\n\r\n// Address Management\r\n\r\nexport interface Address {\r\n    id: string;\r\n    label: string;\r\n    fullName: string;\r\n    phone: string;\r\n    street: string;\r\n    city: string;\r\n    state: string;\r\n    postalCode: string;\r\n    country: string;\r\n    isDefault: boolean;\r\n}\r\n\r\nfunction mapAddress(row: any): Address {\r\n    return {\r\n        id: row.id,\r\n        label: row.label,\r\n        fullName: row.full_name,\r\n        phone: row.phone,\r\n        street: row.street,\r\n        city: row.city,\r\n        state: row.state,\r\n        postalCode: row.postal_code,\r\n        country: row.country,\r\n        isDefault: row.is_default\r\n    };\r\n}\r\n\r\nexport async function getUserAddresses(userId: string): Promise<Address[]> {\r\n    const { data, error } = await supabase\r\n        .from('addresses')\r\n        .select('*')\r\n        .eq('user_id', userId)\r\n        .order('is_default', { ascending: false }) // Default first\r\n        .order('created_at', { ascending: false });\r\n\r\n    if (error) {\r\n        console.error('Error fetching addresses:', error);\r\n        return [];\r\n    }\r\n\r\n    return data.map(mapAddress);\r\n}\r\n\r\nexport async function saveAddress(userId: string, address: Partial<Address>) {\r\n    // If editing, address should have ID\r\n    if (address.id) {\r\n        const { error } = await supabase\r\n            .from('addresses')\r\n            .update({\r\n                label: address.label,\r\n                full_name: address.fullName,\r\n                phone: address.phone,\r\n                street: address.street,\r\n                city: address.city,\r\n                state: address.state,\r\n                postal_code: address.postalCode,\r\n                country: address.country,\r\n                is_default: address.isDefault\r\n            })\r\n            .eq('id', address.id)\r\n            .eq('user_id', userId); // Security check\r\n\r\n        if (error) throw error;\r\n    } else {\r\n        // Creating new\r\n        const { error } = await supabase\r\n            .from('addresses')\r\n            .insert({\r\n                user_id: userId,\r\n                label: address.label,\r\n                full_name: address.fullName,\r\n                phone: address.phone,\r\n                street: address.street,\r\n                city: address.city,\r\n                state: address.state,\r\n                postal_code: address.postalCode,\r\n                country: address.country,\r\n                is_default: address.isDefault\r\n            });\r\n\r\n        if (error) throw error;\r\n    }\r\n}\r\n\r\n// Review Eligibility\r\nexport async function checkReviewEligibility(userId: string, productId: string | number): Promise<boolean> {\r\n    // 1. Check if user ordered the product and it's delivered\r\n    const { data: eligibleOrders, error } = await supabase\r\n        .from('orders')\r\n        .select(`\r\n            id,\r\n            status,\r\n            order_items!inner(product_id)\r\n        `)\r\n        .eq('user_id', userId)\r\n        .eq('status', 'delivered')\r\n        .eq('order_items.product_id', productId)\r\n        .limit(1);\r\n\r\n    if (error) {\r\n        console.error('Error checking eligibility:', error);\r\n        return false;\r\n    }\r\n\r\n    // 2. Check if user ALREADY reviewed it\r\n    const { data: existingReview, error: reviewError } = await supabase\r\n        .from('reviews')\r\n        .select('id')\r\n        .eq('user_id', userId)\r\n        .eq('product_id', productId)\r\n        .maybeSingle();\r\n\r\n    if (reviewError) {\r\n        console.error('Error checking existing reviews:', reviewError);\r\n    }\r\n\r\n    const hasPurchased = eligibleOrders && eligibleOrders.length > 0;\r\n    const hasReviewed = !!existingReview;\r\n\r\n    return hasPurchased && !hasReviewed;\r\n}\r\n\r\nexport async function deleteAddress(id: string) {\r\n    const { error } = await supabase\r\n        .from('addresses')\r\n        .delete()\r\n        .eq('id', id);\r\n\r\n    if (error) throw error;\r\n}\r\n\r\nexport async function setDefaultAddress(userId: string, id: string) {\r\n    // We can rely on the DB trigger to unset others\r\n    const { error } = await supabase\r\n        .from('addresses')\r\n        .update({ is_default: true })\r\n        .eq('id', id)\r\n        .eq('user_id', userId);\r\n\r\n    if (error) throw error;\r\n}\r\n\r\n\r\nexport async function getHeroSettings() {\r\n    const { data, error } = await supabase\r\n        .from('hero_settings')\r\n        .select('*')\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error('Error fetching hero settings:', error);\r\n        // Fallback default\r\n        return {\r\n            title: 'Quality Food For Your Healthy Life',\r\n            subtitle: 'New Season Freshness',\r\n            description: 'Get up to 50% OFF on your first order. Fresh produce delivered from farm to your doorstep.',\r\n            image_url: 'https://lh3.googleusercontent.com/aida-public/AB6AXuBX7x1HBOqMMI518qHW17jKGkryeaKonnXGEbdkBR4GvbEVZENLzYW_8cEKLeU3nLCoxfDxvRuzBWc2UMxkRlp8Qix2LgxHKpsToQHO10vMCHMKjOmg6ucwmqOZ7GIMiSBIxBw0qaqFeK63SiQ5EQ4C-LMvZy28P7MaNy4uzcV2DaK1H5zIykFWkZMYBE6Xh8ac9E1nba7cTZ14OBTrDW-wpN-j8lDq-VbvUaLl6OtViD2uWDMpEBWT1yXDZluirbsS6BEgrgXwzyI',\r\n            button_text: 'Shop Now',\r\n            button_link: '/shop'\r\n        };\r\n    }\r\n    return data;\r\n}\r\n\r\nexport async function updateHeroSettings(settings: any) {\r\n    const { error } = await supabase\r\n        .from('hero_settings')\r\n        .update(settings)\r\n        .eq('id', 1);\r\n\r\n    if (error) throw error;\r\n}\r\n\r\n// -- Notices --\r\nexport interface Notice {\r\n    id: number;\r\n    text: string;\r\n    active: boolean;\r\n}\r\n\r\nexport async function getNotices(onlyActive = true): Promise<Notice[]> {\r\n    let query = supabase.from('notices').select('*').order('created_at', { ascending: false });\r\n\r\n    if (onlyActive) {\r\n        query = query.eq('active', true);\r\n    }\r\n\r\n    const { data, error } = await query;\r\n\r\n    if (error) {\r\n        console.error('Error fetching notices:', error);\r\n        return [];\r\n    }\r\n    return data;\r\n}\r\n\r\nexport async function createNotice(text: string) {\r\n    const { error } = await supabase.from('notices').insert({ text });\r\n    if (error) throw error;\r\n}\r\n\r\nexport async function updateNotice(id: number, updates: Partial<Notice>) {\r\n    const { error } = await supabase.from('notices').update(updates).eq('id', id);\r\n    if (error) throw error;\r\n}\r\n\r\nexport async function deleteNotice(id: number) {\r\n    const { error } = await supabase.from('notices').delete().eq('id', id);\r\n    if (error) throw error;\r\n}\r\n\r\n// -- Ad Scroller --\r\nexport interface AdScroll {\r\n    id: number;\r\n    image_url: string;\r\n    active: boolean;\r\n}\r\n\r\nexport async function getAds(onlyActive = true): Promise<AdScroll[]> {\r\n    let query = supabase.from('ad_scrolls').select('*').order('created_at', { ascending: false });\r\n\r\n    if (onlyActive) {\r\n        query = query.eq('active', true);\r\n    }\r\n\r\n    const { data, error } = await query;\r\n\r\n    if (error) {\r\n        console.error('Error fetching ads:', error);\r\n        return [];\r\n    }\r\n    return data;\r\n}\r\n\r\nexport async function createAd(imageUrl: string) {\r\n    const { error } = await supabase.from('ad_scrolls').insert({ image_url: imageUrl });\r\n    if (error) throw error;\r\n}\r\n\r\nexport async function updateAd(id: number, updates: Partial<AdScroll>) {\r\n    const { error } = await supabase.from('ad_scrolls').update(updates).eq('id', id);\r\n    if (error) throw error;\r\n}\r\n\r\nexport async function deleteAd(id: number) {\r\n    const { error } = await supabase.from('ad_scrolls').delete().eq('id', id);\r\n    if (error) throw error;\r\n}\r\n\r\n// -- Storage --\r\nexport async function uploadHeroImage(file: File): Promise<string> {\r\n    const fileName = `${Date.now()}-${file.name}`;\r\n    const { error } = await supabase.storage\r\n        .from('hero-images')\r\n        .upload(fileName, file, {\r\n            cacheControl: '3600',\r\n            upsert: false\r\n        });\r\n\r\n    if (error) throw error;\r\n\r\n    // Get public URL\r\n    const { data: { publicUrl } } = supabase.storage\r\n        .from('hero-images')\r\n        .getPublicUrl(fileName);\r\n\r\n    return publicUrl;\r\n}\r\n\r\nexport async function uploadAdImage(file: File): Promise<string> {\r\n    const fileName = `${Date.now()}-${file.name}`;\r\n    const { error } = await supabase.storage\r\n        .from('ad-images')\r\n        .upload(fileName, file, {\r\n            cacheControl: '3600',\r\n            upsert: false\r\n        });\r\n\r\n    if (error) throw error;\r\n\r\n    // Get public URL\r\n    const { data: { publicUrl } } = supabase.storage\r\n        .from('ad-images')\r\n        .getPublicUrl(fileName);\r\n\r\n    return publicUrl;\r\n}\r\n\r\nexport async function uploadCategoryImage(file: File, categorySlug: string, type: 'icon' | 'banner'): Promise<string> {\r\n    const fileExt = file.name.split('.').pop();\r\n    const fileName = `${categorySlug}/${type}.${fileExt}`;\r\n\r\n    const { error } = await supabase.storage\r\n        .from('category-images')\r\n        .upload(fileName, file, {\r\n            cacheControl: '3600',\r\n            upsert: true\r\n        });\r\n\r\n    if (error) throw error;\r\n\r\n    const { data: { publicUrl } } = supabase.storage\r\n        .from('category-images')\r\n        .getPublicUrl(fileName);\r\n\r\n    return `${publicUrl}?t=${Date.now()}`;\r\n}\r\n\r\nexport async function uploadSpecialOfferImage(file: File, name: string): Promise<string> {\r\n    const fileExt = file.name.split('.').pop();\r\n    const sanitizedName = name.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/(^-|-$)/g, '');\r\n    const fileName = `${sanitizedName}/${Date.now()}.${fileExt}`;\r\n\r\n    const { error } = await supabase.storage\r\n        .from('special-offer-images')\r\n        .upload(fileName, file, {\r\n            cacheControl: '3600',\r\n            upsert: false // Don't overwrite, unique filename\r\n        });\r\n\r\n    if (error) throw error;\r\n\r\n    const { data: { publicUrl } } = supabase.storage\r\n        .from('special-offer-images')\r\n        .getPublicUrl(fileName);\r\n\r\n    return publicUrl;\r\n}\r\n\r\nexport async function updateSpecialCategory(id: number, name: string, description?: string, imageUrl?: string) {\r\n    const { error } = await supabase.from('special_categories').update({\r\n        name,\r\n        description,\r\n        image_url: imageUrl\r\n    }).eq('id', id);\r\n\r\n    if (error) throw error;\r\n}\r\n\r\n// Admin Reviews Management\r\nexport async function getAdminReviews(filters?: { rating?: number | 'all', visibility?: 'all' | 'visible' | 'hidden' }) {\r\n    let query = supabase\r\n        .from('reviews')\r\n        .select(`\r\n            *,\r\n            profiles (full_name, avatar_url),\r\n            products (name, images)\r\n        `)\r\n        .order('created_at', { ascending: false });\r\n\r\n    // Apply filters\r\n    if (filters?.rating && filters.rating !== 'all') {\r\n        query = query.eq('rating', filters.rating);\r\n    }\r\n\r\n    if (filters?.visibility) {\r\n        if (filters.visibility === 'visible') {\r\n            query = query.eq('is_hidden', false);\r\n        } else if (filters.visibility === 'hidden') {\r\n            query = query.eq('is_hidden', true);\r\n        }\r\n    }\r\n\r\n    const { data, error } = await query;\r\n\r\n    if (error) {\r\n        console.error('Error fetching admin reviews:', error);\r\n        throw error;\r\n    }\r\n    return data;\r\n}\r\n\r\nexport async function toggleReviewVisibility(id: number | string, isHidden: boolean) {\r\n    const { error } = await supabase\r\n        .from('reviews')\r\n        .update({ is_hidden: isHidden })\r\n        .eq('id', id);\r\n\r\n    if (error) throw error;\r\n}\r\n\r\nexport async function deleteReview(id: number | string) {\r\n    const { error } = await supabase\r\n        .from('reviews')\r\n        .delete()\r\n        .eq('id', id);\r\n\r\n    if (error) throw error;\r\n}\r\n\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\lib\\data.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\lib\\format.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\lib\\supabaseAdmin.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\lib\\supabase\\client.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\lib\\supabase\\middleware.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CookieOptions' is defined but never used.","line":1,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":48,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CookieOptions"},"fix":{"range":[27,47],"text":""},"desc":"Remove unused variable \"CookieOptions\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'options' is defined but never used.","line":23,"column":58,"nodeType":"Identifier","messageId":"unusedVar","endLine":23,"endColumn":65}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createServerClient, type CookieOptions } from '@supabase/ssr'\r\nimport { NextResponse, type NextRequest } from 'next/server'\r\n\r\nexport async function updateSession(request: NextRequest) {\r\n    let response = NextResponse.next({\r\n        request: {\r\n            headers: request.headers,\r\n        },\r\n    })\r\n\r\n    const supabase = createServerClient(\r\n        process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n        {\r\n            cookieOptions: {\r\n                name: 'web-auth-token',\r\n            },\r\n            cookies: {\r\n                getAll() {\r\n                    return request.cookies.getAll()\r\n                },\r\n                setAll(cookiesToSet) {\r\n                    cookiesToSet.forEach(({ name, value, options }) => request.cookies.set(name, value))\r\n                    response = NextResponse.next({\r\n                        request,\r\n                    })\r\n                    cookiesToSet.forEach(({ name, value, options }) =>\r\n                        response.cookies.set(name, value, options)\r\n                    )\r\n                },\r\n            },\r\n        }\r\n    )\r\n\r\n    // Refresh session if expired\r\n    const { data: { user } } = await supabase.auth.getUser()\r\n\r\n    // Protected routes check\r\n    const isProtectedRoute = request.nextUrl.pathname.startsWith('/profile') ||\r\n        request.nextUrl.pathname.startsWith('/checkout')\r\n    const isAuthRoute = request.nextUrl.pathname === '/login' ||\r\n        request.nextUrl.pathname === '/signup'\r\n\r\n    if (isProtectedRoute && !user) {\r\n        const redirectUrl = new URL('/login', request.url)\r\n        redirectUrl.searchParams.set('redirect', request.nextUrl.pathname)\r\n        return NextResponse.redirect(redirectUrl)\r\n    }\r\n\r\n    if (isAuthRoute && user) {\r\n        return NextResponse.redirect(new URL('/', request.url))\r\n    }\r\n\r\n    return response\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\lib\\supabase\\server.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'CookieOptions' is defined but never used.","line":2,"column":35,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":48,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"CookieOptions"},"fix":{"range":[29,49],"text":""},"desc":"Remove unused variable \"CookieOptions\"."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { createServerClient, type CookieOptions } from '@supabase/ssr'\r\nimport { cookies } from 'next/headers'\r\n\r\nexport async function createClient() {\r\n    const cookieStore = await cookies()\r\n\r\n    return createServerClient(\r\n        process.env.NEXT_PUBLIC_SUPABASE_URL!,\r\n        process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\r\n        {\r\n            cookieOptions: {\r\n                name: 'web-auth-token',\r\n            },\r\n            cookies: {\r\n                getAll() {\r\n                    return cookieStore.getAll()\r\n                },\r\n                setAll(cookiesToSet) {\r\n                    try {\r\n                        cookiesToSet.forEach(({ name, value, options }) =>\r\n                            cookieStore.set(name, value, options)\r\n                        )\r\n                    } catch {\r\n                        // The `setAll` method was called from a Server Component.\r\n                        // This can be ignored if you have middleware refreshing\r\n                        // user sessions.\r\n                    }\r\n                },\r\n            },\r\n        }\r\n    )\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\public\\sw.js","messages":[{"ruleId":"prefer-const","severity":1,"message":"'s' is never reassigned. Use 'const' instead.","line":1,"column":24,"nodeType":"Identifier","messageId":"useConst","endLine":1,"endColumn":25},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":156,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":203},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":209,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":233},{"ruleId":"prefer-const","severity":1,"message":"'e' is never reassigned. Use 'const' instead.","line":1,"column":250,"nodeType":"Identifier","messageId":"useConst","endLine":1,"endColumn":251,"fix":{"range":[245,256],"text":"const e=s[a];"}},{"ruleId":"prefer-const","severity":1,"message":"'t' is never reassigned. Use 'const' instead.","line":1,"column":448,"nodeType":"Identifier","messageId":"useConst","endLine":1,"endColumn":449,"fix":{"range":[443,452],"text":"const t={};"}},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":626,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":16628}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":2,"source":"if(!self.define){let e,s={};const a=(a,c)=>(a=new URL(a+\".js\",c).href,s[a]||new Promise(s=>{if(\"document\"in self){const e=document.createElement(\"script\");e.src=a,e.onload=s,document.head.appendChild(e)}else e=a,importScripts(a),s()}).then(()=>{let e=s[a];if(!e)throw new Error(`Module ${a} didn’t register its module`);return e}));self.define=(c,i)=>{const n=e||(\"document\"in self?document.currentScript.src:\"\")||location.href;if(s[n])return;let t={};const r=e=>a(e,n),d={module:{uri:n},exports:t,require:r};s[n]=Promise.all(c.map(e=>d[e]||r(e))).then(e=>(i(...e),t))}}define([\"./workbox-b52a85cb\"],function(e){\"use strict\";importScripts(),self.skipWaiting(),e.clientsClaim(),e.precacheAndRoute([{url:\"/_next/static/chunks/1082-50b9ddb42b79b594.js\",revision:\"50b9ddb42b79b594\"},{url:\"/_next/static/chunks/1446.2a26417c759e67b8.js\",revision:\"2a26417c759e67b8\"},{url:\"/_next/static/chunks/1939-be5921d944774d44.js\",revision:\"be5921d944774d44\"},{url:\"/_next/static/chunks/434-d151ac0ccb903413.js\",revision:\"d151ac0ccb903413\"},{url:\"/_next/static/chunks/445-cb02c75d1c86c85d.js\",revision:\"cb02c75d1c86c85d\"},{url:\"/_next/static/chunks/5587-3447c9135433b21e.js\",revision:\"3447c9135433b21e\"},{url:\"/_next/static/chunks/5866-8c0df23bff8665dd.js\",revision:\"8c0df23bff8665dd\"},{url:\"/_next/static/chunks/6387.9a7bf416cbcd193d.js\",revision:\"9a7bf416cbcd193d\"},{url:\"/_next/static/chunks/6764-cca05f16f1963fd7.js\",revision:\"cca05f16f1963fd7\"},{url:\"/_next/static/chunks/7687-c467ba38ad7e350e.js\",revision:\"c467ba38ad7e350e\"},{url:\"/_next/static/chunks/8240-64023a8ea80d6b1b.js\",revision:\"64023a8ea80d6b1b\"},{url:\"/_next/static/chunks/87c73c54-4584b83e8281e545.js\",revision:\"4584b83e8281e545\"},{url:\"/_next/static/chunks/8839-680d3b4a986fccdb.js\",revision:\"680d3b4a986fccdb\"},{url:\"/_next/static/chunks/8863-92a89af5353125b9.js\",revision:\"92a89af5353125b9\"},{url:\"/_next/static/chunks/app/(main)/cart/page-a1dd6cd03b118d2b.js\",revision:\"a1dd6cd03b118d2b\"},{url:\"/_next/static/chunks/app/(main)/category/%5Bslug%5D/loading-e558b0ad2bd538e9.js\",revision:\"e558b0ad2bd538e9\"},{url:\"/_next/static/chunks/app/(main)/category/%5Bslug%5D/page-7bfe03ceb6c7b1e0.js\",revision:\"7bfe03ceb6c7b1e0\"},{url:\"/_next/static/chunks/app/(main)/layout-2d95a2ada66770aa.js\",revision:\"2d95a2ada66770aa\"},{url:\"/_next/static/chunks/app/(main)/loading-e558b0ad2bd538e9.js\",revision:\"e558b0ad2bd538e9\"},{url:\"/_next/static/chunks/app/(main)/offers/%5Bslug%5D/page-6d1f51595064f7d6.js\",revision:\"6d1f51595064f7d6\"},{url:\"/_next/static/chunks/app/(main)/page-9316a58a393664e3.js\",revision:\"9316a58a393664e3\"},{url:\"/_next/static/chunks/app/(main)/product/%5Bid%5D/loading-e558b0ad2bd538e9.js\",revision:\"e558b0ad2bd538e9\"},{url:\"/_next/static/chunks/app/(main)/product/%5Bid%5D/page-43a2598c228c1c91.js\",revision:\"43a2598c228c1c91\"},{url:\"/_next/static/chunks/app/(main)/shop/page-15b63c81d935507d.js\",revision:\"15b63c81d935507d\"},{url:\"/_next/static/chunks/app/_global-error/page-e558b0ad2bd538e9.js\",revision:\"e558b0ad2bd538e9\"},{url:\"/_next/static/chunks/app/_not-found/page-6bbcb325ea07b432.js\",revision:\"6bbcb325ea07b432\"},{url:\"/_next/static/chunks/app/auth/callback/page-4cee5e0425c8c422.js\",revision:\"4cee5e0425c8c422\"},{url:\"/_next/static/chunks/app/checkout/page-d48f45850b4af21c.js\",revision:\"d48f45850b4af21c\"},{url:\"/_next/static/chunks/app/data-deletion/page-441667bb3b52cf68.js\",revision:\"441667bb3b52cf68\"},{url:\"/_next/static/chunks/app/debug-update/page-a4c90dc087ea9ede.js\",revision:\"a4c90dc087ea9ede\"},{url:\"/_next/static/chunks/app/forgot-password/page-bff3982fe36efcf4.js\",revision:\"bff3982fe36efcf4\"},{url:\"/_next/static/chunks/app/layout-c26584b984fa7fe3.js\",revision:\"c26584b984fa7fe3\"},{url:\"/_next/static/chunks/app/loading-e558b0ad2bd538e9.js\",revision:\"e558b0ad2bd538e9\"},{url:\"/_next/static/chunks/app/login/page-a12b95b3b357f91f.js\",revision:\"a12b95b3b357f91f\"},{url:\"/_next/static/chunks/app/orders/%5Bid%5D/page-4ba1eb007ae7b7f5.js\",revision:\"4ba1eb007ae7b7f5\"},{url:\"/_next/static/chunks/app/privacy/page-441667bb3b52cf68.js\",revision:\"441667bb3b52cf68\"},{url:\"/_next/static/chunks/app/profile/addresses/page-61f918514b37c761.js\",revision:\"61f918514b37c761\"},{url:\"/_next/static/chunks/app/profile/orders/page-77e7099709f6b576.js\",revision:\"77e7099709f6b576\"},{url:\"/_next/static/chunks/app/profile/page-bd3d45f6d7274586.js\",revision:\"bd3d45f6d7274586\"},{url:\"/_next/static/chunks/app/profile/wishlist/page-28a5f6f9cf97dfcd.js\",revision:\"28a5f6f9cf97dfcd\"},{url:\"/_next/static/chunks/app/signup/page-6bc95e80a97e605f.js\",revision:\"6bc95e80a97e605f\"},{url:\"/_next/static/chunks/app/terms/page-441667bb3b52cf68.js\",revision:\"441667bb3b52cf68\"},{url:\"/_next/static/chunks/app/update-password/page-7040825e148dbe7d.js\",revision:\"7040825e148dbe7d\"},{url:\"/_next/static/chunks/framework-433484926081ff69.js\",revision:\"433484926081ff69\"},{url:\"/_next/static/chunks/main-app-28f56ef75a45960f.js\",revision:\"28f56ef75a45960f\"},{url:\"/_next/static/chunks/main-f37bc560d88b03e8.js\",revision:\"f37bc560d88b03e8\"},{url:\"/_next/static/chunks/next/dist/client/components/builtin/app-error-e558b0ad2bd538e9.js\",revision:\"e558b0ad2bd538e9\"},{url:\"/_next/static/chunks/next/dist/client/components/builtin/forbidden-e558b0ad2bd538e9.js\",revision:\"e558b0ad2bd538e9\"},{url:\"/_next/static/chunks/next/dist/client/components/builtin/global-error-14173f9f9106db70.js\",revision:\"14173f9f9106db70\"},{url:\"/_next/static/chunks/next/dist/client/components/builtin/not-found-e558b0ad2bd538e9.js\",revision:\"e558b0ad2bd538e9\"},{url:\"/_next/static/chunks/next/dist/client/components/builtin/unauthorized-e558b0ad2bd538e9.js\",revision:\"e558b0ad2bd538e9\"},{url:\"/_next/static/chunks/polyfills-42372ed130431b0a.js\",revision:\"846118c33b2c0e922d7b3a7676f81f6f\"},{url:\"/_next/static/chunks/webpack-3b1f1eebb356d2dd.js\",revision:\"3b1f1eebb356d2dd\"},{url:\"/_next/static/css/ba5d181ef35af4f9.css\",revision:\"ba5d181ef35af4f9\"},{url:\"/_next/static/media/636a5ac981f94f8b-s.p.woff2\",revision:\"52d04440a9faae0db9adc6cdc844099b\"},{url:\"/_next/static/media/6fe53d21e6e7ebd8-s.woff2\",revision:\"2591db816b61d44b6e87ba79d13622b2\"},{url:\"/_next/static/media/8ebc6e9dde468c4a-s.woff2\",revision:\"196acbb650c75807ea2f0ef36edbd186\"},{url:\"/_next/static/media/9e7b0a821b9dfcb4-s.woff2\",revision:\"5ffe46eeb00dd9fa8a70cb10ccc3817e\"},{url:\"/_next/static/thl3nUHJmGk2B9cROeZeM/_buildManifest.js\",revision:\"d18cb425b6a8eadd7f3eb98f6d000930\"},{url:\"/_next/static/thl3nUHJmGk2B9cROeZeM/_ssgManifest.js\",revision:\"b6652df95db52feb4daf4eca35380933\"},{url:\"/assets/images/card1.png\",revision:\"554e4149c2c76c8ab9b4189f5575fa56\"},{url:\"/assets/images/card1mb.png\",revision:\"3eef343ac6568b60cd598b2cc6b3b2ae\"},{url:\"/assets/images/card2.png\",revision:\"3ba286ef832c804460ea210bb4d851ad\"},{url:\"/assets/images/card2mb.png\",revision:\"0ac45af8d04b343ec4fd72d9a3d0aadc\"},{url:\"/assets/images/card3.png\",revision:\"b87484760765f6b1aec87b8aee980e26\"},{url:\"/assets/images/card3mb.png\",revision:\"436a9c40b5e84e1a276c55c1d5996049\"},{url:\"/assets/logo.png\",revision:\"15860953bd10cf637b32998cdf7045e2\"},{url:\"/file.svg\",revision:\"d09f95206c3fa0bb9bd9fefabfd0ea71\"},{url:\"/globe.svg\",revision:\"2aaafa6a49b6563925fe440891e32717\"},{url:\"/icon.png\",revision:\"ae5c83707397f7c9ef59dc82de7144db\"},{url:\"/legacy_assets/[TorrentBD]Stranger Things S05E08 Chapter Eight The Rightside Up 1080p NF WEB-DL DDP5 1 Atmos DV HDR H 265-QAsH.torrent\",revision:\"e1e50795b7e387f704914b2004336a7e\"},{url:\"/legacy_assets/apple_logo.svg\",revision:\"c50f01b5508ee7a6723e43e3b39726d5\"},{url:\"/legacy_assets/fonts/Cairo-Medium.ttf\",revision:\"dcb85dee1c4674ba69ab76c7275b515e\"},{url:\"/legacy_assets/fonts/Cairo-Regular.ttf\",revision:\"374ef4fe60ef13426296c292bba5e237\"},{url:\"/legacy_assets/fonts/Cairo-SemiBold.ttf\",revision:\"b9eb3a03009d618aa53a0ca8eaa6ab4b\"},{url:\"/legacy_assets/fonts/Poppins-Medium.ttf\",revision:\"bf59c687bc6d3a70204d3944082c5cc0\"},{url:\"/legacy_assets/fonts/Poppins-Regular.ttf\",revision:\"093ee89be9ede30383f39a899c485a82\"},{url:\"/legacy_assets/fonts/Poppins-SemiBold.ttf\",revision:\"6f1520d107205975713ba09df778f93f\"},{url:\"/legacy_assets/google_logo.svg\",revision:\"1e7ae09ea18c2e4cdacf2b1127a16231\"},{url:\"/legacy_assets/images/[TorrentBD]Udemy - Complete React and NextJS course with AI powered Projects [Last updated 122025] [Hot & New].torrent\",revision:\"6cf05005586c72d4c2cbb3c6138b3da9\"},{url:\"/legacy_assets/images/app_icon.png\",revision:\"15860953bd10cf637b32998cdf7045e2\"},{url:\"/legacy_assets/images/app_icon_foreground.png\",revision:\"7bc4fc6e7adb92fb08ac2745d1e63b81\"},{url:\"/legacy_assets/images/avatar.png\",revision:\"51b1e4a88a6c62fa23a168fcf8fe7d13\"},{url:\"/legacy_assets/images/background.png\",revision:\"5d815c5f5956908c041973f40d115448\"},{url:\"/legacy_assets/images/background_dark.png\",revision:\"8e95bb20016ebc8bb1c13c4b0812a3aa\"},{url:\"/legacy_assets/images/bell_pepper.png\",revision:\"36a39916906f47592fbbdb70b420712a\"},{url:\"/legacy_assets/images/cabbage.png\",revision:\"ec6c0ba8c35e4aad799ad90ddd40659e\"},{url:\"/legacy_assets/images/calendar.png\",revision:\"6cbc522e0f22f5e044fb0e570617a96b\"},{url:\"/legacy_assets/images/card1.png\",revision:\"554e4149c2c76c8ab9b4189f5575fa56\"},{url:\"/legacy_assets/images/card1mb.png\",revision:\"3eef343ac6568b60cd598b2cc6b3b2ae\"},{url:\"/legacy_assets/images/card2.png\",revision:\"3ba286ef832c804460ea210bb4d851ad\"},{url:\"/legacy_assets/images/card2mb.png\",revision:\"0ac45af8d04b343ec4fd72d9a3d0aadc\"},{url:\"/legacy_assets/images/card3.png\",revision:\"b87484760765f6b1aec87b8aee980e26\"},{url:\"/legacy_assets/images/card3mb.png\",revision:\"436a9c40b5e84e1a276c55c1d5996049\"},{url:\"/legacy_assets/images/carrot.png\",revision:\"5eb1400326486e720892d12244af261c\"},{url:\"/legacy_assets/images/cauliflower.png\",revision:\"60f7af5c4b8d3e24dfcdf5de002c5a13\"},{url:\"/legacy_assets/images/favourites.png\",revision:\"7b52e0df2dfc743e6f21985b94e05112\"},{url:\"/legacy_assets/images/ginger.png\",revision:\"dcb8bddc5108e27fb941be8cf31a8a0f\"},{url:\"/legacy_assets/images/lamb_meat.png\",revision:\"239121305fc3f0ce37f54969bc23b555\"},{url:\"/legacy_assets/images/lotus.png\",revision:\"29ec7f598d14825d0b3ad4351667ba30\"},{url:\"/legacy_assets/images/matches.png\",revision:\"82350d1e0e447c667a3d1fb51cb57986\"},{url:\"/legacy_assets/images/pumpkin.png\",revision:\"c90e0658380969d7ee1d9c13db20102f\"},{url:\"/legacy_assets/images/spinach.png\",revision:\"8dd6709e57f60a1dbb1f9d8ca027f2a3\"},{url:\"/legacy_assets/images/tomatoes.png\",revision:\"084c0147887125f2f6d7f4a7b26f0f3d\"},{url:\"/legacy_assets/logo.png\",revision:\"15860953bd10cf637b32998cdf7045e2\"},{url:\"/legacy_assets/vectors/add.svg\",revision:\"4d57dec6e63cc91ba52d2f03574d2516\"},{url:\"/legacy_assets/vectors/apple.svg\",revision:\"9ee6f564b151ce0f2aabe2a5678720f1\"},{url:\"/legacy_assets/vectors/babyfood.svg\",revision:\"d4e325d2addb5a991bf15e68b2b7f41a\"},{url:\"/legacy_assets/vectors/back_arrow.svg\",revision:\"c938b2de5867e7d8da732c6832dfb9dc\"},{url:\"/legacy_assets/vectors/basket.svg\",revision:\"adb585f440d659c9f73439acdea805d1\"},{url:\"/legacy_assets/vectors/bread.svg\",revision:\"e65aa2b54326f88b9f89d57c269c7e35\"},{url:\"/legacy_assets/vectors/broccoli.svg\",revision:\"27f7655f2d04733c9147af67f3ebef6d\"},{url:\"/legacy_assets/vectors/calendar.svg\",revision:\"ebf8980fbca0f13c926527ddc415e9c4\"},{url:\"/legacy_assets/vectors/cart.svg\",revision:\"a993dce0c422b8df2bfd1e156800a618\"},{url:\"/legacy_assets/vectors/category.svg\",revision:\"d26f6627f1148e589d00c96b7fc6fa8a\"},{url:\"/legacy_assets/vectors/cheese.svg\",revision:\"1af21e5c203dd4968dce50828d3d6dd9\"},{url:\"/legacy_assets/vectors/container.svg\",revision:\"f7a391f5cf0ea66334e20a8c6b2dc406\"},{url:\"/legacy_assets/vectors/corn.svg\",revision:\"fd13c47db0eafca6bdd8dcadbea2616f\"},{url:\"/legacy_assets/vectors/drinks.svg\",revision:\"9225f5f117596572c4ae1befb80d6d20\"},{url:\"/legacy_assets/vectors/emoji.svg\",revision:\"26dc3dac5b70befe22a37ffab5f8294c\"},{url:\"/legacy_assets/vectors/fashion.svg\",revision:\"15a00426319f82829074e21af8e74234\"},{url:\"/legacy_assets/vectors/fire.svg\",revision:\"bb7e7bcb1e212eb65b3bbad30aabe25d\"},{url:\"/legacy_assets/vectors/fire_.svg\",revision:\"4e669cf53b20289fea1f6700427b01c7\"},{url:\"/legacy_assets/vectors/home.svg\",revision:\"24d04bc179e27025a3a1e0c00c99fd77\"},{url:\"/legacy_assets/vectors/homecare.svg\",revision:\"f0ee7a077165fde9296679304228c55c\"},{url:\"/legacy_assets/vectors/meat.svg\",revision:\"be9f9939da4072b15dcaa3044a922731\"},{url:\"/legacy_assets/vectors/personalcare.svg\",revision:\"d4f5b9fa522a4f1b402402a417728049\"},{url:\"/legacy_assets/vectors/remove.svg\",revision:\"4917326e9c7f18378f6206db2795b9a0\"},{url:\"/legacy_assets/vectors/search.svg\",revision:\"06e8b9020dcf6ae3a9c245a727d6516c\"},{url:\"/legacy_assets/vectors/snack.svg\",revision:\"8971e18e374facd683e9709c2b1bdd6c\"},{url:\"/legacy_assets/vectors/user.svg\",revision:\"cec93fa1e9fc574c7ce8cf17d36ff45e\"},{url:\"/manifest.json\",revision:\"1af1a71fc0294d531ee237ecd5cd2412\"},{url:\"/next.svg\",revision:\"8e061864f388b47f33a1c3780831193e\"},{url:\"/vercel.svg\",revision:\"c0af2f507b369b085b35ef4bbe3bcf1e\"},{url:\"/window.svg\",revision:\"a2760511c65806022ad20adf74370ff3\"}],{ignoreURLParametersMatching:[/^utm_/,/^fbclid$/]}),e.cleanupOutdatedCaches(),e.registerRoute(\"/\",new e.NetworkFirst({cacheName:\"start-url\",plugins:[{cacheWillUpdate:async({response:e})=>e&&\"opaqueredirect\"===e.type?new Response(e.body,{status:200,statusText:\"OK\",headers:e.headers}):e}]}),\"GET\"),e.registerRoute(/^https:\\/\\/fonts\\.(?:gstatic)\\.com\\/.*/i,new e.CacheFirst({cacheName:\"google-fonts-webfonts\",plugins:[new e.ExpirationPlugin({maxEntries:4,maxAgeSeconds:31536e3})]}),\"GET\"),e.registerRoute(/^https:\\/\\/fonts\\.(?:googleapis)\\.com\\/.*/i,new e.StaleWhileRevalidate({cacheName:\"google-fonts-stylesheets\",plugins:[new e.ExpirationPlugin({maxEntries:4,maxAgeSeconds:604800})]}),\"GET\"),e.registerRoute(/\\.(?:eot|otf|ttc|ttf|woff|woff2|font.css)$/i,new e.StaleWhileRevalidate({cacheName:\"static-font-assets\",plugins:[new e.ExpirationPlugin({maxEntries:4,maxAgeSeconds:604800})]}),\"GET\"),e.registerRoute(/\\.(?:jpg|jpeg|gif|png|svg|ico|webp)$/i,new e.StaleWhileRevalidate({cacheName:\"static-image-assets\",plugins:[new e.ExpirationPlugin({maxEntries:64,maxAgeSeconds:2592e3})]}),\"GET\"),e.registerRoute(/\\/_next\\/static.+\\.js$/i,new e.CacheFirst({cacheName:\"next-static-js-assets\",plugins:[new e.ExpirationPlugin({maxEntries:64,maxAgeSeconds:86400})]}),\"GET\"),e.registerRoute(/\\/_next\\/image\\?url=.+$/i,new e.StaleWhileRevalidate({cacheName:\"next-image\",plugins:[new e.ExpirationPlugin({maxEntries:64,maxAgeSeconds:86400})]}),\"GET\"),e.registerRoute(/\\.(?:mp3|wav|ogg)$/i,new e.CacheFirst({cacheName:\"static-audio-assets\",plugins:[new e.RangeRequestsPlugin,new e.ExpirationPlugin({maxEntries:32,maxAgeSeconds:86400})]}),\"GET\"),e.registerRoute(/\\.(?:mp4|webm)$/i,new e.CacheFirst({cacheName:\"static-video-assets\",plugins:[new e.RangeRequestsPlugin,new e.ExpirationPlugin({maxEntries:32,maxAgeSeconds:86400})]}),\"GET\"),e.registerRoute(/\\.(?:js)$/i,new e.StaleWhileRevalidate({cacheName:\"static-js-assets\",plugins:[new e.ExpirationPlugin({maxEntries:48,maxAgeSeconds:86400})]}),\"GET\"),e.registerRoute(/\\.(?:css|less)$/i,new e.StaleWhileRevalidate({cacheName:\"static-style-assets\",plugins:[new e.ExpirationPlugin({maxEntries:32,maxAgeSeconds:86400})]}),\"GET\"),e.registerRoute(/\\/_next\\/data\\/.+\\/.+\\.json$/i,new e.StaleWhileRevalidate({cacheName:\"next-data\",plugins:[new e.ExpirationPlugin({maxEntries:32,maxAgeSeconds:86400})]}),\"GET\"),e.registerRoute(/\\.(?:json|xml|csv)$/i,new e.NetworkFirst({cacheName:\"static-data-assets\",plugins:[new e.ExpirationPlugin({maxEntries:32,maxAgeSeconds:86400})]}),\"GET\"),e.registerRoute(({sameOrigin:e,url:{pathname:s}})=>!(!e||s.startsWith(\"/api/auth/callback\")||!s.startsWith(\"/api/\")),new e.NetworkFirst({cacheName:\"apis\",networkTimeoutSeconds:10,plugins:[new e.ExpirationPlugin({maxEntries:16,maxAgeSeconds:86400})]}),\"GET\"),e.registerRoute(({request:e,url:{pathname:s},sameOrigin:a})=>\"1\"===e.headers.get(\"RSC\")&&\"1\"===e.headers.get(\"Next-Router-Prefetch\")&&a&&!s.startsWith(\"/api/\"),new e.NetworkFirst({cacheName:\"pages-rsc-prefetch\",plugins:[new e.ExpirationPlugin({maxEntries:32,maxAgeSeconds:86400})]}),\"GET\"),e.registerRoute(({request:e,url:{pathname:s},sameOrigin:a})=>\"1\"===e.headers.get(\"RSC\")&&a&&!s.startsWith(\"/api/\"),new e.NetworkFirst({cacheName:\"pages-rsc\",plugins:[new e.ExpirationPlugin({maxEntries:32,maxAgeSeconds:86400})]}),\"GET\"),e.registerRoute(({url:{pathname:e},sameOrigin:s})=>s&&!e.startsWith(\"/api/\"),new e.NetworkFirst({cacheName:\"pages\",plugins:[new e.ExpirationPlugin({maxEntries:32,maxAgeSeconds:86400})]}),\"GET\"),e.registerRoute(({sameOrigin:e})=>!e,new e.NetworkFirst({cacheName:\"cross-origin\",networkTimeoutSeconds:10,plugins:[new e.ExpirationPlugin({maxEntries:32,maxAgeSeconds:3600})]}),\"GET\")});\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\public\\workbox-b52a85cb.js","messages":[{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":49,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":80},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'t' is defined but never used.","line":1,"column":87,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":88},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":211,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":251},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":257,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":291},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'t' is defined but never used.","line":1,"column":298,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":299},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":381,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":425},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":642,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":671},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":813,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":832},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":989,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":1017},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":1093,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":1167},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":1738,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":1763},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":2263,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":2337},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":3058,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":3095},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'t' is defined but never used.","line":1,"column":3102,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":3103},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":3598,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":3626},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":3727,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":3847},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":7052,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":7174},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":7234,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":7291},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'i' is defined but never used.","line":1,"column":7954,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":7955},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":7962,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":8056},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":8066,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":8091},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":8368,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":8410},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":9440,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":9541},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":9550,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":9557},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":9566,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":9625},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":9627,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":9719},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":9962,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":10029},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":10038,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":10056},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":10065,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":10079},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":10081,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":10142},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":10163,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":10197},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":10963,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":11000},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'t' is defined but never used.","line":1,"column":11007,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":11008},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":11122,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":11142},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":11194,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":11295},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":11301,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":11462},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":11382,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":11453},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":11623,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":11656},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":11941,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":12031},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":12060,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":12097},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":12464,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":12575},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":12684,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":12793},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":13012,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":13065},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":13272,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":13313},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":13319,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":13360},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'t' is defined but never used.","line":1,"column":13367,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":13368},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'t' is defined but never used.","line":1,"column":14423,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":14424},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":14555,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":14592},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'t' is defined but never used.","line":1,"column":14599,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":14600},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":15097,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":15468},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":15191,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":15215},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":15404,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":15458},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":15514,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":15692},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":16025,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":16050},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'t' is defined but never used.","line":1,"column":16057,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":16058},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":16165,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":16292},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":16591,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":16732},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":16958,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":17076},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":17076,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":17176},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":17178,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":17384},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":17458,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":17677},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":17719,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":17855},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":17903,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":17970},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":19089,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":19137},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":20040,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":20063},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":20129,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":20176},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":20260,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":20286},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":20317,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":20349},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":20514,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":23575},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":20635,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":20660},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":20768,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":21260},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'t' is defined but never used.","line":1,"column":20988,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":20989},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":21080,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":21134},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":21657,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":21702},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":21768,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":21880},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":21988,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":22001},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":1,"column":22227,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":22228},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'s' is defined but never used.","line":1,"column":22385,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":22386},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":22450,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":22475},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":22748,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":22825},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":22962,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":22987},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'t' is defined but never used.","line":1,"column":23349,"nodeType":"Identifier","messageId":"unusedVar","endLine":1,"endColumn":23350},{"ruleId":"@typescript-eslint/no-unused-expressions","severity":1,"message":"Expected an assignment or function call and instead saw an expression.","line":1,"column":23479,"nodeType":"ExpressionStatement","messageId":"unusedExpression","endLine":1,"endColumn":23556}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":83,"fixableErrorCount":0,"fixableWarningCount":0,"source":"define([\"exports\"],function(t){\"use strict\";try{self[\"workbox:core:7.0.0\"]&&_()}catch(t){}const e=(t,...e)=>{let s=t;return e.length>0&&(s+=` :: ${JSON.stringify(e)}`),s};class s extends Error{constructor(t,s){super(e(t,s)),this.name=t,this.details=s}}try{self[\"workbox:routing:7.0.0\"]&&_()}catch(t){}const n=t=>t&&\"object\"==typeof t?t:{handle:t};class r{constructor(t,e,s=\"GET\"){this.handler=n(e),this.match=t,this.method=s}setCatchHandler(t){this.catchHandler=n(t)}}class i extends r{constructor(t,e,s){super(({url:e})=>{const s=t.exec(e.href);if(s&&(e.origin===location.origin||0===s.index))return s.slice(1)},e,s)}}class a{constructor(){this.t=new Map,this.i=new Map}get routes(){return this.t}addFetchListener(){self.addEventListener(\"fetch\",t=>{const{request:e}=t,s=this.handleRequest({request:e,event:t});s&&t.respondWith(s)})}addCacheListener(){self.addEventListener(\"message\",t=>{if(t.data&&\"CACHE_URLS\"===t.data.type){const{payload:e}=t.data,s=Promise.all(e.urlsToCache.map(e=>{\"string\"==typeof e&&(e=[e]);const s=new Request(...e);return this.handleRequest({request:s,event:t})}));t.waitUntil(s),t.ports&&t.ports[0]&&s.then(()=>t.ports[0].postMessage(!0))}})}handleRequest({request:t,event:e}){const s=new URL(t.url,location.href);if(!s.protocol.startsWith(\"http\"))return;const n=s.origin===location.origin,{params:r,route:i}=this.findMatchingRoute({event:e,request:t,sameOrigin:n,url:s});let a=i&&i.handler;const o=t.method;if(!a&&this.i.has(o)&&(a=this.i.get(o)),!a)return;let c;try{c=a.handle({url:s,request:t,event:e,params:r})}catch(t){c=Promise.reject(t)}const h=i&&i.catchHandler;return c instanceof Promise&&(this.o||h)&&(c=c.catch(async n=>{if(h)try{return await h.handle({url:s,request:t,event:e,params:r})}catch(t){t instanceof Error&&(n=t)}if(this.o)return this.o.handle({url:s,request:t,event:e});throw n})),c}findMatchingRoute({url:t,sameOrigin:e,request:s,event:n}){const r=this.t.get(s.method)||[];for(const i of r){let r;const a=i.match({url:t,sameOrigin:e,request:s,event:n});if(a)return r=a,(Array.isArray(r)&&0===r.length||a.constructor===Object&&0===Object.keys(a).length||\"boolean\"==typeof a)&&(r=void 0),{route:i,params:r}}return{}}setDefaultHandler(t,e=\"GET\"){this.i.set(e,n(t))}setCatchHandler(t){this.o=n(t)}registerRoute(t){this.t.has(t.method)||this.t.set(t.method,[]),this.t.get(t.method).push(t)}unregisterRoute(t){if(!this.t.has(t.method))throw new s(\"unregister-route-but-not-found-with-method\",{method:t.method});const e=this.t.get(t.method).indexOf(t);if(!(e>-1))throw new s(\"unregister-route-route-not-registered\");this.t.get(t.method).splice(e,1)}}let o;const c=()=>(o||(o=new a,o.addFetchListener(),o.addCacheListener()),o);function h(t,e,n){let a;if(\"string\"==typeof t){const s=new URL(t,location.href);a=new r(({url:t})=>t.href===s.href,e,n)}else if(t instanceof RegExp)a=new i(t,e,n);else if(\"function\"==typeof t)a=new r(t,e,n);else{if(!(t instanceof r))throw new s(\"unsupported-route-type\",{moduleName:\"workbox-routing\",funcName:\"registerRoute\",paramName:\"capture\"});a=t}return c().registerRoute(a),a}try{self[\"workbox:strategies:7.0.0\"]&&_()}catch(t){}const u={cacheWillUpdate:async({response:t})=>200===t.status||0===t.status?t:null},l={googleAnalytics:\"googleAnalytics\",precache:\"precache-v2\",prefix:\"workbox\",runtime:\"runtime\",suffix:\"undefined\"!=typeof registration?registration.scope:\"\"},f=t=>[l.prefix,t,l.suffix].filter(t=>t&&t.length>0).join(\"-\"),w=t=>t||f(l.precache),d=t=>t||f(l.runtime);function p(t,e){const s=new URL(t);for(const t of e)s.searchParams.delete(t);return s.href}class y{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}}const g=new Set;function m(t){return\"string\"==typeof t?new Request(t):t}class v{constructor(t,e){this.h={},Object.assign(this,e),this.event=e.event,this.u=t,this.l=new y,this.p=[],this.m=[...t.plugins],this.v=new Map;for(const t of this.m)this.v.set(t,{});this.event.waitUntil(this.l.promise)}async fetch(t){const{event:e}=this;let n=m(t);if(\"navigate\"===n.mode&&e instanceof FetchEvent&&e.preloadResponse){const t=await e.preloadResponse;if(t)return t}const r=this.hasCallback(\"fetchDidFail\")?n.clone():null;try{for(const t of this.iterateCallbacks(\"requestWillFetch\"))n=await t({request:n.clone(),event:e})}catch(t){if(t instanceof Error)throw new s(\"plugin-error-request-will-fetch\",{thrownErrorMessage:t.message})}const i=n.clone();try{let t;t=await fetch(n,\"navigate\"===n.mode?void 0:this.u.fetchOptions);for(const s of this.iterateCallbacks(\"fetchDidSucceed\"))t=await s({event:e,request:i,response:t});return t}catch(t){throw r&&await this.runCallbacks(\"fetchDidFail\",{error:t,event:e,originalRequest:r.clone(),request:i.clone()}),t}}async fetchAndCachePut(t){const e=await this.fetch(t),s=e.clone();return this.waitUntil(this.cachePut(t,s)),e}async cacheMatch(t){const e=m(t);let s;const{cacheName:n,matchOptions:r}=this.u,i=await this.getCacheKey(e,\"read\"),a=Object.assign(Object.assign({},r),{cacheName:n});s=await caches.match(i,a);for(const t of this.iterateCallbacks(\"cachedResponseWillBeUsed\"))s=await t({cacheName:n,matchOptions:r,cachedResponse:s,request:i,event:this.event})||void 0;return s}async cachePut(t,e){const n=m(t);var r;await(r=0,new Promise(t=>setTimeout(t,r)));const i=await this.getCacheKey(n,\"write\");if(!e)throw new s(\"cache-put-with-no-response\",{url:(a=i.url,new URL(String(a),location.href).href.replace(new RegExp(`^${location.origin}`),\"\"))});var a;const o=await this.R(e);if(!o)return!1;const{cacheName:c,matchOptions:h}=this.u,u=await self.caches.open(c),l=this.hasCallback(\"cacheDidUpdate\"),f=l?await async function(t,e,s,n){const r=p(e.url,s);if(e.url===r)return t.match(e,n);const i=Object.assign(Object.assign({},n),{ignoreSearch:!0}),a=await t.keys(e,i);for(const e of a)if(r===p(e.url,s))return t.match(e,n)}(u,i.clone(),[\"__WB_REVISION__\"],h):null;try{await u.put(i,l?o.clone():o)}catch(t){if(t instanceof Error)throw\"QuotaExceededError\"===t.name&&await async function(){for(const t of g)await t()}(),t}for(const t of this.iterateCallbacks(\"cacheDidUpdate\"))await t({cacheName:c,oldResponse:f,newResponse:o.clone(),request:i,event:this.event});return!0}async getCacheKey(t,e){const s=`${t.url} | ${e}`;if(!this.h[s]){let n=t;for(const t of this.iterateCallbacks(\"cacheKeyWillBeUsed\"))n=m(await t({mode:e,request:n,event:this.event,params:this.params}));this.h[s]=n}return this.h[s]}hasCallback(t){for(const e of this.u.plugins)if(t in e)return!0;return!1}async runCallbacks(t,e){for(const s of this.iterateCallbacks(t))await s(e)}*iterateCallbacks(t){for(const e of this.u.plugins)if(\"function\"==typeof e[t]){const s=this.v.get(e),n=n=>{const r=Object.assign(Object.assign({},n),{state:s});return e[t](r)};yield n}}waitUntil(t){return this.p.push(t),t}async doneWaiting(){let t;for(;t=this.p.shift();)await t}destroy(){this.l.resolve(null)}async R(t){let e=t,s=!1;for(const t of this.iterateCallbacks(\"cacheWillUpdate\"))if(e=await t({request:this.request,response:e,event:this.event})||void 0,s=!0,!e)break;return s||e&&200!==e.status&&(e=void 0),e}}class R{constructor(t={}){this.cacheName=d(t.cacheName),this.plugins=t.plugins||[],this.fetchOptions=t.fetchOptions,this.matchOptions=t.matchOptions}handle(t){const[e]=this.handleAll(t);return e}handleAll(t){t instanceof FetchEvent&&(t={event:t,request:t.request});const e=t.event,s=\"string\"==typeof t.request?new Request(t.request):t.request,n=\"params\"in t?t.params:void 0,r=new v(this,{event:e,request:s,params:n}),i=this.q(r,s,e);return[i,this.D(i,r,s,e)]}async q(t,e,n){let r;await t.runCallbacks(\"handlerWillStart\",{event:n,request:e});try{if(r=await this.U(e,t),!r||\"error\"===r.type)throw new s(\"no-response\",{url:e.url})}catch(s){if(s instanceof Error)for(const i of t.iterateCallbacks(\"handlerDidError\"))if(r=await i({error:s,event:n,request:e}),r)break;if(!r)throw s}for(const s of t.iterateCallbacks(\"handlerWillRespond\"))r=await s({event:n,request:e,response:r});return r}async D(t,e,s,n){let r,i;try{r=await t}catch(i){}try{await e.runCallbacks(\"handlerDidRespond\",{event:n,request:s,response:r}),await e.doneWaiting()}catch(t){t instanceof Error&&(i=t)}if(await e.runCallbacks(\"handlerDidComplete\",{event:n,request:s,response:r,error:i}),e.destroy(),i)throw i}}function b(t){t.then(()=>{})}function q(){return q=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)({}).hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},q.apply(null,arguments)}let D,U;const x=new WeakMap,L=new WeakMap,I=new WeakMap,C=new WeakMap,E=new WeakMap;let N={get(t,e,s){if(t instanceof IDBTransaction){if(\"done\"===e)return L.get(t);if(\"objectStoreNames\"===e)return t.objectStoreNames||I.get(t);if(\"store\"===e)return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return k(t[e])},set:(t,e,s)=>(t[e]=s,!0),has:(t,e)=>t instanceof IDBTransaction&&(\"done\"===e||\"store\"===e)||e in t};function O(t){return t!==IDBDatabase.prototype.transaction||\"objectStoreNames\"in IDBTransaction.prototype?(U||(U=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(B(this),e),k(x.get(this))}:function(...e){return k(t.apply(B(this),e))}:function(e,...s){const n=t.call(B(this),e,...s);return I.set(n,e.sort?e.sort():[e]),k(n)}}function T(t){return\"function\"==typeof t?O(t):(t instanceof IDBTransaction&&function(t){if(L.has(t))return;const e=new Promise((e,s)=>{const n=()=>{t.removeEventListener(\"complete\",r),t.removeEventListener(\"error\",i),t.removeEventListener(\"abort\",i)},r=()=>{e(),n()},i=()=>{s(t.error||new DOMException(\"AbortError\",\"AbortError\")),n()};t.addEventListener(\"complete\",r),t.addEventListener(\"error\",i),t.addEventListener(\"abort\",i)});L.set(t,e)}(t),e=t,(D||(D=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(t=>e instanceof t)?new Proxy(t,N):t);var e}function k(t){if(t instanceof IDBRequest)return function(t){const e=new Promise((e,s)=>{const n=()=>{t.removeEventListener(\"success\",r),t.removeEventListener(\"error\",i)},r=()=>{e(k(t.result)),n()},i=()=>{s(t.error),n()};t.addEventListener(\"success\",r),t.addEventListener(\"error\",i)});return e.then(e=>{e instanceof IDBCursor&&x.set(e,t)}).catch(()=>{}),E.set(e,t),e}(t);if(C.has(t))return C.get(t);const e=T(t);return e!==t&&(C.set(t,e),E.set(e,t)),e}const B=t=>E.get(t);const P=[\"get\",\"getKey\",\"getAll\",\"getAllKeys\",\"count\"],M=[\"put\",\"add\",\"delete\",\"clear\"],W=new Map;function j(t,e){if(!(t instanceof IDBDatabase)||e in t||\"string\"!=typeof e)return;if(W.get(e))return W.get(e);const s=e.replace(/FromIndex$/,\"\"),n=e!==s,r=M.includes(s);if(!(s in(n?IDBIndex:IDBObjectStore).prototype)||!r&&!P.includes(s))return;const i=async function(t,...e){const i=this.transaction(t,r?\"readwrite\":\"readonly\");let a=i.store;return n&&(a=a.index(e.shift())),(await Promise.all([a[s](...e),r&&i.done]))[0]};return W.set(e,i),i}N=(t=>q({},t,{get:(e,s,n)=>j(e,s)||t.get(e,s,n),has:(e,s)=>!!j(e,s)||t.has(e,s)}))(N);try{self[\"workbox:expiration:7.0.0\"]&&_()}catch(t){}const S=\"cache-entries\",K=t=>{const e=new URL(t,location.href);return e.hash=\"\",e.href};class A{constructor(t){this._=null,this.L=t}I(t){const e=t.createObjectStore(S,{keyPath:\"id\"});e.createIndex(\"cacheName\",\"cacheName\",{unique:!1}),e.createIndex(\"timestamp\",\"timestamp\",{unique:!1})}C(t){this.I(t),this.L&&function(t,{blocked:e}={}){const s=indexedDB.deleteDatabase(t);e&&s.addEventListener(\"blocked\",t=>e(t.oldVersion,t)),k(s).then(()=>{})}(this.L)}async setTimestamp(t,e){const s={url:t=K(t),timestamp:e,cacheName:this.L,id:this.N(t)},n=(await this.getDb()).transaction(S,\"readwrite\",{durability:\"relaxed\"});await n.store.put(s),await n.done}async getTimestamp(t){const e=await this.getDb(),s=await e.get(S,this.N(t));return null==s?void 0:s.timestamp}async expireEntries(t,e){const s=await this.getDb();let n=await s.transaction(S).store.index(\"timestamp\").openCursor(null,\"prev\");const r=[];let i=0;for(;n;){const s=n.value;s.cacheName===this.L&&(t&&s.timestamp<t||e&&i>=e?r.push(n.value):i++),n=await n.continue()}const a=[];for(const t of r)await s.delete(S,t.id),a.push(t.url);return a}N(t){return this.L+\"|\"+K(t)}async getDb(){return this._||(this._=await function(t,e,{blocked:s,upgrade:n,blocking:r,terminated:i}={}){const a=indexedDB.open(t,e),o=k(a);return n&&a.addEventListener(\"upgradeneeded\",t=>{n(k(a.result),t.oldVersion,t.newVersion,k(a.transaction),t)}),s&&a.addEventListener(\"blocked\",t=>s(t.oldVersion,t.newVersion,t)),o.then(t=>{i&&t.addEventListener(\"close\",()=>i()),r&&t.addEventListener(\"versionchange\",t=>r(t.oldVersion,t.newVersion,t))}).catch(()=>{}),o}(\"workbox-expiration\",1,{upgrade:this.C.bind(this)})),this._}}class F{constructor(t,e={}){this.O=!1,this.T=!1,this.k=e.maxEntries,this.B=e.maxAgeSeconds,this.P=e.matchOptions,this.L=t,this.M=new A(t)}async expireEntries(){if(this.O)return void(this.T=!0);this.O=!0;const t=this.B?Date.now()-1e3*this.B:0,e=await this.M.expireEntries(t,this.k),s=await self.caches.open(this.L);for(const t of e)await s.delete(t,this.P);this.O=!1,this.T&&(this.T=!1,b(this.expireEntries()))}async updateTimestamp(t){await this.M.setTimestamp(t,Date.now())}async isURLExpired(t){if(this.B){const e=await this.M.getTimestamp(t),s=Date.now()-1e3*this.B;return void 0===e||e<s}return!1}async delete(){this.T=!1,await this.M.expireEntries(1/0)}}try{self[\"workbox:range-requests:7.0.0\"]&&_()}catch(t){}async function H(t,e){try{if(206===e.status)return e;const n=t.headers.get(\"range\");if(!n)throw new s(\"no-range-header\");const r=function(t){const e=t.trim().toLowerCase();if(!e.startsWith(\"bytes=\"))throw new s(\"unit-must-be-bytes\",{normalizedRangeHeader:e});if(e.includes(\",\"))throw new s(\"single-range-only\",{normalizedRangeHeader:e});const n=/(\\d*)-(\\d*)/.exec(e);if(!n||!n[1]&&!n[2])throw new s(\"invalid-range-values\",{normalizedRangeHeader:e});return{start:\"\"===n[1]?void 0:Number(n[1]),end:\"\"===n[2]?void 0:Number(n[2])}}(n),i=await e.blob(),a=function(t,e,n){const r=t.size;if(n&&n>r||e&&e<0)throw new s(\"range-not-satisfiable\",{size:r,end:n,start:e});let i,a;return void 0!==e&&void 0!==n?(i=e,a=n+1):void 0!==e&&void 0===n?(i=e,a=r):void 0!==n&&void 0===e&&(i=r-n,a=r),{start:i,end:a}}(i,r.start,r.end),o=i.slice(a.start,a.end),c=o.size,h=new Response(o,{status:206,statusText:\"Partial Content\",headers:e.headers});return h.headers.set(\"Content-Length\",String(c)),h.headers.set(\"Content-Range\",`bytes ${a.start}-${a.end-1}/${i.size}`),h}catch(t){return new Response(\"\",{status:416,statusText:\"Range Not Satisfiable\"})}}function $(t,e){const s=e();return t.waitUntil(s),s}try{self[\"workbox:precaching:7.0.0\"]&&_()}catch(t){}function z(t){if(!t)throw new s(\"add-to-cache-list-unexpected-type\",{entry:t});if(\"string\"==typeof t){const e=new URL(t,location.href);return{cacheKey:e.href,url:e.href}}const{revision:e,url:n}=t;if(!n)throw new s(\"add-to-cache-list-unexpected-type\",{entry:t});if(!e){const t=new URL(n,location.href);return{cacheKey:t.href,url:t.href}}const r=new URL(n,location.href),i=new URL(n,location.href);return r.searchParams.set(\"__WB_REVISION__\",e),{cacheKey:r.href,url:i.href}}class G{constructor(){this.updatedURLs=[],this.notUpdatedURLs=[],this.handlerWillStart=async({request:t,state:e})=>{e&&(e.originalRequest=t)},this.cachedResponseWillBeUsed=async({event:t,state:e,cachedResponse:s})=>{if(\"install\"===t.type&&e&&e.originalRequest&&e.originalRequest instanceof Request){const t=e.originalRequest.url;s?this.notUpdatedURLs.push(t):this.updatedURLs.push(t)}return s}}}class V{constructor({precacheController:t}){this.cacheKeyWillBeUsed=async({request:t,params:e})=>{const s=(null==e?void 0:e.cacheKey)||this.W.getCacheKeyForURL(t.url);return s?new Request(s,{headers:t.headers}):t},this.W=t}}let J,Q;async function X(t,e){let n=null;if(t.url){n=new URL(t.url).origin}if(n!==self.location.origin)throw new s(\"cross-origin-copy-response\",{origin:n});const r=t.clone(),i={headers:new Headers(r.headers),status:r.status,statusText:r.statusText},a=e?e(i):i,o=function(){if(void 0===J){const t=new Response(\"\");if(\"body\"in t)try{new Response(t.body),J=!0}catch(t){J=!1}J=!1}return J}()?r.body:await r.blob();return new Response(o,a)}class Y extends R{constructor(t={}){t.cacheName=w(t.cacheName),super(t),this.j=!1!==t.fallbackToNetwork,this.plugins.push(Y.copyRedirectedCacheableResponsesPlugin)}async U(t,e){const s=await e.cacheMatch(t);return s||(e.event&&\"install\"===e.event.type?await this.S(t,e):await this.K(t,e))}async K(t,e){let n;const r=e.params||{};if(!this.j)throw new s(\"missing-precache-entry\",{cacheName:this.cacheName,url:t.url});{const s=r.integrity,i=t.integrity,a=!i||i===s;n=await e.fetch(new Request(t,{integrity:\"no-cors\"!==t.mode?i||s:void 0})),s&&a&&\"no-cors\"!==t.mode&&(this.A(),await e.cachePut(t,n.clone()))}return n}async S(t,e){this.A();const n=await e.fetch(t);if(!await e.cachePut(t,n.clone()))throw new s(\"bad-precaching-response\",{url:t.url,status:n.status});return n}A(){let t=null,e=0;for(const[s,n]of this.plugins.entries())n!==Y.copyRedirectedCacheableResponsesPlugin&&(n===Y.defaultPrecacheCacheabilityPlugin&&(t=s),n.cacheWillUpdate&&e++);0===e?this.plugins.push(Y.defaultPrecacheCacheabilityPlugin):e>1&&null!==t&&this.plugins.splice(t,1)}}Y.defaultPrecacheCacheabilityPlugin={cacheWillUpdate:async({response:t})=>!t||t.status>=400?null:t},Y.copyRedirectedCacheableResponsesPlugin={cacheWillUpdate:async({response:t})=>t.redirected?await X(t):t};class Z{constructor({cacheName:t,plugins:e=[],fallbackToNetwork:s=!0}={}){this.F=new Map,this.H=new Map,this.$=new Map,this.u=new Y({cacheName:w(t),plugins:[...e,new V({precacheController:this})],fallbackToNetwork:s}),this.install=this.install.bind(this),this.activate=this.activate.bind(this)}get strategy(){return this.u}precache(t){this.addToCacheList(t),this.G||(self.addEventListener(\"install\",this.install),self.addEventListener(\"activate\",this.activate),this.G=!0)}addToCacheList(t){const e=[];for(const n of t){\"string\"==typeof n?e.push(n):n&&void 0===n.revision&&e.push(n.url);const{cacheKey:t,url:r}=z(n),i=\"string\"!=typeof n&&n.revision?\"reload\":\"default\";if(this.F.has(r)&&this.F.get(r)!==t)throw new s(\"add-to-cache-list-conflicting-entries\",{firstEntry:this.F.get(r),secondEntry:t});if(\"string\"!=typeof n&&n.integrity){if(this.$.has(t)&&this.$.get(t)!==n.integrity)throw new s(\"add-to-cache-list-conflicting-integrities\",{url:r});this.$.set(t,n.integrity)}if(this.F.set(r,t),this.H.set(r,i),e.length>0){const t=`Workbox is precaching URLs without revision info: ${e.join(\", \")}\\nThis is generally NOT safe. Learn more at https://bit.ly/wb-precache`;console.warn(t)}}}install(t){return $(t,async()=>{const e=new G;this.strategy.plugins.push(e);for(const[e,s]of this.F){const n=this.$.get(s),r=this.H.get(e),i=new Request(e,{integrity:n,cache:r,credentials:\"same-origin\"});await Promise.all(this.strategy.handleAll({params:{cacheKey:s},request:i,event:t}))}const{updatedURLs:s,notUpdatedURLs:n}=e;return{updatedURLs:s,notUpdatedURLs:n}})}activate(t){return $(t,async()=>{const t=await self.caches.open(this.strategy.cacheName),e=await t.keys(),s=new Set(this.F.values()),n=[];for(const r of e)s.has(r.url)||(await t.delete(r),n.push(r.url));return{deletedURLs:n}})}getURLsToCacheKeys(){return this.F}getCachedURLs(){return[...this.F.keys()]}getCacheKeyForURL(t){const e=new URL(t,location.href);return this.F.get(e.href)}getIntegrityForCacheKey(t){return this.$.get(t)}async matchPrecache(t){const e=t instanceof Request?t.url:t,s=this.getCacheKeyForURL(e);if(s){return(await self.caches.open(this.strategy.cacheName)).match(s)}}createHandlerBoundToURL(t){const e=this.getCacheKeyForURL(t);if(!e)throw new s(\"non-precached-url\",{url:t});return s=>(s.request=new Request(t),s.params=Object.assign({cacheKey:e},s.params),this.strategy.handle(s))}}const tt=()=>(Q||(Q=new Z),Q);class et extends r{constructor(t,e){super(({request:s})=>{const n=t.getURLsToCacheKeys();for(const r of function*(t,{ignoreURLParametersMatching:e=[/^utm_/,/^fbclid$/],directoryIndex:s=\"index.html\",cleanURLs:n=!0,urlManipulation:r}={}){const i=new URL(t,location.href);i.hash=\"\",yield i.href;const a=function(t,e=[]){for(const s of[...t.searchParams.keys()])e.some(t=>t.test(s))&&t.searchParams.delete(s);return t}(i,e);if(yield a.href,s&&a.pathname.endsWith(\"/\")){const t=new URL(a.href);t.pathname+=s,yield t.href}if(n){const t=new URL(a.href);t.pathname+=\".html\",yield t.href}if(r){const t=r({url:i});for(const e of t)yield e.href}}(s.url,e)){const e=n.get(r);if(e){return{cacheKey:e,integrity:t.getIntegrityForCacheKey(e)}}}},t.strategy)}}t.CacheFirst=class extends R{async U(t,e){let n,r=await e.cacheMatch(t);if(!r)try{r=await e.fetchAndCachePut(t)}catch(t){t instanceof Error&&(n=t)}if(!r)throw new s(\"no-response\",{url:t.url,error:n});return r}},t.ExpirationPlugin=class{constructor(t={}){this.cachedResponseWillBeUsed=async({event:t,request:e,cacheName:s,cachedResponse:n})=>{if(!n)return null;const r=this.V(n),i=this.J(s);b(i.expireEntries());const a=i.updateTimestamp(e.url);if(t)try{t.waitUntil(a)}catch(t){}return r?n:null},this.cacheDidUpdate=async({cacheName:t,request:e})=>{const s=this.J(t);await s.updateTimestamp(e.url),await s.expireEntries()},this.X=t,this.B=t.maxAgeSeconds,this.Y=new Map,t.purgeOnQuotaError&&function(t){g.add(t)}(()=>this.deleteCacheAndMetadata())}J(t){if(t===d())throw new s(\"expire-custom-caches-only\");let e=this.Y.get(t);return e||(e=new F(t,this.X),this.Y.set(t,e)),e}V(t){if(!this.B)return!0;const e=this.Z(t);if(null===e)return!0;return e>=Date.now()-1e3*this.B}Z(t){if(!t.headers.has(\"date\"))return null;const e=t.headers.get(\"date\"),s=new Date(e).getTime();return isNaN(s)?null:s}async deleteCacheAndMetadata(){for(const[t,e]of this.Y)await self.caches.delete(t),await e.delete();this.Y=new Map}},t.NetworkFirst=class extends R{constructor(t={}){super(t),this.plugins.some(t=>\"cacheWillUpdate\"in t)||this.plugins.unshift(u),this.tt=t.networkTimeoutSeconds||0}async U(t,e){const n=[],r=[];let i;if(this.tt){const{id:s,promise:a}=this.et({request:t,logs:n,handler:e});i=s,r.push(a)}const a=this.st({timeoutId:i,request:t,logs:n,handler:e});r.push(a);const o=await e.waitUntil((async()=>await e.waitUntil(Promise.race(r))||await a)());if(!o)throw new s(\"no-response\",{url:t.url});return o}et({request:t,logs:e,handler:s}){let n;return{promise:new Promise(e=>{n=setTimeout(async()=>{e(await s.cacheMatch(t))},1e3*this.tt)}),id:n}}async st({timeoutId:t,request:e,logs:s,handler:n}){let r,i;try{i=await n.fetchAndCachePut(e)}catch(t){t instanceof Error&&(r=t)}return t&&clearTimeout(t),!r&&i||(i=await n.cacheMatch(e)),i}},t.RangeRequestsPlugin=class{constructor(){this.cachedResponseWillBeUsed=async({request:t,cachedResponse:e})=>e&&t.headers.has(\"range\")?await H(t,e):e}},t.StaleWhileRevalidate=class extends R{constructor(t={}){super(t),this.plugins.some(t=>\"cacheWillUpdate\"in t)||this.plugins.unshift(u)}async U(t,e){const n=e.fetchAndCachePut(t).catch(()=>{});e.waitUntil(n);let r,i=await e.cacheMatch(t);if(i);else try{i=await n}catch(t){t instanceof Error&&(r=t)}if(!i)throw new s(\"no-response\",{url:t.url,error:r});return i}},t.cleanupOutdatedCaches=function(){self.addEventListener(\"activate\",t=>{const e=w();t.waitUntil((async(t,e=\"-precache-\")=>{const s=(await self.caches.keys()).filter(s=>s.includes(e)&&s.includes(self.registration.scope)&&s!==t);return await Promise.all(s.map(t=>self.caches.delete(t))),s})(e).then(t=>{}))})},t.clientsClaim=function(){self.addEventListener(\"activate\",()=>self.clients.claim())},t.precacheAndRoute=function(t,e){!function(t){tt().precache(t)}(t),function(t){const e=tt();h(new et(e,t))}(e)},t.registerRoute=h});\n","usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\schemas\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\tailwind.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\test-supabase.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"F:\\Ecommerce\\Flutter-ecommerce-app-with-getx-master\\grocery\\apps\\web\\test_query.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]